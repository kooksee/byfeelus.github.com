<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Blogs on ç™¾é‡Œæ±‚ä¸€çš„åšå®¢</title>
        <link>http://kooksee.github.io/blog/</link>
        <language>zh-CN</language>
        <author>CoderZh</author>
        <rights>Copyright (c) 2015, CoderZh; all rights reserved.</rights>
        <updated>Mon, 01 Jan 0001 00:00:00 UTC</updated>
        
        <item>
            <title>17mei Docker Consul è¿è¡Œ æœåŠ¡æ³¨å†Œ æŸ¥çœ‹æ‰€æœ‰å½“å‰æœåŠ¡é…ç½®</title>
            <link>http://kooksee.github.io/blog/17mei%20Docker%20Consul%20%E8%BF%90%E8%A1%8C%20%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%20%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E5%BD%93%E5%89%8D%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/17mei%20Docker%20Consul%20%E8%BF%90%E8%A1%8C%20%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%20%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E5%BD%93%E5%89%8D%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE/</guid>
            <description>

&lt;h2 id=&#34;æ³¨å†ŒæœåŠ¡å®¹å™¨çš„è¿è¡Œ:d04551f912163f99d3b2993cc8f18aae&#34;&gt;æ³¨å†ŒæœåŠ¡å®¹å™¨çš„è¿è¡Œ&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;docker run -it -d --name consul -v /bin/consul:/bin/consul --net=prod -p 8500:8500 ubuntu:14.04 /bin/consul agent -bind=0.0.0.0 -dev -ui -client=0.0.0.0
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æœåŠ¡æ³¨å†Œ:d04551f912163f99d3b2993cc8f18aae&#34;&gt;æœåŠ¡æ³¨å†Œ&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;curl -X PUT -d &#39;{&amp;quot;Name&amp;quot;:&amp;quot;user&amp;quot;,&amp;quot;Address&amp;quot;:&amp;quot;prod-user.prod&amp;quot;,&amp;quot;Port&amp;quot;:13001,&amp;quot;tags&amp;quot;:[&amp;quot;user prod-user.prod 13001&amp;quot;]}&#39; -i http://localhost:8500/v1/agent/service/register

curl -X PUT -d &#39;{&amp;quot;Name&amp;quot;:&amp;quot;diary&amp;quot;, &amp;quot;Port&amp;quot;: 13006, &amp;quot;Address&amp;quot;:&amp;quot;prod-diary.prod&amp;quot;, &amp;quot;tags&amp;quot;:[&amp;quot;diary prod-diary.prod 13006&amp;quot;] }&#39; -i http://localhost:8500/v1/agent/service/register

curl -X PUT -d &#39;{&amp;quot;Name&amp;quot;:&amp;quot;mediastore&amp;quot;, &amp;quot;Port&amp;quot;: 13004, &amp;quot;Address&amp;quot;:&amp;quot;prod-mediastore.prod&amp;quot;, &amp;quot;tags&amp;quot;:[&amp;quot;mediastore prod-mediastore.prod 13004&amp;quot;] }&#39; -i http://localhost:8500/v1/agent/service/register

curl -X PUT -d &#39;{&amp;quot;Name&amp;quot;:&amp;quot;other&amp;quot;, &amp;quot;Port&amp;quot;: 13003, &amp;quot;Address&amp;quot;:&amp;quot;prod-other.prod&amp;quot;, &amp;quot;tags&amp;quot;:[&amp;quot;other prod-other.prod 13003&amp;quot;] }&#39; -i http://localhost:8500/v1/agent/service/register

curl -X PUT -d &#39;{&amp;quot;Name&amp;quot;:&amp;quot;verification&amp;quot;, &amp;quot;Port&amp;quot;: 13002, &amp;quot;Address&amp;quot;:&amp;quot;prod-verification.prod&amp;quot;, &amp;quot;tags&amp;quot;:[&amp;quot;verification prod-verification.prod 13002&amp;quot;] }&#39; -i http://localhost:8500/v1/agent/service/register

curl -X PUT -d &#39;{&amp;quot;Name&amp;quot;:&amp;quot;activity&amp;quot;, &amp;quot;Port&amp;quot;: 13005, &amp;quot;Address&amp;quot;:&amp;quot;prod-verification.prod&amp;quot;, &amp;quot;tags&amp;quot;:[&amp;quot;verification prod-verification.prod 13005&amp;quot;] }&#39; -i http://localhost:8500/v1/agent/service/register
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æŸ¥çœ‹å®Œæ•´consul-å½“å‰é…ç½®:d04551f912163f99d3b2993cc8f18aae&#34;&gt;æŸ¥çœ‹å®Œæ•´Consul å½“å‰é…ç½®&lt;/h2&gt;

&lt;p&gt;curl &lt;a href=&#34;http://127.0.0.1:8500/v1/agent/services&#34;&gt;http://127.0.0.1:8500/v1/agent/services&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        
        <item>
            <title>17mei å¾®æœåŠ¡çš„å‘ï¼Œæ£€æŸ¥ç‚¹ï¼Œä»¥åŠä¸€äº›æ“ä½œç»†èŠ‚</title>
            <link>http://kooksee.github.io/blog/17mei%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%9D%91%EF%BC%8C%E6%A3%80%E6%9F%A5%E7%82%B9%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C%E7%BB%86%E8%8A%82/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/17mei%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%9D%91%EF%BC%8C%E6%A3%80%E6%9F%A5%E7%82%B9%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C%E7%BB%86%E8%8A%82/</guid>
            <description>

&lt;h1 id=&#34;å‘:229a76c2071f7fa22b2d9c3a60de9699&#34;&gt;å‘&lt;/h1&gt;

&lt;h2 id=&#34;gateway-è¿è¡Œæ–‡ä»¶ä¾èµ–pemæ–‡ä»¶:229a76c2071f7fa22b2d9c3a60de9699&#34;&gt;gateway è¿è¡Œæ–‡ä»¶ä¾èµ–pemæ–‡ä»¶&lt;/h2&gt;

&lt;h2 id=&#34;verificationé‡Œé¢éœ€è¦æ ¹è¯ä¹¦-ä¸ç„¶æ²¡åŠæ³•è®¿é—®https-æ³¨æ„æ³¨æ„-apt-get-install-ca-certificates:229a76c2071f7fa22b2d9c3a60de9699&#34;&gt;verificationé‡Œé¢éœ€è¦æ ¹è¯ä¹¦ã€‚ä¸ç„¶æ²¡åŠæ³•è®¿é—®https æ³¨æ„æ³¨æ„ï¼ &lt;code&gt;apt-get install ca-certificates&lt;/code&gt;&lt;/h2&gt;

&lt;h2 id=&#34;pgsqlç¬¬ä¸€æ¬¡è¿è¡Œæ³¨æ„äº‹é¡¹:229a76c2071f7fa22b2d9c3a60de9699&#34;&gt;PGSQLç¬¬ä¸€æ¬¡è¿è¡Œæ³¨æ„äº‹é¡¹&lt;/h2&gt;

&lt;h3 id=&#34;pgsql-docker-è¿è¡Œå‚æ•°:229a76c2071f7fa22b2d9c3a60de9699&#34;&gt;PGSQL docker è¿è¡Œå‚æ•°ï¼š&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;docker run -it -d --name prod-postgres -e POSTGRES_PASSWORD=wothing --net=prod postgres:9.5.1&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;å»ºåº“:229a76c2071f7fa22b2d9c3a60de9699&#34;&gt;å»ºåº“&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;CREATE DATABASE wothing OWNER postgres;&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;å¼•ç”¨extension:229a76c2071f7fa22b2d9c3a60de9699&#34;&gt;å¼•ç”¨extension&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;CREATE EXTENSION &amp;quot;pgcrypto&amp;quot;;&lt;/code&gt;&lt;/p&gt;
</description>
        </item>
        
        <item>
            <title>API  è®¾è®¡æ–‡æ¡£</title>
            <link>http://kooksee.github.io/blog/API%20%20%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/API%20%20%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/</guid>
            <description>

&lt;h1 id=&#34;æ´»åŠ¨æŠ¥å-apis-v1:2baef82d8a5626322ee50f56601e46b3&#34;&gt;æ´»åŠ¨æŠ¥å APIs v1&lt;/h1&gt;

&lt;blockquote&gt;
&lt;p&gt;æ´»åŠ¨ç®¡ç†,æ´»åŠ¨ä½“éªŒä»¥åŠæ´»åŠ¨æŠ¥åçš„ç›¸å…³API&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;æ´»åŠ¨æŠ¥å:2baef82d8a5626322ee50f56601e46b3&#34;&gt;æ´»åŠ¨æŠ¥å&lt;/h2&gt;

&lt;h3 id=&#34;url:2baef82d8a5626322ee50f56601e46b3&#34;&gt;URL&lt;/h3&gt;

&lt;p&gt;POST &lt;code&gt;/activity/enroll&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;token:2baef82d8a5626322ee50f56601e46b3&#34;&gt;TOKEN&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;required&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;input:2baef82d8a5626322ee50f56601e46b3&#34;&gt;INPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;activity_id&amp;quot;:        &amp;quot;4eb3a4ff-ad0c-4a03-963c-1a9e4290863e&amp;quot;         //string:required, æ´»åŠ¨Id
    &amp;quot;attrs&amp;quot;:{                                //åŸºæœ¬å±æ€§
        &amp;quot;nickname&amp;quot;:        &amp;quot;irons&amp;quot;,          //string:required, æ˜µç§°
        &amp;quot;mobile&amp;quot;:          &amp;quot;86-18621936702&amp;quot;, //string:required, ç”µè¯å·ç 
        &amp;quot;gender&amp;quot;:          &amp;quot;female&amp;quot;,         //string:required, æ€§åˆ«
        &amp;quot;birthday&amp;quot;:        &amp;quot;2015-12-24&amp;quot;,     //string:required, ç”Ÿæ—¥
        &amp;quot;job&amp;quot;:             &amp;quot;å­¦ç”Ÿ&amp;quot;,           //string:required, èŒä¸š[å­¦ç”Ÿ, ä¸Šç­æ—, è‡ªç”±èŒä¸šè€…, å…¨èŒä¸»å¦‡, ç½‘çº¢, å…¶ä»– ]
    },

    &amp;quot;extras&amp;quot;:{                               //å¯æ‰©å±•å±æ€§
        &amp;quot;invitation_code&amp;quot;: &amp;quot;123456&amp;quot;,         //string:option,   é‚€è¯·ç ,meiId
        &amp;quot;front_photos&amp;quot;:     [&amp;quot;http://qiniu.com/1dasdf/asdf.jpg&amp;quot;,&amp;quot;http://qiniu.com/1dasdf/asdf.jpg&amp;quot;],//[]:required,æ­£é¢ç…§
        &amp;quot;profile_photos&amp;quot;:   [&amp;quot;http://qiniu.com/1dasdf/asdf.jpg&amp;quot;,&amp;quot;http://qiniu.com/1dasdf/asdf.jpg&amp;quot;],//[]:required,ä¾§é¢ç…§
        &amp;quot;apply_reason&amp;quot;:     &amp;quot;ç”³è¯·ç†ç”±&amp;quot;       //string:required,å‚åŠ æ´»åŠ¨çš„ç†ç”±ï¼Œæ”¹å–„
    },
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;output:2baef82d8a5626322ee50f56601e46b3&#34;&gt;OUTPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;code&amp;quot;:&amp;quot;00000&amp;quot;
    &amp;quot;data&amp;quot;:{
        &amp;quot;message&amp;quot;:&amp;quot;é™„åŠ ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯æé†’ä»¥åŠï¼Œå˜æ›´æé†’&amp;quot;
    }   
}

{
    &amp;quot;code&amp;quot;:&amp;quot;11201&amp;quot;,
    &amp;quot;message&amp;quot;:&amp;quot;ç”¨æˆ·å·²ç»æ³¨å†Œè¯¥æ´»åŠ¨&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;error:2baef82d8a5626322ee50f56601e46b3&#34;&gt;ERROR&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;ErrEnrollExists //error code:11201&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;curl:2baef82d8a5626322ee50f56601e46b3&#34;&gt;CURL&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;curl\
    -X POST\
    -d &#39;{&amp;quot;activity_id&amp;quot;:&amp;quot;wefddw&amp;quot;,&amp;quot;mobile&amp;quot;:&amp;quot;86-18621936702&amp;quot;,&amp;quot;gender&amp;quot;:&amp;quot;female&amp;quot;,&amp;quot;birthday&amp;quot;:&amp;quot;2015-12-24&amp;quot;,&amp;quot;job&amp;quot;:&amp;quot;å­¦ç”Ÿ&amp;quot;,&amp;quot;invitation_code&amp;quot;:&amp;quot;221ss&amp;quot;,&amp;quot;front_photo&amp;quot;:[&amp;quot;http://qiniu.com/fefw/ddw.jpg&amp;quot;,&amp;quot;http://qiniu.com/dee/fefew.jpg&amp;quot;],&amp;quot;profile_photo&amp;quot;: [&amp;quot;http://qiniu.com/fefw/ddw.jpg&amp;quot;,&amp;quot;http://qiniu.com/dee/fefew.jpg&amp;quot;],&amp;quot;activity_id&amp;quot;:&amp;quot;dwfeww&amp;quot;,&amp;quot;apply_reason&amp;quot;:&amp;quot;ç”³è¯·ç†ç”±&amp;quot;}&#39;\
    -i http://localhost:3001/v1/activity/enroll\
    -H &amp;quot;Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0MzM0MjkwNjgsImlhdCI6MTQzMzE2OTg2OCwic3ViIjoiNTU2YzY0OTNkZjhlNTY2NDViM2NmYjdlIn0.WA3UlkU2gDH5UCZ_q4abUSBTMEuY21ytAWgyUfPInEaYlJaI1Iav23yHoSHLggloV4emHf6f2hJuV-3LQuGMQfO60yC4zkgeBvBjjXm6808K_ZsuWMtzco8sTjV-2y6VbHb-EnUItVNE-YJuRiP_i0A0H3gJb7IfsSubOz63G3bXvCFUFxPy9Y7DPmpocLXexltf_-EKbyMNHHob5Nll0XOnb3dMZnXU9QhXnx1kT-2uexzdDVsWEZC6UexmRS9b86_oZ4tfGCcNG-Tg9Bl1ole_Yp_9fUBvqA9o-5gsEzFcc0atdEyM1ytFXAaO5SVCqbOnvRKKOdCrduGLth2w&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;ç”¨æˆ·æ˜¯å¦æ³¨å†Œ:2baef82d8a5626322ee50f56601e46b3&#34;&gt;ç”¨æˆ·æ˜¯å¦æ³¨å†Œ&lt;/h2&gt;

&lt;h3 id=&#34;url-1:2baef82d8a5626322ee50f56601e46b3&#34;&gt;URL&lt;/h3&gt;

&lt;p&gt;POST &lt;code&gt;/activity/is_enrolled&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;token-1:2baef82d8a5626322ee50f56601e46b3&#34;&gt;TOKEN&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;required&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;input-1:2baef82d8a5626322ee50f56601e46b3&#34;&gt;INPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;activity_id&amp;quot;:&amp;quot;4eb3a4ff-ad0c-4a03-963c-1a9e4290863e&amp;quot;,
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;output-1:2baef82d8a5626322ee50f56601e46b3&#34;&gt;OUTPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;code&amp;quot;:&amp;quot;00000&amp;quot;,
    &amp;quot;data&amp;quot;:{
        &amp;quot;is_enrolled&amp;quot;:false,
    },
}

{
    &amp;quot;code&amp;quot;:&amp;quot;11203&amp;quot;,
    &amp;quot;message&amp;quot;:&amp;quot;æ´»åŠ¨ä¸å­˜åœ¨!&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;error-1:2baef82d8a5626322ee50f56601e46b3&#34;&gt;ERROR&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;ErrActivityNotExists //error code:11203&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;curl-1:2baef82d8a5626322ee50f56601e46b3&#34;&gt;CURL&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;curl -i http://localhost:3001/v1/activity/is_enrolled\
     -d &#39;{&amp;quot;activity_id&amp;quot;:&amp;quot;bhbdhbvdvfhfvbdfhd&amp;quot;}&#39;\
     -H &amp;quot;Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0MzM0MjkwNjgsImlhdCI6MTQzMzE2OTg2OCwic3ViIjoiNTU2YzY0OTNkZjhlNTY2NDViM2NmYjdlIn0.WA3UlkU2gDH5UCZ_q4abUSBTMEuY21ytAWgyUfPInEaYlJaI1Iav23yHoSHLggloV4emHf6f2hJuV-3LQuGMQfO60yC4zkgeBvBjjXm6808K_ZsuWMtzco8sTjV-2y6VbHb-EnUItVNE-YJuRiP_i0A0H3gJb7IfsSubOz63G3bXvCFUFxPy9Y7DPmpocLXexltf_-EKbyMNHHob5Nll0XOnb3dMZnXU9QhXnx1kT-2uexzdDVsWEZC6UexmRS9b86_oZ4tfGCcNG-Tg9Bl1ole_Yp_9fUBvqA9o-5gsEzFcc0atdEyM1ytFXAaO5SVCqbOnvRKKOdCrduGLth2w&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;åˆ›å»ºæ´»åŠ¨:2baef82d8a5626322ee50f56601e46b3&#34;&gt;åˆ›å»ºæ´»åŠ¨&lt;/h2&gt;

&lt;h3 id=&#34;url-2:2baef82d8a5626322ee50f56601e46b3&#34;&gt;URL&lt;/h3&gt;

&lt;p&gt;POST &lt;code&gt;/activity/create&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;token-2:2baef82d8a5626322ee50f56601e46b3&#34;&gt;TOKEN&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;not required&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;input-2:2baef82d8a5626322ee50f56601e46b3&#34;&gt;INPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;activity_id&amp;quot;:&amp;quot;cfgvhjbk&amp;quot;,
    &amp;quot;attrs&amp;quot;:{
         &amp;quot;name&amp;quot;:&amp;quot;ç¾ç™½&amp;quot;,
         &amp;quot;title&amp;quot;:&amp;quot;ç¬¬ä¸€å­£&amp;quot;,
         &amp;quot;wechat&amp;quot;:&amp;quot;12321&amp;quot;,
         &amp;quot;city&amp;quot;:&amp;quot;ä¸Šæµ· åŒ—äº¬&amp;quot;,
         &amp;quot;start_at&amp;quot;:45678933,
         &amp;quot;end_at&amp;quot;:3221426,
    },
    &amp;quot;extras&amp;quot;:{
           &amp;quot;apply_reason_example&amp;quot;: &amp;quot;ç”³è¯·ç†ç”±èŒƒä¾‹&amp;quot;,
           &amp;quot;front_photo_examples&amp;quot;:[&amp;quot;http://www.baidu.com/123.jpg&amp;quot;,&amp;quot;http://www.baidu.com/123.jpg&amp;quot;],
           &amp;quot;profile_photo_examples&amp;quot;:[&amp;quot;http://www.baidu.com/123.jpg&amp;quot;,&amp;quot;http://www.baidu.com/123.jpg&amp;quot;],
           &amp;quot;banners&amp;quot;:[
             {
               &amp;quot;img&amp;quot;: &amp;quot;http://www.baidu.com/1122.jpg&amp;quot;,
               &amp;quot;target_type&amp;quot;: &amp;quot;web&amp;quot;,
               &amp;quot;target_id&amp;quot;: &amp;quot;12345&amp;quot;,
             },
             {
               &amp;quot;img&amp;quot;: &amp;quot;http://www.baidu.com/1122.jpg&amp;quot;,
               &amp;quot;target_type&amp;quot;: &amp;quot;web&amp;quot;,
               &amp;quot;target_id&amp;quot;: &amp;quot;1234532&amp;quot;,
             },
           ],
    },
    &amp;quot;enroll_num&amp;quot;:123,
    &amp;quot;fund_balance&amp;quot;:22233.53,
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;output-2:2baef82d8a5626322ee50f56601e46b3&#34;&gt;OUTPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;code&amp;quot;:&amp;quot;00000&amp;quot;,
    &amp;quot;data&amp;quot;:{
        &amp;quot;message&amp;quot;:&amp;quot;æ´»åŠ¨åˆ›å»ºæˆåŠŸ&amp;quot;,
    },
}

{
    &amp;quot;code&amp;quot;:&amp;quot;10002&amp;quot;,
    &amp;quot;message&amp;quot;:&amp;quot;æ ¼å¼åŒ–è½¬åŒ–é”™è¯¯!&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;error-2:2baef82d8a5626322ee50f56601e46b3&#34;&gt;ERROR&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;none&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;curl-2:2baef82d8a5626322ee50f56601e46b3&#34;&gt;CURL&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;curl\
  -i http://localhost:3001/v1/activity/create\
  -d &#39;{
        &amp;quot;attrs&amp;quot;:{
             &amp;quot;name&amp;quot;:&amp;quot;ç¾ç™½&amp;quot;,
             &amp;quot;title&amp;quot;:&amp;quot;ç¬¬ä¸€å­£&amp;quot;,
             &amp;quot;wechat&amp;quot;:&amp;quot;12321&amp;quot;,
             &amp;quot;city&amp;quot;:&amp;quot;ä¸Šæµ· åŒ—äº¬&amp;quot;,
             &amp;quot;start_at&amp;quot;:45678933,
             &amp;quot;end_at&amp;quot;:3221426,
        },
        &amp;quot;extras&amp;quot;:{
               &amp;quot;apply_reason_example&amp;quot;: &amp;quot;ç”³è¯·ç†ç”±èŒƒä¾‹&amp;quot;,
               &amp;quot;front_photo_examples&amp;quot;:[&amp;quot;http://www.baidu.com/123.jpg&amp;quot;,&amp;quot;http://www.baidu.com/123.jpg&amp;quot;],
               &amp;quot;profile_photo_examples&amp;quot;:[&amp;quot;http://www.baidu.com/123.jpg&amp;quot;,&amp;quot;http://www.baidu.com/123.jpg&amp;quot;],
               &amp;quot;banners&amp;quot;:[
                 {
                   &amp;quot;img&amp;quot;: &amp;quot;http://www.baidu.com/1122.jpg&amp;quot;,
                   &amp;quot;target_type&amp;quot;: &amp;quot;web&amp;quot;,
                   &amp;quot;target_id&amp;quot;: &amp;quot;12345&amp;quot;,
                 },
                 {
                   &amp;quot;img&amp;quot;: &amp;quot;http://www.baidu.com/1122.jpg&amp;quot;,
                   &amp;quot;target_type&amp;quot;: &amp;quot;web&amp;quot;,
                   &amp;quot;target_id&amp;quot;: &amp;quot;1234532&amp;quot;,
                 },
               ]
        },
        &amp;quot;enroll_num&amp;quot;:123,
        &amp;quot;fund_balance&amp;quot;:22233.53,
      }&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;##æ´»åŠ¨ä¿¡æ¯&lt;/p&gt;

&lt;h3 id=&#34;url-3:2baef82d8a5626322ee50f56601e46b3&#34;&gt;URL&lt;/h3&gt;

&lt;p&gt;POST &lt;code&gt;/activity/get_info&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;token-3:2baef82d8a5626322ee50f56601e46b3&#34;&gt;TOKEN&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;not required&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;input-3:2baef82d8a5626322ee50f56601e46b3&#34;&gt;INPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;activity_id&amp;quot;:&amp;quot;test&amp;quot;, //string:required
    &amp;quot;extras&amp;quot;:{},          //ä»¥åå‡çº§æ—¶éœ€è¦çš„æ‰©å±•å±æ€§
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;output-3:2baef82d8a5626322ee50f56601e46b3&#34;&gt;OUTPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;code&amp;quot;:&amp;quot;00000&amp;quot;
    &amp;quot;data&amp;quot;:{
        &amp;quot;attrs&amp;quot;:{
            &amp;quot;title&amp;quot;:                 &amp;quot;ç¬¬ä¸€å­£(ä»…é™ä¸Šæµ·)&amp;quot;,                                               //string:required, æ ‡é¢˜
            &amp;quot;name&amp;quot;:                  &amp;quot;æ´»åŠ¨åå­—&amp;quot;,                                                       //string:required.æ´»åŠ¨åå­—
            &amp;quot;city&amp;quot;:                  &amp;quot;ä¸Šæµ·&amp;quot;
            &amp;quot;wechat&amp;quot;:                &amp;quot;wdwww&amp;quot;,                                                         //string:required, å¾®ä¿¡å…¬ä¼—å·
            &amp;quot;start_at&amp;quot;:              1456305724,                                                      //timestamp:required,æ´»åŠ¨å¼€å§‹æ—¶é—´
            &amp;quot;end_at&amp;quot;:                1456305724,                                                       //timestamp:required,æ´»åŠ¨ç»“æŸæ—¶é—´
        },

        &amp;quot;extras&amp;quot;:{
          &amp;quot;banners&amp;quot;: [                                                                               //string:required, æ ‡é¢˜é¡µ
              {                                                                             
                  &amp;quot;img&amp;quot;        : &amp;quot;http://qiniu.com/sdddww/dwe.jpg&amp;quot;,                           //string:required, å›¾ç‰‡é“¾æ¥
                  &amp;quot;target_type&amp;quot;: &amp;quot;web&amp;quot;,                                                       //string:required, ç›®æ ‡ç±»å‹
                  &amp;quot;target_id&amp;quot;  : &amp;quot;http://qiniu.com/sdddww/dwe.jpg&amp;quot;,                            //string:required, ç›®æ ‡é“¾æ¥
              },
              {
                  &amp;quot;img&amp;quot;        : &amp;quot;http://qiniu.com/sdddww/dwe.jpg&amp;quot;,
                  &amp;quot;target_type&amp;quot;: &amp;quot;web&amp;quot;,
                  &amp;quot;target_id&amp;quot;  : &amp;quot;http://qiniu.com/sdddww/dwe.jpg&amp;quot;,
              },
          ],

          &amp;quot;apply_reason_example&amp;quot;:  &amp;quot;ç”³è¯·ç†ç”±èŒƒä¾‹&amp;quot;,                                                   //string:required,å‚åŠ æ´»åŠ¨çš„ç†ç”±ï¼Œæ”¹å–„å»ºè®®
          &amp;quot;front_photo_examples&amp;quot;:   [&amp;quot;http://qiniu.com/1dasdf/asdf.jpg&amp;quot;,&amp;quot;http://qiniu.com/1dasdf/asdf.jpg&amp;quot;],//[]:required,æ­£é¢ç…§
          &amp;quot;profile_photo_examples&amp;quot;: [&amp;quot;http://qiniu.com/1dasdf/asdf.jpg&amp;quot;,&amp;quot;http://qiniu.com/1dasdf/asdf.jpg&amp;quot;],//[]:required,ä¾§é¢ç…§
        },

        &amp;quot;enroll_num&amp;quot;:            1221,                                                          //æŠ¥åäººæ•°
        &amp;quot;fund_balance&amp;quot;:          12334223.43,                                                   //string:required, å‰©ä½™åŸºé‡‘
        &amp;quot;update_at&amp;quot;:             45673232,   //timestamp:required, æ´»åŠ¨ä¿¡æ¯æ›´æ–°æ—¶é—´æˆ³
        &amp;quot;status&amp;quot;                 1,          // int:required,æ´»åŠ¨å½“å‰çš„çŠ¶æ€,{-1:ä¸‹çº¿çŠ¶æ€,1:ä¸Šçº¿çŠ¶æ€}
    }
}

{
    &amp;quot;code&amp;quot;:&amp;quot;11203&amp;quot;,
    &amp;quot;message&amp;quot;:&amp;quot;æ´»åŠ¨ä¸å­˜åœ¨!&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;error-3:2baef82d8a5626322ee50f56601e46b3&#34;&gt;ERROR&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;ErrActivityNotExists //error code:11203&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;curl-3:2baef82d8a5626322ee50f56601e46b3&#34;&gt;CURL&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;curl\
  -X POST\
  -i http://localhost:3001/v1/activity/get_info \
  -d &#39;{&amp;quot;activity_id&amp;quot;:&amp;quot;test&amp;quot;}&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;è·å¾—æ´»åŠ¨åˆ—è¡¨:2baef82d8a5626322ee50f56601e46b3&#34;&gt;è·å¾—æ´»åŠ¨åˆ—è¡¨&lt;/h2&gt;

&lt;h3 id=&#34;url-4:2baef82d8a5626322ee50f56601e46b3&#34;&gt;URL&lt;/h3&gt;

&lt;p&gt;POST &lt;code&gt;/activity/get_activities&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;token-4:2baef82d8a5626322ee50f56601e46b3&#34;&gt;TOKEN&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;not required&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;input-4:2baef82d8a5626322ee50f56601e46b3&#34;&gt;INPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;last&amp;quot;:&amp;quot;234&amp;quot;,// ä¸Šæ¬¡çš„numæ•°
    &amp;quot;limit&amp;quot;:21,  // éœ€è¦è·å¾—è‡³å°‘limitæ¡æ•°æ®ï¼Œlimitä¸èƒ½å°äº1
    &amp;quot;extras&amp;quot;:{}, // ä»¥åæ‰©å±•åŠŸèƒ½,&amp;quot;is_brief&amp;quot;:true, ä»£è¡¨æ˜¯ç®€ç•¥çš„è¿˜æ˜¯å…¨éƒ¨çš„ä¿¡æ¯,é»˜è®¤ç®€ç•¥å†…å®¹
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;output-4:2baef82d8a5626322ee50f56601e46b3&#34;&gt;OUTPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;code&amp;quot;:&amp;quot;00000&amp;quot;
    &amp;quot;data&amp;quot;:{
        &amp;quot;activities&amp;quot;: [
        {
                &amp;quot;title&amp;quot;: &amp;quot;ç¬¬ä¸€å­£(ä»…é™ä¸Šæµ·)&amp;quot;, // æœ¬å­£æ´»åŠ¨çš„æ ‡é¢˜
                &amp;quot;status&amp;quot;: 1,                 //-1:æ´»åŠ¨å·²ä¸‹çº¿ï¼Œä¸‹çº¿ä¸æ˜¾ç¤º;1:æ´»åŠ¨ä¸Šçº¿
                &amp;quot;num&amp;quot;:1,                     // æ´»åŠ¨æ¬¡æ•°
                &amp;quot;activity_id&amp;quot;:&amp;quot;56789567&amp;quot;     // æŠ¥åæ´»åŠ¨çš„Id
                &amp;quot;update_at&amp;quot;:  23432112     // æ´»åŠ¨æ›´æ–°æ—¶é—´æˆ³
            },
        {
                &amp;quot;title&amp;quot;: &amp;quot;ç¬¬ä¸€å­£(ä»…é™ä¸Šæµ·)&amp;quot;, // æœ¬å­£æ´»åŠ¨çš„æ ‡é¢˜
                &amp;quot;status&amp;quot;: 1,
                &amp;quot;activity_id&amp;quot;:&amp;quot;56789567&amp;quot;
                &amp;quot;num&amp;quot;:2
                &amp;quot;update_at&amp;quot;:  23432112
            }
        ]  
    }
}

{
    &amp;quot;code&amp;quot;:&amp;quot;10002&amp;quot;,
    &amp;quot;message&amp;quot;:&amp;quot;æ•°æ®å‚æ•°è½¬åŒ–é”™è¯¯&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;error-4:2baef82d8a5626322ee50f56601e46b3&#34;&gt;ERROR&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;none&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;curl-4:2baef82d8a5626322ee50f56601e46b3&#34;&gt;CURL&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;curl\
  -X POST\
  -d &#39;{&amp;quot;last&amp;quot;:&amp;quot;2342&amp;quot;,&amp;quot;limit&amp;quot;:2}&#39;
  -i http://localhost:3001/v1/activity/get_activities
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;è·å¾—æ´»åŠ¨ä½“éªŒ:2baef82d8a5626322ee50f56601e46b3&#34;&gt;è·å¾—æ´»åŠ¨ä½“éªŒ&lt;/h2&gt;

&lt;h3 id=&#34;url-5:2baef82d8a5626322ee50f56601e46b3&#34;&gt;URL&lt;/h3&gt;

&lt;p&gt;POST &lt;code&gt;/activity/get_experiences&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;token-5:2baef82d8a5626322ee50f56601e46b3&#34;&gt;TOKEN&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;not required&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;input-5:2baef82d8a5626322ee50f56601e46b3&#34;&gt;INPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
  &amp;quot;last&amp;quot;:&amp;quot;ä¸Šæ¬¡çš„ä½“éªŒID&amp;quot;,
  &amp;quot;limit&amp;quot;:1,
  &amp;quot;extras&amp;quot;:{},
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;output-5:2baef82d8a5626322ee50f56601e46b3&#34;&gt;OUTPUT&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;code&amp;quot;:&amp;quot;00000&amp;quot;,
    &amp;quot;data&amp;quot;:{
       &amp;quot;experiences&amp;quot;:[
           {
                &amp;quot;user_id&amp;quot;:&amp;quot;23432&amp;quot;,
                &amp;quot;activity_name&amp;quot;:&amp;quot;ç¾ç™½&amp;quot;,
                &amp;quot;activity_title&amp;quot;:&amp;quot;ç¬¬ä¸€å­£&amp;quot;,
                &amp;quot;activity_balance&amp;quot;:12321.12,
                &amp;quot;extras&amp;quot;:{},
            },
            {
                &amp;quot;user_id&amp;quot;:&amp;quot;23432&amp;quot;,
                &amp;quot;activity_name&amp;quot;:&amp;quot;ç¾ç™½&amp;quot;,
                &amp;quot;activity_title&amp;quot;:&amp;quot;ç¬¬ä¸€å­£&amp;quot;,
                &amp;quot;activity_balance&amp;quot;:12321.12,
                &amp;quot;extras&amp;quot;:{},
            },
        ]
    },
}

{
    &amp;quot;code&amp;quot;:&amp;quot;10002&amp;quot;,
    &amp;quot;message&amp;quot;:&amp;quot;æ•°æ®å‚æ•°è½¬åŒ–é”™è¯¯&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;error-5:2baef82d8a5626322ee50f56601e46b3&#34;&gt;ERROR&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;none&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;curl-5:2baef82d8a5626322ee50f56601e46b3&#34;&gt;CURL&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;curl\
  -X POST\
  -i http://localhost:3001/v1/activity/get_experiences\
  -d &#39;{&amp;quot;last&amp;quot;:&amp;quot;2342&amp;quot;,&amp;quot;limit&amp;quot;:2}&#39;
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        
        <item>
            <title>API BluePrint</title>
            <link>http://kooksee.github.io/blog/API%20BluePrint/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/API%20BluePrint/</guid>
            <description>

&lt;h2 id=&#34;è¯­æ³•è§„èŒƒ:8c28c4a64c18fe5a5d079ebc23d5493e&#34;&gt;è¯­æ³•è§„èŒƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;é¦–å…ˆ, å¯ä»¥æŸ¥çœ‹å®˜æ–¹æä¾›çš„&lt;a href=&#34;https://github.com/apiaryio/api-blueprint/tree/master/examples&#34;&gt;ä¾‹å­&lt;/a&gt; . ä¸€å…±ä¹Ÿå°± 10 å¤šä¸ª, æƒ³æ·±ç©¶çš„ç«¥é‹å¯ä»¥çœ‹ä¸€ä¸‹ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ç„¶åæ˜¯å¾ˆå¤§æ¦‚ç‡ç”¨ä¸å¤ªåˆ°çš„&lt;a href=&#34;https://github.com/apiaryio/api-blueprint/blob/master/API%20Blueprint%20Specification.md&#34;&gt;è¯­æ³•è§„èŒƒ&lt;/a&gt;ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/apiaryio/mson&#34;&gt;MSON&lt;/a&gt;è¯­æ³•è§„èŒƒï¼ŒåŸºæœ¬ç”¨ä¸å¤ªåˆ°ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;é…å¥—å·¥å…·:8c28c4a64c18fe5a5d079ebc23d5493e&#34;&gt;é…å¥—å·¥å…·&lt;/h2&gt;

&lt;h3 id=&#34;ç¼–è¾‘å™¨æ’ä»¶:8c28c4a64c18fe5a5d079ebc23d5493e&#34;&gt;ç¼–è¾‘å™¨æ’ä»¶&lt;/h3&gt;

&lt;p&gt;å¯¹äºä¸ç†Ÿæ‚‰è¯­æ³•çš„ç«¥é‹ï¼Œå»ºè®®å®‰è£…é¢„è§ˆæ’ä»¶ï¼Œç›¸å½“äºå³æ—¶æ£€æŸ¥ã€‚ä»ğŸ‘‡é€‰ä¸€ä¸ªé¡ºæ‰‹çš„å§ï¼
* &lt;a href=&#34;https://github.com/apiaryio/api-blueprint-sublime-plugin&#34;&gt;sublime&lt;/a&gt;â€¨
* &lt;a href=&#34;https://atom.io/packages/language-api-blueprint&#34;&gt;atom-language&lt;/a&gt;â€¨
* &lt;a href=&#34;https://atom.io/packages/api-blueprint-preview&#34;&gt;atom-preview&lt;/a&gt;â€¨
* &lt;a href=&#34;https://github.com/kylef/apiblueprint.vim&#34;&gt;vim&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;mock-æœåŠ¡:8c28c4a64c18fe5a5d079ebc23d5493e&#34;&gt;Mock æœåŠ¡&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªæ˜¯ç”¨æ¥æ ¹æ®å¤§å®¶æ’°å†™çš„api.mdæ¥ç”Ÿæˆå¯¹åº”å‡æ•°æ®çš„ï¼Œç†è®ºä¸Šå¤§å®¶ä¸éœ€è¦å®‰è£…ï¼Œæƒ³ä½“éªŒä¸€æŠŠçš„å¯ä»¥è¯•è¯•ã€‚
* &lt;a href=&#34;https://github.com/localmed/api-mock&#34;&gt;api-mock&lt;/a&gt;
* &lt;a href=&#34;https://github.com/Aconex/drakov&#34;&gt;drakov&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;npm install -g api-mock
api-mock api.md --port 3000

npm install -g drakov
drakov -f api.md -p 3000
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;é™æ€-html-ç”Ÿæˆ:8c28c4a64c18fe5a5d079ebc23d5493e&#34;&gt;é™æ€ HTML ç”Ÿæˆ&lt;/h3&gt;

&lt;p&gt;å†™äº†ä¸€å † markdown æ–‡æ¡£ï¼Œåˆ°äº†è¯¥å‡ºæˆæœçš„æ—¶å€™äº†ã€‚ä½¿ç”¨&lt;a href=&#34;https://github.com/danielgtaylor/aglio&#34;&gt;aglio&lt;/a&gt;æ¥ç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„htmlé¡µé¢å§ã€‚&lt;/p&gt;

&lt;p&gt;å®‰è£…ä¸ä½¿ç”¨éƒ½éå¸¸ç®€å•ï¼Œé¦–å…ˆè¦ç¡®ä¿æœ¬åœ°è£…æœ‰ node ç¯å¢ƒã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;npm install -g aglio

aglio -i api.md -o api.html

æ­¤æ—¶ä½ å¯ä»¥é€‰æ‹©æ‰“å¼€api.htmlé¢„è§ˆã€‚ä½†è¿™ä¸ªå‘½ä»¤æ›´å¤šæ˜¯ç»™æœåŠ¡ç«¯ç”Ÿæˆé¡µé¢ç”¨çš„ã€‚ä¸å¤ªå¸¸ç”¨ã€‚

å¯ä»¥ç›´æ¥ï¼š
aglio -i api.md -s
ç„¶åé€šè¿‡ http://127.0.0.1:3000å°±å¯ä»¥é¢„è§ˆæ‰€ç”Ÿæˆçš„æ–‡ä»¶å•¦ï¼Œè¿™ä¸ªè¿™ä¸ªé¡µé¢åœ¨ä¿®æ”¹æ–‡æ¡£æ—¶æ˜¯å¯ä»¥åŒæ­¥åˆ·æ–°çš„ğŸ˜„
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”Ÿæˆhtmlæ–‡ä»¶æ—¶å¯èƒ½ä¼šæŠ¥é”™ï¼Œblueprintæœ‰ç‚¹ç±»ä¼¼äºyamlè¯­æ³•ï¼Œéœ€è¦ä¸¥æ ¼éµå¾ªè¯­æ³•å®šä¹‰ï¼ˆä¸»è¦æ˜¯ç©ºæ ¼çš„æ•°é‡åŠæ¢è¡Œçº¦å®šï¼‰ã€‚é”™è¯¯ä¼šåŒ…å«è¡Œå·ï¼Œè¯·æ³¨æ„æ’æŸ¥ã€‚ğŸ˜¢ï¼Œè¿™ä¹ˆé‡è¦çš„ä¸œè¥¿ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æ”¾åˆ°é¡¶éƒ¨ï¼Ÿ&lt;/p&gt;
</description>
        </item>
        
        <item>
            <title>Building Microservices: Using an API Gateway</title>
            <link>http://kooksee.github.io/blog/Building%20Microservices:%20Using%20an%20API%20Gateway/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/Building%20Microservices:%20Using%20an%20API%20Gateway/</guid>
            <description>&lt;p&gt;Blog
Tech
Chris Richardson
Â·
June 15, 2015
Building Microservices: Using an API Gateway
API gateway, microservices&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;twitter
linkedin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The first article in this seven-part series about designing, building, and deploying microservices introduced the Microservices Architecture pattern. It discussed the benefits and drawbacks of using microservices and how, despite the complexity of microservices, they are usually the ideal choice for complex applications. This is the second article in the series and will discuss building microservices using an API Gateway.&lt;/p&gt;

&lt;p&gt;When you choose to build your application as a set of microservices, you need to decide how your applicationâ€™s clients will interact with the microservices. With a monolithic application there is just one set of (typically replicated, load-balanced) endpoints. In a microservices architecture, however, each microservice exposes a set of what are typically fine-grained endpoints. In this article, we examine how this impacts client-to-application communication and proposes an approach that uses an API Gateway.&lt;/p&gt;

&lt;p&gt;Editorâ€™s note â€“ This seven-part series of articles is now complete:&lt;/p&gt;

&lt;p&gt;Blog
Tech
Chris Richardson
Â·
June 15, 2015
Building Microservices: Using an API Gateway
API gateway, microservices&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;twitter
linkedin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The first article in this seven-part series about designing, building, and deploying microservices introduced the Microservices Architecture pattern. It discussed the benefits and drawbacks of using microservices and how, despite the complexity of microservices, they are usually the ideal choice for complex applications. This is the second article in the series and will discuss building microservices using an API Gateway.&lt;/p&gt;

&lt;p&gt;When you choose to build your application as a set of microservices, you need to decide how your applicationâ€™s clients will interact with the microservices. With a monolithic application there is just one set of (typically replicated, load-balanced) endpoints. In a microservices architecture, however, each microservice exposes a set of what are typically fine-grained endpoints. In this article, we examine how this impacts client-to-application communication and proposes an approach that uses an API Gateway.&lt;/p&gt;

&lt;p&gt;Editorâ€™s note â€“ This seven-part series of articles is now complete:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1ï¼ŒIntroduction to Microservices
2ï¼ŒBuilding Microservices: Using an API Gateway (this article)
3ï¼ŒBuilding Microservices: Inter-Process Communication in a Microservices Architecture
4ï¼ŒService Discovery in a Microservices Architecture
5ï¼ŒEvent-Driven Data Management for Microservices
6ï¼ŒChoosing a Microservices Deployment Strategy
7ï¼ŒRefactoring a Monolith into Microservices
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Blog
Tech
Chris Richardson
Â·
June 15, 2015
Building Microservices: Using an API Gateway
API gateway, microservices&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;twitter
linkedin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The first article in this seven-part series about designing, building, and deploying microservices introduced the Microservices Architecture pattern. It discussed the benefits and drawbacks of using microservices and how, despite the complexity of microservices, they are usually the ideal choice for complex applications. This is the second article in the series and will discuss building microservices using an API Gateway.&lt;/p&gt;

&lt;p&gt;When you choose to build your application as a set of microservices, you need to decide how your applicationâ€™s clients will interact with the microservices. With a monolithic application there is just one set of (typically replicated, load-balanced) endpoints. In a microservices architecture, however, each microservice exposes a set of what are typically fine-grained endpoints. In this article, we examine how this impacts client-to-application communication and proposes an approach that uses an API Gateway.&lt;/p&gt;

&lt;p&gt;Editorâ€™s note â€“ This seven-part series of articles is now complete:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Introduction to Microservices
Building Microservices: Using an API Gateway (this article)
Building Microservices: Inter-Process Communication in a Microservices Architecture
Service Discovery in a Microservices Architecture
Event-Driven Data Management for Microservices
Choosing a Microservices Deployment Strategy
Refactoring a Monolith into Microservices
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Introduction&lt;/p&gt;

&lt;p&gt;Letâ€™s imagine that you are developing a native mobile client for a shopping application. Itâ€™s likely that you need to implement a product details page, which displays information about any given product.&lt;/p&gt;

&lt;p&gt;For example, the following diagram shows what you will see when scrolling through the product details in Amazonâ€™s Android mobile application.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.nginx.com/blog/building-microservices-using-an-api-gateway/&#34;&gt;https://www.nginx.com/blog/building-microservices-using-an-api-gateway/&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        
        <item>
            <title>Docker 2 -- å…³äºDockerfile</title>
            <link>http://kooksee.github.io/blog/Docker%202%20--%20%E5%85%B3%E4%BA%8EDockerf/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/Docker%202%20--%20%E5%85%B3%E4%BA%8EDockerf/</guid>
            <description>&lt;blockquote&gt;
&lt;p&gt;Dockerfileæ˜¯ä¸€ä¸ªé•œåƒçš„è¡¨ç¤ºï¼Œå¯ä»¥é€šè¿‡Dockerfileæ¥æè¿°æ„å»ºé•œåƒçš„æ­¥éª¤ï¼Œå¹¶è‡ªåŠ¨æ„å»ºä¸€ä¸ªå®¹å™¨&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰€æœ‰çš„ Dockerfile å‘½ä»¤æ ¼å¼éƒ½æ˜¯:
INSTRUCTION arguments&lt;/p&gt;

&lt;p&gt;è™½ç„¶æŒ‡ä»¤å¿½ç•¥å¤§å°å†™ï¼Œä½†æ˜¯å»ºè®®ä½¿ç”¨å¤§å†™ã€‚&lt;/p&gt;

&lt;p&gt;##FROM å‘½ä»¤
FROM &lt;image&gt;
æˆ–
FROM &lt;image&gt;:&lt;tag&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªè®¾ç½®åŸºæœ¬çš„é•œåƒï¼Œä¸ºåç»­çš„å‘½ä»¤ä½¿ç”¨ï¼Œæ‰€ä»¥åº”è¯¥ä½œä¸ºDockerfileçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚:
FROM ubuntu
å¦‚æœæ²¡æœ‰æŒ‡å®š tag ï¼Œåˆ™é»˜è®¤tagæ˜¯latestï¼Œå¦‚æœéƒ½æ²¡æœ‰åˆ™ä¼šæŠ¥é”™ã€‚&lt;/p&gt;

&lt;p&gt;##RUN å‘½ä»¤&lt;/p&gt;

&lt;p&gt;RUNå‘½ä»¤ä¼šåœ¨ä¸Šé¢FROMæŒ‡å®šçš„é•œåƒé‡Œæ‰§è¡Œä»»ä½•å‘½ä»¤ï¼Œç„¶åæäº¤(commit)ç»“æœï¼Œæäº¤çš„é•œåƒä¼šåœ¨åé¢ç»§ç»­ç”¨åˆ°ã€‚&lt;/p&gt;

&lt;p&gt;ä¸¤ç§æ ¼å¼:&lt;/p&gt;

&lt;p&gt;RUN &lt;command&gt; (the command is run in a shell - &lt;code&gt;/bin/sh -c&lt;/code&gt;)&lt;/p&gt;

&lt;p&gt;æˆ–:&lt;/p&gt;

&lt;p&gt;RUN &lt;a href=&#34;exec form&#34;&gt;&amp;ldquo;executable&amp;rdquo;, &amp;ldquo;param1&amp;rdquo;, &amp;ldquo;param2&amp;rdquo; &amp;hellip; &lt;/a&gt;&lt;/p&gt;

&lt;p&gt;RUNå‘½ä»¤ç­‰ä»·äº:&lt;/p&gt;

&lt;p&gt;docker run image command
docker commit container_id&lt;/p&gt;

&lt;p&gt;##æ³¨é‡Š&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ # ä½œä¸ºæ³¨é‡Š&lt;/p&gt;

&lt;p&gt;å¦‚:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# VERSION       1.0

# use the ubuntu base image provided by dotCloud
FROM ubuntu

# make sure the package repository is up to date
RUN echo &amp;quot;deb http://archive.ubuntu.com/ubuntu precise main universe&amp;quot; &amp;gt; /etc/apt/sources.list
RUN apt-get update

# install memcached
RUN apt-get install -y memcached
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##MAINTAINER å‘½ä»¤&lt;/p&gt;

&lt;p&gt;MAINTAINER name&lt;/p&gt;

&lt;p&gt;MAINTAINERå‘½ä»¤ç”¨æ¥æŒ‡å®šç»´æŠ¤è€…çš„å§“åå’Œè”ç³»æ–¹å¼&lt;/p&gt;

&lt;p&gt;å¦‚:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;MAINTAINER Guillaume J. Charmes, guillaume@dotcloud.com
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##ENTRYPOINT å‘½ä»¤
&lt;a href=&#34;http://cloud.51cto.com/art/201411/457338.htm&#34;&gt;http://cloud.51cto.com/art/201411/457338.htm&lt;/a&gt;
æœ‰ä¸¤ç§è¯­æ³•æ ¼å¼ï¼Œä¸€ç§å°±æ˜¯ä¸Šé¢çš„(shellæ–¹å¼):&lt;/p&gt;

&lt;p&gt;ENTRYPOINT cmd param1 param2 &amp;hellip;&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒç§æ˜¯ exec æ ¼å¼:
ENTRYPOINT [&amp;ldquo;cmd&amp;rdquo;, &amp;ldquo;param1&amp;rdquo;, &amp;ldquo;param2&amp;rdquo;..&lt;/p&gt;

&lt;p&gt;å¦‚:&lt;/p&gt;

&lt;p&gt;ENTRYPOINT [&amp;ldquo;echo&amp;rdquo;, &amp;ldquo;Whale you be my container&amp;rdquo;]&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;containerå¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œä½†æ˜¯ä¸€ä¸ªDockerfileä¸­åªèƒ½æœ‰ä¸€æ¡ENTRYPOINTå‘½ä»¤ï¼Œå¦‚æœå¤šæ¡ï¼Œåˆ™åªæ‰§è¡Œæœ€åä¸€æ¡
ENTRYPOINT å‘½ä»¤è®¾ç½®åœ¨å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œå‘½ä»¤&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;root@tankywoo-docker:~# cat Dockerfile
FROM ubuntu
ENTRYPOINT echo &amp;quot;Welcome!&amp;quot;

root@tankywoo-docker:~# docker run 62fda5e450d5
Welcome!
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##USER å‘½ä»¤&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚æŒ‡å®š memcached çš„è¿è¡Œç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ ENTRYPOINT æ¥å®ç°:&lt;/p&gt;

&lt;p&gt;ENTRYPOINT [&amp;ldquo;memcached&amp;rdquo;, &amp;ldquo;-u&amp;rdquo;, &amp;ldquo;daemon&amp;rdquo;]&lt;/p&gt;

&lt;p&gt;æ›´å¥½çš„æ–¹å¼æ˜¯ï¼š&lt;/p&gt;

&lt;p&gt;ENTRYPOINT [&amp;ldquo;memcached&amp;rdquo;]
USER daemon&lt;/p&gt;

&lt;p&gt;##EXPOSE å‘½ä»¤&lt;/p&gt;

&lt;p&gt;EXPOSE å‘½ä»¤å¯ä»¥è®¾ç½®ä¸€ä¸ªç«¯å£åœ¨è¿è¡Œçš„é•œåƒä¸­æš´éœ²åœ¨å¤–&lt;/p&gt;

&lt;p&gt;EXPOSE &lt;port&gt; [&lt;port&gt;&amp;hellip;]&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚memcachedä½¿ç”¨ç«¯å£ 11211ï¼Œå¯ä»¥æŠŠè¿™ä¸ªç«¯å£æš´éœ²åœ¨å¤–ï¼Œè¿™æ ·å®¹å™¨å¤–å¯ä»¥çœ‹åˆ°è¿™ä¸ªç«¯å£å¹¶ä¸å…¶é€šä¿¡ã€‚&lt;/p&gt;

&lt;p&gt;EXPOSE 11211&lt;/p&gt;

&lt;p&gt;containerå†…éƒ¨æœåŠ¡å¼€å¯çš„ç«¯å£ã€‚ä¸»æœºä¸Šè¦ç”¨è¿˜å¾—åœ¨å¯åŠ¨containeræ—¶ï¼Œåšhost-containerçš„ç«¯å£æ˜ å°„ï¼š&lt;/p&gt;

&lt;p&gt;docker run -d -p 127.0.0.1:33301:22 centos6-ssh&lt;/p&gt;

&lt;p&gt;container sshæœåŠ¡çš„22ç«¯å£è¢«æ˜ å°„åˆ°ä¸»æœºçš„33301ç«¯å£&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Memcached
#
# VERSION       2.2

# use the ubuntu base image provided by dotCloud
FROM ubuntu

MAINTAINER Victor Coisne victor.coisne@dotcloud.com

# make sure the package repository is up to date
RUN echo &amp;quot;deb http://archive.ubuntu.com/ubuntu precise main universe&amp;quot; &amp;gt; /etc/apt/sources.list
RUN apt-get update

# install memcached
RUN apt-get install -y memcached

# Launch memcached when launching the container
ENTRYPOINT [&amp;quot;memcached&amp;quot;]

# run memcached as the daemon user
USER daemon

# expose memcached port
EXPOSE 11211
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šé¢æ˜¯å®˜æ–¹ä¾‹å­ï¼Œå›½å†…å»ºè®®æ¢æˆ163æˆ–sohuçš„æºï¼Œä¸ç„¶å¤ªæ…¢äº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;root@tankywoo-docker:~# docker build -t tankywoo  - &amp;lt; dck                       [38/480]
Uploading context  2.56 kB
Uploading context
Step 0 : FROM ubuntu
 ---&amp;gt; 99ec81b80c55
Step 1 : MAINTAINER Victor Coisne victor.coisne@dotcloud.com
 ---&amp;gt; Using cache
 ---&amp;gt; 2b58110877f6
Step 2 : RUN echo &amp;quot;deb http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse&amp;quot; &amp;gt; /etc/apt/sources.list
 ---&amp;gt; Running in f55a4a8bb069
 ---&amp;gt; d48c6a965398
Step 3 : RUN apt-get update
 ---&amp;gt; Running in da091a1dd6e7
Ign http://mirrors.163.com precise InRelease
Get:1 http://mirrors.163.com precise Release.gpg [198 B]

....

Processing triggers for libc-bin (2.19-0ubuntu6) ...
Processing triggers for ureadahead (0.100.0-16) ...
 ---&amp;gt; 2886671b5b86
Step 5 : ENTRYPOINT [&amp;quot;memcached&amp;quot;]
 ---&amp;gt; Running in e8aeeab92cb6
 ---&amp;gt; 7148293a4053
Step 6 : USER daemon
 ---&amp;gt; Running in 288766b19606
 ---&amp;gt; 235e7f630ffa
Step 7 : EXPOSE 11211
 ---&amp;gt; Running in c6f881b9d51f
 ---&amp;gt; 666c5d65f396
Successfully built 666c5d65f396
Removing intermediate container f55a4a8bb069
Removing intermediate container da091a1dd6e7
Removing intermediate container f23631d3d45a
Removing intermediate container e8aeeab92cb6
Removing intermediate container 288766b19606
Removing intermediate container c6f881b9d51f
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##ENV å‘½ä»¤&lt;/p&gt;

&lt;p&gt;ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡&lt;/p&gt;

&lt;p&gt;ENV &lt;key&gt; &lt;value&gt;
æ¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;

&lt;p&gt;ENV LANG en_US.UTF-8
ENV LC_ALL en_US.UTF-8
è®¾ç½®äº†åï¼Œåç»­çš„RUNå‘½ä»¤éƒ½å¯ä»¥ä½¿ç”¨&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨æ­¤dockerfileç”Ÿæˆçš„imageæ–°å»ºcontainerï¼Œå¯ä»¥é€šè¿‡ docker inspect çœ‹åˆ°è¿™ä¸ªç¯å¢ƒå˜é‡:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;root@tankywoo-docker:~# docker inspect 49bfc7a9817f
    ...
    &amp;quot;Env&amp;quot;: [
        &amp;quot;name=tanky&amp;quot;,
        &amp;quot;HOME=/&amp;quot;,
        &amp;quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;quot;
    ],
    ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‡Œé¢çš„name=tankyå°±æ˜¯è®¾ç½®çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå¯ä»¥é€šè¿‡åœ¨docker runæ—¶è®¾ç½®æˆ–ä¿®æ”¹ç¯å¢ƒå˜é‡:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker run -i -t --env name=&amp;quot;tanky&amp;quot; ubuntu:newtest /bin/bash
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##ADD å‘½ä»¤&lt;/p&gt;

&lt;p&gt;ä»srcå¤åˆ¶æ–‡ä»¶åˆ°containerçš„destè·¯å¾„:&lt;/p&gt;

&lt;p&gt;ADD &lt;src&gt; &lt;dest&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;src&amp;gt; æ˜¯ç›¸å¯¹è¢«æ„å»ºçš„æºç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œå¯ä»¥æ˜¯æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¿œç¨‹çš„æ–‡ä»¶url
&amp;lt;dest&amp;gt; æ˜¯containerä¸­çš„ç»å¯¹è·¯å¾„
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°†æ–‡ä»¶&lt;src&gt;æ‹·è´åˆ°containerçš„æ–‡ä»¶ç³»ç»Ÿå¯¹åº”çš„è·¯å¾„&lt;dest&gt;&lt;/p&gt;

&lt;p&gt;æ‰€æœ‰æ‹·è´åˆ°containerä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æƒé™ä¸º0755,uidå’Œgidä¸º0&lt;/p&gt;

&lt;p&gt;å¦‚æœæ–‡ä»¶æ˜¯å¯è¯†åˆ«çš„å‹ç¼©æ ¼å¼ï¼Œåˆ™dockerä¼šå¸®å¿™è§£å‹ç¼©&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;å¦‚æœè¦ADDæœ¬åœ°æ–‡ä»¶ï¼Œåˆ™æœ¬åœ°æ–‡ä»¶å¿…é¡»åœ¨ docker build &amp;lt;PATH&amp;gt;ï¼ŒæŒ‡å®šçš„&amp;lt;PATH&amp;gt;ç›®å½•ä¸‹


å¦‚æœè¦ADDè¿œç¨‹æ–‡ä»¶ï¼Œåˆ™è¿œç¨‹æ–‡ä»¶å¿…é¡»åœ¨ docker build &amp;lt;PATH&amp;gt;ï¼ŒæŒ‡å®šçš„&amp;lt;PATH&amp;gt;ç›®å½•ä¸‹ã€‚æ¯”å¦‚:

docker build github.com/creack/docker-firefox


docker-firefoxç›®å½•ä¸‹å¿…é¡»æœ‰Dockerfileå’Œè¦ADDçš„æ–‡ä»¶


æ³¨æ„:ä½¿ç”¨docker build - &amp;lt; somefileæ–¹å¼è¿›è¡Œbuildï¼Œæ˜¯ä¸èƒ½ç›´æ¥å°†æœ¬åœ°æ–‡ä»¶ADDåˆ°containerä¸­ã€‚åªèƒ½ADD
 url file.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ADDåªæœ‰åœ¨buildé•œåƒçš„æ—¶å€™è¿è¡Œä¸€æ¬¡ï¼Œåé¢è¿è¡Œcontainerçš„æ—¶å€™ä¸ä¼šå†é‡æ–°åŠ è½½äº†ã€‚&lt;/p&gt;

&lt;p&gt;##VOLUME å‘½ä»¤&lt;/p&gt;

&lt;p&gt;VOLUME [&amp;ldquo;mountpoint&amp;rdquo;]&lt;/p&gt;

&lt;p&gt;å¦‚:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;VOLUME [&amp;quot;/data&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ›å»ºä¸€ä¸ªæŒ‚è½½ç‚¹ç”¨äºå…±äº«ç›®å½•&lt;/p&gt;

&lt;p&gt;å¯ä»¥å°†æœ¬åœ°æ–‡ä»¶å¤¹æˆ–è€…å…¶ä»–containerçš„æ–‡ä»¶å¤¹æŒ‚è½½åˆ°containerä¸­ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“å‚è€ƒ Docker 4 &amp;ndash; æ€»ç»“
##WORKDIR å‘½ä»¤&lt;/p&gt;

&lt;p&gt;åˆ‡æ¢ç›®å½•ç”¨ï¼Œå¯ä»¥å¤šæ¬¡åˆ‡æ¢(ç›¸å½“äºcdå‘½ä»¤)ï¼Œå¯¹RUN,CMD,ENTRYPOINTç”Ÿæ•ˆ
WORKDIR /path/to/workdir
é…ç½®RUN, CMD, ENTRYPOINT å‘½ä»¤è®¾ç½®å½“å‰å·¥ä½œè·¯å¾„&lt;/p&gt;

&lt;p&gt;å¯ä»¥è®¾ç½®å¤šæ¬¡ï¼Œå¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™ç›¸å¯¹å‰ä¸€ä¸ª WORKDIR å‘½ä»¤&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚:&lt;/p&gt;

&lt;p&gt;WORKDIR /a WORKDIR b WORKDIR c RUN pwd&lt;/p&gt;

&lt;p&gt;å…¶å®æ˜¯åœ¨ /a/b/c ä¸‹æ‰§è¡Œ pwd
##CMD å‘½ä»¤&lt;/p&gt;

&lt;p&gt;æœ‰ä¸‰ç§æ ¼å¼:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    CMD [&amp;quot;executable&amp;quot;,&amp;quot;param1&amp;quot;,&amp;quot;param2&amp;quot;] (like an exec, preferred form)
    CMD [&amp;quot;param1&amp;quot;,&amp;quot;param2&amp;quot;] (as default parameters to ENTRYPOINT)
    CMD command param1 param2 (as a shell
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ä¸€ä¸ªDockerfileé‡Œåªèƒ½æœ‰ä¸€ä¸ªCMDï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;The main purpose of a CMD is to provide defaults for an executing container.(ä¸ºå¯æ‰§è¡Œçš„å®¹å™¨æä¾›é»˜è®¤å€¼) These defaults can include an executable, or they can omit the executable, in which case you must specify an ENTRYPOINT as well.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##TODO è¿˜æ²¡ææ¸…æ¥šè¿™ä¸ªçš„ä½œç”¨
##ONBUILD
ONBUILD æŒ‡å®šçš„å‘½ä»¤åœ¨æ„å»ºé•œåƒæ—¶å¹¶ä¸æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å®ƒçš„å­é•œåƒä¸­æ‰§è¡Œ
TODO&lt;/p&gt;

&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼ŒåŸºæœ¬å¸¸ç”¨çš„å‘½ä»¤æ˜¯: FROM, MAINTAINER, RUN, ENTRYPOINT, USER, PORT, ADD
ä¸€äº›ä¾‹å­&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    docker-wordpress-nginx A Dockerfile that installs the latest wordpress, nginx and php-fpm.
    rails-meets-docker
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        
        <item>
            <title>Docker æ‰€æœ‰ç§ç±»å®¹å™¨è¿è¡Œæ–¹æ³•</title>
            <link>http://kooksee.github.io/blog/Docker%20%E6%89%80%E6%9C%89%E7%A7%8D%E7%B1%BB%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%96%B9%E6%B3%95/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/Docker%20%E6%89%80%E6%9C%89%E7%A7%8D%E7%B1%BB%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%96%B9%E6%B3%95/</guid>
            <description>

&lt;h2 id=&#34;å„ç§å®¹å™¨:f4861149b557706634d70e0e95ed362c&#34;&gt;å„ç§å®¹å™¨&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;nginx è¿™æ˜¯å¯¹å¤–çš„æ€»æœåŠ¡æ¥å£&lt;code&gt;docker run -it -d --name nnn --net=prod -v /root/nginx:/etc/nginx -v /root/brew:/root/brew -p 3000:80 nginx&lt;/code&gt; å…¶ä¸­-v ä¸€ä¸ªæ˜¯æŒ‚è½½é…ç½®æ–‡ä»¶ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æŒ‚è½½Linuxé€šç”¨å·¥å…·ç”¨æ¥æ£€æŸ¥å†…éƒ¨ç½‘å¡æœåŠ¡ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;consul æ˜¯æˆ‘ä»¬çš„æœåŠ¡å‘ç°å·¥å…·&lt;code&gt;docker run -it -d --name consul -p 8500:8500 -v /root/consulData:/data/ -v /bin/consul:/bin/consul ubuntu:14.04 /bin/consul agent -bind=0.0.0.0 -dev -ui -client=0.0.0.0&lt;/code&gt; å¤–éƒ¨è®¿é—®æ¥å£ä¸º8k5 /data/ ä¸ºconsul å­˜å‚¨çš„ä½ç½®ï¼Œ ç¬¬äºŒä¸ªæ˜¯æŒ‚è½½å‘½ä»¤è¿›å»ï¼Œ æ•´ä¸ªæœåŠ¡ä»¥agent çš„å½¢å¼è¿è¡Œï¼Œ ç»‘å®šå®¢æˆ·ç«¯ä»¥åŠæœåŠ¡å™¨ç«¯ä¸º0000ä¸ºæ‰€æœ‰ä½ç½®å‡å¯ä»¥è®¿é—®ã€‚-clientæœ€é‡è¦ä¸ç„¶åªèƒ½æœ¬åœ°è®¿é—®äº†ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;é€šç”¨APPè¿è¡Œæ–¹æ³•ï¼š&lt;code&gt;docker run -it -d --name prod-X -v /app:/aXXXpp --net=prod ubuntu:14.04 /app/XXXX.exe -flags&lt;/code&gt; åå­—å¾ˆé‡è¦prodä¸ºæœåŠ¡ç»„ï¼ŒXä¸ºæœåŠ¡åå­—ï¼Œä¸å¾®æœåŠ¡åå­—ä¸€è‡´ï¼Œ /appçš„ä½ç½®ä¸ºå°†è¦è¿è¡Œçš„appçš„å¯æ‰§è¡Œæ–‡ä»¶ &amp;ndash;net ä¸ºåŠ å…¥ç½‘ç»œçš„ç»„ï¼ˆæœåŠ¡ç½‘ç»œéš”ç¦»ï¼‰ æœ€åç›´æ¥è¿è¡Œå³å¯&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æµ‹è¯•ç”¨Postgres &lt;code&gt;docker run -it --name test-postgres -e POSTGRES_PASSWORD=wothing -v /app:/app -d postgres:9.5.1
&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;æå¤æµ‹è¯•ç”¨å®¹å™¨-å•containerè¿è¡Œå®¹å™¨å¯åŠ¨æ–¹æ³•:f4861149b557706634d70e0e95ed362c&#34;&gt;æå¤æµ‹è¯•ç”¨å®¹å™¨ï¼ˆå•Containerè¿è¡Œå®¹å™¨å¯åŠ¨æ–¹æ³•ï¼‰&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;docker run -it --name test-likun -d -p 446:22 -p 3002:3002 -v /app/likun:/app/likun -v /bin/consul:/bin/consul -e &#39;PUBKEY=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC9YXv4T7Q0295K5fM/uCd1HxLRZztoqXUGBI/QD2wxeq8Wg/MHWC1jqDwIbU7zCvK6E2CM8NtlJSCA0D27XjRGVCJY7bYHlPL1Ah+qUwp4+6RnrDhQQaJPREUSzMhYQJRu8Fh8wxwvqkSPDQv9FZlNoCMDcisxkyTA+t9Yevr4BFHKARMFAqWmymJGtplUrHlyQIT7MzR4cWHD4xXW71sw2E6zQYO7vUQ91Qhpz8DG3VH085sQ6v4Xr3noS+sSRDX537EAdyME0LYrPb5BgK58lYBgDtJvcCD0uRFSVkJg8raNLgqt1aEmgqkKjI8Co/t3tww3utJ3wm2GCrQxl8dD likun@wothing.com&#39; index.tenxcloud.com/philo/dmonit:1.1
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;å¦‚æœå®¹å™¨ç¼ºå°‘ç±»åº“çš„æƒ…å†µ-æ³¨æ„æˆ‘æ˜¯å¦‚ä½•æŠŠç±»åº“æŒ‚è½½è¿›å…¥docker-å®¹å™¨çš„:f4861149b557706634d70e0e95ed362c&#34;&gt;å¦‚æœå®¹å™¨ç¼ºå°‘ç±»åº“çš„æƒ…å†µ æ³¨æ„æˆ‘æ˜¯å¦‚ä½•æŠŠç±»åº“æŒ‚è½½è¿›å…¥docker å®¹å™¨çš„ã€‚&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;docker run -it --name kkk -d -p 445:22 -v /usr/lib/x86_64-linux-gnu/libapparmor.so.1:/usr/lib/x86_64-linux-gnu/libapparmor.so.1 -v /lib/x86_64-linux-gnu/libsystemd-journal.so.0.10.2:/lib/x86_64-linux-gnu/libsystemd-journal.so.0 -v /usr/bin/docker:/usr/local/bin/docker -v /var/run/docker.sock:/var/run/docker.sock -e &#39;PUBKEY=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDcTvSn5METOJUKXRr+Sa92eL2PRZlHb5tdKMublwgvHWaYNxJyXrxCARmBCy8VAo6rb/OeTsyuMWjZ7fVpxKc32ZkcBoIRL7YNkAonO8nHMSLvWUSKkwo7wfWubJhBQtDjvJ40WIcECrFkssFxbcl9YuUeZjdclmcylBkfwzdHJl7c3NtOjtCosN1RUDQZZJEJzKpSNcYtX/D1fPY9MovDWAeQ+xcLb6Gy5rnCTfyGgZDowyDpFNNe+j0a9G1zjlEww3GvOD/UUIf7hDaji+HjO8/sLfHjfAWWULStoEl/aUoofs93QVQFxCPOeYnZR/QL8MkfXQmwme7Nv7xBeqrt Li-jianying@lijianyings-MacBook-Pro.local&#39; index.tenxcloud.com/philo/dmonit:1.1
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        
        <item>
            <title>Docker ç½‘ç»œé…ç½®</title>
            <link>http://kooksee.github.io/blog/Docker%20%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/Docker%20%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/</guid>
            <description>

&lt;p&gt;é˜…è¯»ç›®å½•&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;æ‘˜è¦
Dockeré€‰é¡¹å¿«é€ŸæŒ‡å—
é…ç½®DNS
å®¹å™¨é—´é€šä¿¡
ä¸ºä¸»æœºç»‘å®šå®¹å™¨ç«¯å£
å®šåˆ¶ docker0
å»ºç«‹ä½ è‡ªå·±çš„æ¡¥æ¥ç½‘ç»œ
Docker å¦‚ä½•ä½¿å®¹å™¨è¿æ¥åˆ°ç½‘ç»œ
å·¥å…·å’Œå®ä¾‹
å»ºç«‹ç‚¹å¯¹ç‚¹è¿æ¥
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‘˜è¦&lt;/p&gt;

&lt;p&gt;å½“dockerå¯åŠ¨æ—¶ï¼Œå®ƒä¼šåœ¨å®¿ä¸»æœºå™¨ä¸Šåˆ›å»ºä¸€ä¸ªåä¸ºdocker0çš„è™šæ‹Ÿç½‘ç»œæ¥å£ã€‚å®ƒä¼šä»RFC 1918å®šä¹‰çš„ç§æœ‰åœ°å€ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªä¸»æœºä¸ç”¨çš„åœ°å€å’Œå­ç½‘æ©ç ï¼Œå¹¶å°†å®ƒåˆ†é…ç»™docker0ã€‚ä¾‹å¦‚å½“æˆ‘å¯åŠ¨dockerå‡ åˆ†é’Ÿåå®ƒé€‰æ‹©äº†172.17.42.1/16ï¼ä¸€ä¸ª16ä½çš„å­ç½‘æ©ç ä¸ºä¸»æœºå’Œå®ƒçš„å®¹å™¨æä¾›äº†65,534ä¸ªipåœ°å€ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;æ³¨æ„: æœ¬æ–‡è®¨è®ºäº†Dockerçš„é«˜çº§ç½‘ç»œé…ç½®å’Œé€‰é¡¹ã€‚é€šå¸¸ä½ ä¸ä¼šç”¨åˆ°è¿™äº›ã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹ä¸€ä¸ªè¾ƒä¸ºç®€å•çš„Dockerç½‘ç»œä»‹ç»å’Œå®¹å™¨æ¦‚å¿µä»‹ç»æ¥ç€æ‰‹ï¼Œè¯·å‚è§Dockerç”¨æˆ·æŒ‡å—.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†docker0å¹¶ä¸æ˜¯æ­£å¸¸çš„ç½‘ç»œæ¥å£ã€‚å®ƒåªæ˜¯ä¸€ä¸ªåœ¨ç»‘å®šåˆ°è¿™ä¸Šé¢çš„å…¶ä»–ç½‘å¡é—´è‡ªåŠ¨è½¬å‘æ•°æ®åŒ…çš„è™šæ‹Ÿä»¥å¤ªç½‘æ¡¥ã€‚å®ƒå¯ä»¥ä½¿å®¹å™¨ä¸ä¸»æœºç›¸äº’é€šä¿¡ã€‚æ¯æ¬¡ Dockeråˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œå®ƒå°±ä¼šåˆ›å»ºä¸€å¯¹å¯¹ç­‰æ¥å£(peer interface)ï¼Œç±»ä¼¼äºä¸€ä¸ªç®¡å­çš„ä¸¤ç«¯ï¼åœ¨è¿™è¾¹å¯ä»¥æ”¶åˆ°å¦ä¸€è¾¹å‘é€çš„æ•°æ®åŒ…ã€‚Dockerä¼šå°†å¯¹ç­‰æ¥å£ä¸­çš„ä¸€ä¸ªåšä¸ºeth0æ¥å£è¿æ¥åˆ°å®¹å™¨ä¸Šï¼Œå¹¶ä½¿ ç”¨ç±»ä¼¼äºvethAQI2QTè¿™æ ·çš„æƒŸä¸€åç§°æ¥æŒæœ‰å¦ä¸€ä¸ªï¼Œè¯¥åç§°å–å†³äºä¸»æœºçš„å‘½åç©ºé—´ã€‚é€šè¿‡å°†æ‰€æœ‰veth*æ¥å£ç»‘å®šåˆ°docker0æ¡¥æ¥ç½‘å¡ ä¸Šï¼ŒDockeråœ¨ä¸»æœºå’Œæ‰€æœ‰Dockerå®¹å™¨é—´åˆ›å»ºä¸€ä¸ªå…±äº«çš„è™šæ‹Ÿå­ç½‘ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡å…¶ä»–éƒ¨åˆ†å°†ä¼šè®²è§£ä½¿ç”¨Dockeré€‰é¡¹çš„æ‰€æœ‰æ–¹å¼ï¼Œå¹¶ä¸”ï¼åœ¨é«˜çº§æ¨¡å¼ä¸‹ï¼ä½¿ç”¨çº¯linuxç½‘çº¿é…ç½®å‘½ä»¤æ¥&lt;/p&gt;

&lt;p&gt;è°ƒæ•´ï¼Œè¡¥å……ï¼Œæˆ–å®Œå…¨æ›¿ä»£Dockerçš„é»˜è®¤ç½‘ç»œé…ç½®ã€‚
å›åˆ°é¡¶éƒ¨
Dockeré€‰é¡¹å¿«é€ŸæŒ‡å—&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä»½å…³äºDockerç½‘ç»œé…ç½®çš„å‘½ä»¤è¡Œé€‰é¡¹åˆ—è¡¨ï¼Œçœå»æ‚¨æŸ¥æ‰¾ç›¸å…³èµ„æ–™çš„éº»çƒ¦ã€‚
ä¸€äº›ç½‘ç»œé…ç½®çš„å‘½ä»¤è¡Œé€‰é¡¹åªèƒ½åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶æä¾›ç»™DockeræœåŠ¡å™¨ã€‚å¹¶ä¸”ä¸€æ—¦å¯åŠ¨èµ·æ¥å°±æ— æ³•æ”¹å˜ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€äº›ç½‘ç»œé…ç½®å‘½ä»¤é€‰é¡¹åªèƒ½åœ¨å¯åŠ¨æ—¶æä¾›ç»™DockeræœåŠ¡å™¨ï¼Œå¹¶ä¸”åœ¨è¿è¡Œä¸­ä¸èƒ½æ”¹å˜:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;-b BRIDGEæˆ–--bridge=BRIDGEâ€” see    å»ºç«‹è‡ªå·±çš„ç½‘æ¡¥

--bip=CIDRâ€” see    å®šåˆ¶docker0

-H SOCKET...æˆ–--host=SOCKET...â€”   å®ƒçœ‹èµ·æ¥åƒæ˜¯åœ¨è®¾ç½®å®¹å™¨çš„ç½‘ç»œï¼Œä½†å®é™…å´æ°æ°ç›¸åï¼šå®ƒå‘Šè¯‰DockeræœåŠ¡å™¨è¦æ¥æ”¶å‘½ä»¤çš„é€šé“ï¼Œä¾‹å¦‚â€œrun container&amp;quot;å’Œ&amp;quot;stop container&amp;quot;ã€‚

--icc=true|falseâ€” see    å®¹å™¨é—´é€šä¿¡

--ip=IP_ADDRESSâ€” see    ç»‘å®šå®¹å™¨ç«¯å£

--ip-forward=true|falseâ€” see    å®¹å™¨é—´é€šä¿¡

--iptables=true|falseâ€” see   å®¹å™¨é—´é€šä¿¡

--mtu=BYTESâ€” see    å®šåˆ¶docker0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ‰ä¸¤ä¸ªç½‘ç»œé…ç½®é€‰é¡¹å¯ä»¥åœ¨å¯åŠ¨æ—¶æˆ–è°ƒç”¨docker runæ—¶è®¾ç½®ã€‚å½“åœ¨å¯åŠ¨æ—¶è®¾ç½®å®ƒä¼šæˆä¸ºdocker runçš„é»˜è®¤å€¼:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;--dns=IP_ADDRESS...â€” see    é…ç½®DNS

--dns-search=DOMAIN...â€” see    é…ç½®DNS
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€åï¼Œä¸€äº›ç½‘ç»œé…ç½®é€‰é¡¹åªèƒ½åœ¨è°ƒç”¨docker runæ—¶æŒ‡å‡ºï¼Œå› ä¸ºå®ƒä»¬è¦ä¸ºæ¯ä¸ªå®¹å™¨åšç‰¹å®šçš„é…ç½®:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;-h HOSTNAMEæˆ–--hostname=HOSTNAMEâ€” see    é…ç½®DNS å’Œ  Dockerä¸å®¹å™¨è¿æ¥åŸç†

--link=CONTAINER_NAME:ALIASâ€” see   é…ç½®DNS and    å®¹å™¨é—´é€šä¿¡

--net=bridge|none|container:NAME_or_ID|hostâ€” see   Dockerä¸å®¹å™¨è¿æ¥åŸç†

-p SPECor--publish=SPECâ€” see    ç»‘å®šå®¹å™¨ç«¯å£

-Pæˆ–--publish-all=true|falseâ€” see    ç»‘å®šå®¹å™¨ç«¯å£
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¼šå¯¹ä»¥ä¸Šè¯é¢˜ä»æ˜“åˆ°éš¾åšå‡ºé€ä¸€è§£ç­”ã€‚
å›åˆ°é¡¶éƒ¨
é…ç½®DNS&lt;/p&gt;

&lt;p&gt;æ€æ ·ä¸ºDockeræä¾›çš„æ¯ä¸€ä¸ªå®¹å™¨è¿›è¡Œä¸»æœºåå’ŒDNSé…ç½®ï¼Œè€Œä¸å¿…å»ºç«‹è‡ªå®šä¹‰é•œåƒå¹¶å°†ä¸»æœºåå†™åˆ°é‡Œé¢ï¼Ÿå®ƒçš„è¯€çªæ˜¯è¦†ç›–ä¸‰ä¸ªè‡³å…³é‡è¦çš„åœ¨/etcä¸‹çš„å®¹å™¨å†…çš„è™šæ‹Ÿæ–‡ä»¶ï¼Œé‚£å‡ ä¸ªæ–‡ä»¶å¯ä»¥å†™å…¥æ–°çš„ä¿¡æ¯ã€‚ä½ å¯ä»¥åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œmountçœ‹åˆ°è¿™ä¸ªï¼š&lt;/p&gt;

&lt;p&gt;$$ mount&amp;hellip;/dev/disk/by-uuid/1fec&amp;hellip;ebdf on /etc/hostname type ext4 &amp;hellip;/dev/disk/by-uuid/1fec&amp;hellip;ebdf on /etc/hosts type ext4 &amp;hellip;tmpfs on /etc/resolv.conf type tmpfs &amp;hellip;&amp;hellip;&lt;/p&gt;

&lt;p&gt;è¿™æ ·çš„é…ç½®å…è®¸Dockerå»åšèªæ˜çš„äº‹æƒ…ï¼Œç±»ä¼¼äºå½“ä¸»æœºæ¥æ”¶åˆ°æ–°çš„DHCPé…ç½®ä¹‹åï¼Œä¿æŒresolv.confçš„æ•°æ®åˆ°æ‰€æœ‰çš„å®¹å™¨ä¸­ã€‚ Dockeræ€æ ·ç»´æŠ¤åœ¨å®¹å™¨å†…çš„è¿™äº›æ–‡ä»¶ä»Dockerçš„ä¸€ä¸ªç‰ˆæœ¬åˆ°ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„å…·ä½“ç»†èŠ‚ï¼Œä½ åº”è¯¥æŠ›å¼€è¿™äº›å•ç‹¬çš„æ–‡ä»¶æœ¬èº«å¹¶ä¸”ä½¿ç”¨ä¸‹é¢çš„Dockeré€‰é¡¹ ä»£æ›¿ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰å››ç§ä¸åŒçš„é€‰é¡¹ä¼šå½±å“å®¹å™¨å®ˆæŠ¤è¿›ç¨‹çš„æœåŠ¡åç§°ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;-h HOSTNAME æˆ–è€… &amp;ndash;hostname=HOSTNAME  &amp;ndash;è®¾ç½®å®¹å™¨çš„ä¸»æœºåï¼Œä»…æœ¬æœºå¯è§ã€‚è¿™ç§æ–¹å¼æ˜¯å†™åˆ°/etc/hostname ï¼Œä»¥åŠ/etc/hosts æ–‡ä»¶ä¸­ï¼Œä½œä¸ºå®¹å™¨ä¸»æœºIPçš„åˆ«åï¼Œå¹¶ä¸”å°†æ˜¾ç¤ºåœ¨å®¹å™¨çš„bashä¸­ã€‚ä¸è¿‡è¿™ç§æ–¹å¼è®¾ç½®çš„ä¸»æœºåå°†ä¸å®¹æ˜“è¢«å®¹å™¨ä¹‹å¤–å¯è§ã€‚è¿™å°†ä¸ä¼šå‡ºç°åœ¨ docker ps æˆ–è€… å…¶ä»–çš„å®¹å™¨çš„/etc/hosts æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&amp;ndash;link=CONTAINER_NAME:ALIAS  &amp;ndash;ä½¿ç”¨è¿™ä¸ªé€‰é¡¹å»runä¸€ä¸ªå®¹å™¨å°†åœ¨æ­¤å®¹å™¨çš„/etc/hostsæ–‡ä»¶ä¸­å¢åŠ ä¸€ä¸ªä¸»æœºåALIASï¼Œè¿™ä¸ªä¸»æœºåæ˜¯åä¸ºCONTAINER_NAME çš„å®¹å™¨çš„IPåœ°å€çš„åˆ«åã€‚è¿™ä½¿å¾—æ–°å®¹å™¨çš„å†…éƒ¨è¿›ç¨‹å¯ä»¥è®¿é—®ä¸»æœºåä¸ºALIASçš„å®¹å™¨è€Œä¸ç”¨çŸ¥é“å®ƒçš„IPã€‚&amp;ndash;link= å…³äºè¿™ä¸ªé€‰é¡¹çš„è¯¦ç»†è®¨è®ºè¯·çœ‹ï¼š    Communication between containers.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&amp;ndash;dns=IP_ADDRESS &amp;ndash;è®¾ç½®DNSæœåŠ¡å™¨çš„IPåœ°å€ï¼Œå†™å…¥åˆ°å®¹å™¨çš„/etc/resolv.confæ–‡ä»¶ä¸­ã€‚å½“å®¹å™¨ä¸­çš„è¿›ç¨‹å°è¯•è®¿é—®ä¸åœ¨/etc/hostsæ–‡ä»¶ä¸­çš„ä¸»æœºA æ—¶ï¼Œå®¹å™¨å°†ä»¥53ç«¯å£è¿æ¥åˆ°IP_ADDRESSè¿™ä¸ªDNSæœåŠ¡å™¨å»æœå¯»ä¸»æœºAçš„IPåœ°å€ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&amp;ndash;dns-search=DOMAIN &amp;ndash;è®¾ç½®DNSæœåŠ¡å™¨çš„æœç´¢åŸŸï¼Œä»¥é˜²å®¹å™¨å°è¯•è®¿é—®ä¸å®Œæ•´çš„ä¸»æœºåæ—¶ä»ä¸­æ£€ç´¢ç›¸åº”çš„IPã€‚è¿™æ˜¯å†™å…¥åˆ°å®¹å™¨çš„ /etc/resolv.confæ–‡ä»¶ä¸­çš„ã€‚å½“å®¹å™¨å°è¯•è®¿é—®ä¸»æœº hostï¼Œè€ŒDNSæœç´¢åŸŸè¢«è®¾ç½®ä¸º example.com ,é‚£ä¹ˆDNSå°†ä¸ä»…å»æŸ¥å¯»hostä¸»æœºçš„IPï¼Œè¿˜å»æŸ¥è¯¢host.example.comçš„ IPã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;åœ¨dockerä¸­ï¼Œå¦‚æœå¯åŠ¨å®¹å™¨æ—¶ç¼ºå°‘ä»¥ä¸Šæœ€åä¸¤ç§é€‰é¡¹è®¾ç½®æ—¶ï¼Œå°†ä½¿å¾—å®¹å™¨çš„/etc/resolv.confæ–‡ä»¶çœ‹èµ·æ¥å’Œå®¿ä¸»ä¸»æœºçš„/etc/resolv.confæ–‡ä»¶ä¸€è‡´ã€‚è¿™äº›é€‰é¡¹å°†ä¿®æ”¹é»˜è®¤çš„è®¾ç½®ã€‚
å›åˆ°é¡¶éƒ¨
å®¹å™¨é—´é€šä¿¡&lt;/p&gt;

&lt;p&gt;åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ä¸Šï¼Œå†³å®šä¸¤ä¸ªå®¹å™¨é—´çš„é€šä¿¡èƒ½å¦å¾—åˆ°æ§åˆ¶ï¼Œæœ‰ä»¥ä¸‹ä¸‰ä¸ªå› ç´ ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ç½‘ç»œæ‹“æ‰‘é€»è¾‘æ˜¯å¦è¿æ¥ä¸Šäº†å®¹å™¨çš„ç½‘ç»œæ¥å£ã€‚é»˜è®¤æƒ…å†µä¸‹Dockerå°†æŠŠæ‰€æœ‰å®¹å™¨ç»‘å®šåˆ°ä¸€ä¸ª singledocker0bridge,å¹¶ä¸ºä¸¤ä¸ªå®¹å™¨é—´çš„åŒ…ä¼ è¾“æä¾›è·¯å¾„ã€‚å‚è§æœ¬æ–‡æ¡£åç»­éƒ¨åˆ†---å…¶ä»–å¯èƒ½çš„æ‹“æ‰‘é€»è¾‘

ä¸»æœºæ˜¯å¦è¦å‘é€IPåŒ…ï¼Ÿè¿™ç”±ip_forwardç³»ç»Ÿå‚æ•°æ§åˆ¶ã€‚å¦‚æœè¿™ä¸ªå‚æ•°è®¾ä¸º1ï¼Œé‚£ä¹ˆæ•°æ®åŒ…åªèƒ½åœ¨å®¹å™¨é—´ä¼ è¾“ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè®© DockeræœåŠ¡å™¨ä½¿ç”¨å®ƒçš„é»˜è®¤è®¾ç½®  --ip-forward=true ,   Dockeråœ¨å¯åŠ¨çš„æ—¶å€™ä¼šæŠŠip_forwardsh.  è¦æ£€æŸ¥è®¾ç½®æˆ–æ‰‹åŠ¨è®¾ç½®å‚æ•°ï¼Œå¯ä»¥è¿™æ ·åšï¼š

# Usually not necessary: turning on forwarding,# on the host where your Docker server is running$ cat /proc/sys/net/ipv4/ip_forward0$ sudo echo 1 &amp;gt; /proc/sys/net/ipv4/ip_forward
$ cat /proc/sys/net/ipv4/ip_forward1

iptablesæ˜¯å¦å…è®¸ç‰¹æ®Šè¿æ¥?å¦‚æœä½ æŠŠè®¾ç½® --iptables=false,å½“å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶ï¼ŒDockerä¸ä¼šæ”¹å˜ä½ çš„ç³»ç»Ÿiptablesè§„åˆ™ã€‚å¦å¤–ï¼Œå¦‚æœä½ ä¿ç•™é»˜è®¤è®¾ç½®  --icc=trueï¼ŒDockeræœåŠ¡å™¨æˆ–å‘FORWARDé“¾æ·»åŠ ä¸€ä¸ªå¸¦æœ‰å…¨å±€ACCEPTç­–ç•¥çš„é»˜è®¤è§„åˆ™ã€‚å¦‚æœä¸ä¿ç•™é»˜è®¤è®¾ç½®ï¼Œç³»ç»Ÿä¼šæŠŠç­–ç•¥è®¾ä¸º DROP.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å‡ ä¹æ‰€æœ‰äººä½¿ç”¨dockeréƒ½å¸Œæœ›ip_forward æ˜¯æ‰“å¼€çš„ï¼Œè‡³å°‘ä½¿å®¹å™¨é—´çš„é€šè®¯æˆä¸ºå¯èƒ½ã€‚ä½†æ˜¯å¦åŒæ„ &amp;ndash;icc=true æˆ–è€…æ›´æ”¹ä¸º &amp;ndash;icc=false ä½¿å¾—iptables å¯ä»¥ä¿æŠ¤å®¹å™¨ä»¥åŠå®¿ä¸»ä¸»æœºä¸è¢«ä»»æ„åœ°ç«¯å£æ‰«æã€é¿å…è¢«å·²ç»è¢«æ¸—é€çš„å®¹å™¨æ‰€è®¿é—®ï¼Œè¿™æ˜¯ä¸€ä¸ªç­–ç•¥é—®é¢˜ã€‚ï¼ˆåœ¨ubuntuï¼Œæ˜¯ç¼–è¾‘/etc/default /dockeræ–‡ä»¶ä¸­çš„DOCKER_OPTSå‚æ•°ï¼Œç„¶åé‡å¯dockeræœåŠ¡ï¼‰&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ é€‰æ‹©æœ€å®‰å…¨çš„è®¾ç½® &amp;ndash;icc=false ï¼Œé‚£ä¹ˆå½“ä½ æƒ³è®©å®ƒä»¬å½¼æ­¤æä¾›æœåŠ¡çš„æ—¶å€™å¦‚ä½•è®©å®ƒä»¬ç›¸äº’é€šè®¯ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ç­”æ¡ˆæ˜¯ï¼šä½¿ç”¨å‰æ–‡æåˆ°çš„ &amp;ndash;link=CONTAINER_NAME:ALIAS é€‰é¡¹ã€‚å¦‚æœdockerå®ˆæŠ¤è¿›ç¨‹æ­£åœ¨ä»¥ &amp;ndash;icc=false å’Œ &amp;ndash;iptables=true å‚æ•°è¿è¡Œï¼Œå½“ä»¥é€‰é¡¹ &amp;ndash;link= æ‰§è¡Œ docker run å‘½ä»¤æ—¶ï¼ŒdockeræœåŠ¡å°†æ’å…¥ä¸€éƒ¨åˆ† iptables ACCEPT è§„åˆ™ä½¿å¾—æ–°å®¹å™¨å¯ä»¥è¿æ¥å…¶ä»–å®¹å™¨æ‰€æš´éœ²å‡ºæ¥çš„ç«¯å£ï¼ˆæ­¤ç«¯å£æŒ‡å‰æ–‡åœ¨ Dockerfile ä¸­æåˆ°çš„EXPOSEè¿™ä¸€è¡Œï¼‰ã€‚æ›´å¤šè¯¦ç»†æ–‡æ¡£ä»‹ç»è¯·çœ‹ï¼šlinking Docker containersã€‚&lt;/p&gt;

&lt;p&gt;æ³¨æ„: &amp;ndash;link é€‰é¡¹ä¸­çš„ CONTAINER_NAME çš„å€¼å¿…é¡»æ˜¯ dockerè‡ªåŠ¨åˆ†é…çš„å®¹å™¨åç§°ï¼Œæ¯”å¦‚ stupefied_pareï¼Œ æˆ–è€…æ˜¯åœ¨æ‰§è¡Œdocker run çš„æ—¶å€™ç”¨ &amp;ndash;name= æŒ‡å®šçš„å®¹å™¨åç§°.  è¿™ä¸èƒ½ä½¿ä¸€ä¸ªdockeræ— æ³•è¯†åˆ«çš„ä¸»æœºåã€‚&lt;/p&gt;

&lt;p&gt;ä½ å¯ä»¥åœ¨ä½ çš„Dockerä¸»æœºä¸Šè¿è¡Œiptableså‘½ä»¤ï¼Œæ¥è§‚å¯ŸFORWARDé“¾æ˜¯å¦æœ‰é»˜è®¤çš„ACCEPTæˆ–DROPç­–ç•¥&lt;/p&gt;

&lt;h1 id=&#34;when-icc-false-you-should-see-a-drop-rule-sudo-iptables-l-n-chain-forward-policy-accept-target-prot-opt-source-destination:b1927aed458c7b4d8f1e229af0616036&#34;&gt;When &amp;ndash;icc=false, you should see a DROP rule:$ sudo iptables -L -n&amp;hellip;Chain FORWARD (policy ACCEPT)target     prot opt source               destination&lt;/h1&gt;

&lt;p&gt;DROP       all  &amp;ndash;  0.0.0.0/0            0.0.0.0/0&amp;hellip;# When a &amp;ndash;link= has been created under &amp;ndash;icc=false,# you should see port-specific ACCEPT rules overriding# the subsequent DROP policy for all other packets:$ sudo iptables -L -n&amp;hellip;Chain FORWARD (policy ACCEPT)target     prot opt source               destination
ACCEPT     tcp  &amp;ndash;  172.17.0.2           172.17.0.3           tcp spt:80ACCEPT     tcp  &amp;ndash;  172.17.0.3           172.17.0.2           tcp dpt:80DROP       all  &amp;ndash;  0.0.0.0/0            0.0.0.0/0&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;æ³¨æ„: Dockerçš„iptablesè§„åˆ™å®Œå…¨æ˜¾ç¤ºäº†å®¹å™¨ç›¸äº’é—´çš„åŸå§‹IPåœ°å€ï¼Œæ‰€ä»¥ä¸€ä¸ªå®¹å™¨åˆ°å¦ä¸€ä¸ªå®¹å™¨çš„è¿æ¥ï¼Œéœ€è¦æ˜¾ç¤ºåœ°æ˜¾ç¤ºå‡ºç¬¬ä¸€ä¸ªå®¹å™¨çš„åŸå§‹IPåœ°å€ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å›åˆ°é¡¶éƒ¨
ä¸ºä¸»æœºç»‘å®šå®¹å™¨ç«¯å£&lt;/p&gt;

&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒDockerå®¹å™¨å¯ä»¥è¿æ¥åˆ°å¤–éƒ¨åŒºåŸŸï¼Œä½†å¤–éƒ¨åŒºåŸŸä¸èƒ½è¿æ¥åˆ°å®¹å™¨ã€‚åœ¨Dockerå¯åŠ¨æ—¶ï¼Œç”±äºå®ƒåœ¨ä¸»æœºä¸Šåˆ›å»ºäº†ä¸€ä¸ªiptablesä¼ªè£…è§„åˆ™ï¼Œä½¿å¾—æ¯ä¸€ä¸ªè¾“å‡ºè¿æ¥çœ‹èµ·æ¥éƒ½æ˜¯ç”±ä¸»æœºIPåœ°å€å»ºç«‹èµ·æ¥çš„ã€‚&lt;/p&gt;

&lt;h1 id=&#34;you-can-see-that-the-docker-server-creates-a-masquerade-rule-that-let-containers-connect-to-ip-addresses-in-the-outside-world-sudo-iptables-t-nat-l-n-chain-postrouting-policy-accept-target-prot-opt-source-destination:b1927aed458c7b4d8f1e229af0616036&#34;&gt;You can see that the Docker server creates a# masquerade rule that let containers connect# to IP addresses in the outside world:$ sudo iptables -t nat -L -n&amp;hellip;Chain POSTROUTING (policy ACCEPT)target     prot opt source               destination&lt;/h1&gt;

&lt;p&gt;MASQUERADE  all  &amp;ndash;  172.17.0.0/16       !172.17.0.0/16&amp;hellip;&lt;/p&gt;

&lt;p&gt;å½“è°ƒç”¨docker runçš„æ—¶å€™ï¼Œå¦‚æœä½ æƒ³è®©å®¹å™¨æ¥å—è¾“å…¥è¿æ¥ï¼Œä½ éœ€è¦æä¾›ç‰¹æ®Šé€‰é¡¹ã€‚è¿™äº›é€‰é¡¹çš„è¯¦ç»†è¯´æ˜åœ¨ Docker User Guide.  æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆï¼Œä½ å¯ä»¥æä¾› -P æˆ–è€… &amp;ndash;publish-all=true|false é€‰é¡¹å‚æ•°æ¥æ‰§è¡Œ docker run å‘½ä»¤ï¼Œè¿™å°†ä¼šè¯†åˆ«æ‰€æœ‰åœ¨dockerfileä¸­æš´éœ²çš„ç«¯å£ï¼Œå¹¶ä¸”éšæœºæ˜ å°„åˆ° 49000-49900 ä¹‹é—´çš„ä¸»æœºç«¯å£ã€‚è¿™çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¸ä¾¿ï¼Œå½“ä½ è¦å¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨æ—¶ä½ éœ€è¦çŸ¥é“é‚£ä¸ªä¸»æœºç«¯å£å·²ç»è¢«æ˜ å°„ã€‚&lt;/p&gt;

&lt;p&gt;æ›´æ–¹ä¾¿çš„æ“ä½œæ˜¯ä½¿ç”¨ -p SPEC æˆ–è€… &amp;ndash;publish=SPEC é€‰é¡¹ï¼Œè¿™ä¸¤ä¸ªé€‰é¡¹è®©ä½ æ˜ç¡®çš„æŒ‡å®šdockerå®¹å™¨çš„ç«¯å£æ˜ å°„åˆ°ä»»æ„çš„ä¸»æœºç«¯å£ä¸­ï¼Œä¸å±€é™äº49000-49900.&lt;/p&gt;

&lt;p&gt;æ— è®ºå¦‚ä½•ï¼Œä½ åº”è¯¥é€šè¿‡å®¡æŸ¥ä½ çš„NATè¡¨ï¼Œå»çœ‹çœ‹dockeråœ¨ä½ çš„ç½‘ç»œå åšäº†ä»€ä¹ˆã€‚&lt;/p&gt;

&lt;h1 id=&#34;what-your-nat-rules-might-look-like-when-docker:b1927aed458c7b4d8f1e229af0616036&#34;&gt;What your NAT rules might look like when Docker&lt;/h1&gt;

&lt;h1 id=&#34;is-finished-setting-up-a-p-forward:b1927aed458c7b4d8f1e229af0616036&#34;&gt;is finished setting up a -P forward:&lt;/h1&gt;

&lt;p&gt;$ iptables -t nat -L -n
&amp;hellip;Chain
DOCKER (2 references)
target     prot opt source               destination
DNAT       tcp  &amp;ndash;  0.0.0.0/0            0.0.0.0/0            tcp dpt:49153 to:172.17.0.2:80&lt;/p&gt;

&lt;h1 id=&#34;what-your-nat-rules-might-look-like-when-docker-1:b1927aed458c7b4d8f1e229af0616036&#34;&gt;What your NAT rules might look like when Docker&lt;/h1&gt;

&lt;h1 id=&#34;is-finished-setting-up-a-p-80-80-forward:b1927aed458c7b4d8f1e229af0616036&#34;&gt;is finished setting up a -p 80:80 forward:&lt;/h1&gt;

&lt;p&gt;Chain
DOCKER (2 references)
target     prot opt source               destination
DNAT       tcp  &amp;ndash;  0.0.0.0/0            0.0.0.0/0            tcp dpt:80 to:172.17.0.2:80&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œdockeræš´éœ²äº†è¿™äº›å®¹å™¨çš„ç«¯å£åˆ°é€šé…IPåœ°å€ï¼š0.0.0.0 ï¼Œè¿™ä¸ªé€šé…IPåœ°å€å¯ä»¥åŒ¹é…å®¿ä¸»ä¸»æœºä¸Šä»»æ„ä¸€ä¸ªå¯ä»¥è¿›å…¥çš„ç«¯å£ã€‚å¦‚æœä½ å¸Œæœ›æ›´å¤šçš„é™åˆ¶ï¼Œå¹¶ä¸”åªå…è®¸å®¹å™¨æœåŠ¡é€šè¿‡ç‰¹æ®Šçš„å®¿ä¸»ä¸»æœºçš„å¤–éƒ¨ç½‘ç»œæ¥å£æ¥ç›¸äº’è”ç³»ï¼Œ é‚£ä¹ˆä½ æœ‰ä¸¤ç§é€‰æ‹©ã€‚å½“ä½ æ‰§è¡Œ docker run å‘½ä»¤æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ -p IP:host_port:container_port æˆ–è€…  -p IP::port æ¥æ˜ç¡®åœ°ç»‘å®šå¤–éƒ¨æ¥å£ã€‚&lt;/p&gt;

&lt;p&gt;æˆ–è€…å¦‚æœä½ å¸Œæœ›dokceræ°¸è¿œè½¬å‘åˆ°ä¸€ä¸ªç‰¹æ®Šçš„IPåœ°å€ä¸Šï¼Œä½ å¯ä»¥ç¼–è¾‘ä½ çš„dockerç³»ç»Ÿè®¾ç½®æ–‡ä»¶ï¼ˆubuntuç³»ç»Ÿçš„è®¾ç½®æ–¹æ³•ä¸ºï¼šç¼–è¾‘ /etc/default/dockeræ–‡ä»¶ï¼Œæ”¹å†™DOCKER_OPTSå‚æ•°ï¼‰ï¼Œå¢åŠ é€‰é¡¹ &amp;ndash;ip=IP_ADDRESS ã€‚ä¿®æ”¹å®Œä¹‹åè®°å¾—é‡å¯ä½ çš„dockeræœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ å¸Œæœ›æ›´è¯¦ç»†çš„æŒ‡å¯¼ï¼Œè¯·å‚è€ƒï¼š Docker User Guide .
å›åˆ°é¡¶éƒ¨
å®šåˆ¶ docker0&lt;/p&gt;

&lt;p&gt;é»˜è®¤åœ°ï¼ŒdockeræœåŠ¡ä¼šåœ¨linuxå†…æ ¸æ–°å»ºä¸€ä¸ªç½‘ç»œæ¡¥æ¥docker0ï¼Œä½¿å¾—ç‰©ç†ä¸»æœºå’Œå…¶ä»–è™šæ‹Ÿç½‘ç»œæ¥å£ä¹‹é—´å¯ä»¥ä¼ é€’å‘é€æ•°æ®åŒ…ï¼Œå› æ­¤ï¼Œè¿™è¡¨ç°å¦‚ä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œã€‚&lt;/p&gt;

&lt;p&gt;docker0æœ‰ä¸€ä¸ªIPåœ°å€å’Œå­ç½‘æ©ç ï¼Œä½¿å¾—ç‰©ç†ä¸»æœºå¯ä»¥ä»å®¹å™¨çš„æ¡¥æ¥ç½‘ç»œæ¥æ”¶å’Œå‘é€æ•°æ®åŒ…ã€‚å¹¶ä¸”ç»™è¿™ä¸ªæ¡¥æ¥ç½‘ç»œä¸€ä¸ªMTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰æˆ–è€… è¯´ç½‘ç»œæ¥å£å…è®¸çš„æœ€å¤§åŒ…é•¿åº¦-ä¾‹å¦‚1,500 bytes æˆ–è€…ä»dockerçš„å®¿ä¸»ä¸»æœºä¸Šçš„ç½‘ç»œæ¥å£æ‹·è´çš„æ•°å€¼ã€‚åœ¨æœåŠ¡å¯åŠ¨çš„æ—¶å€™ä¸¤è€…éƒ½æ˜¯å¯é…ç½®çš„ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;--bip=CIDRâ€” ä¸ºdocker0æ¡¥æ¥ç½‘ç»œæä¾›ä¸€ä¸ªç‰¹æ®Šçš„IPåœ°å€å’Œä¸€ä¸ªå­ç½‘æ©ç , ä½¿ç”¨æ ‡å‡†çš„ CIDR è®°æ³•ä¾‹å¦‚192.168.1.5/24.

--mtu=BYTESâ€” ä»å†™docker0çš„æœ€å¤§æ•°æ®åŒ…é•¿åº¦ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ubuntuç³»ç»Ÿä¸Šï¼Œä½ å¯ä»¥å¢åŠ ä»¥ä¸Šçš„é…ç½®åˆ° /etc/default/docker æ–‡ä»¶ä¸­çš„DOCKER_OPTSå‚æ•°ä¸­ï¼Œç„¶åé‡å¯dockeræœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;å½“ä½ æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ­£å¸¸è¿è¡Œçš„å®¹å™¨æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä¸»æœºä¸Šè¿è¡Œbrct1å‘½ä»¤ï¼Œè§‚å¯Ÿinterfacesåˆ—çš„è¾“å‡ºï¼Œæ¥ç¡®å®šDockerå·²ç»å°†è¿™äº›å®¹å™¨æ­£ç¡®åœ°è¿æ¥åˆ°docker0ç½‘æ¡¥ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè¿æ¥äº†ä¸¤ä¸ªä¸åŒå®¹å™¨çš„ä¸»æœºï¼š&lt;/p&gt;

&lt;h1 id=&#34;display-bridge-info-sudo-brctl-show:b1927aed458c7b4d8f1e229af0616036&#34;&gt;Display bridge info$ sudo brctl show&lt;/h1&gt;

&lt;p&gt;bridge name     bridge id               STP enabled     interfaces
docker0         8000.3a1d7362b4ee       no              veth65f9
                                                        vethdda6&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ çš„Dockerä¸»æœºè¿˜æ²¡å®‰è£…brct1å‘½ä»¤ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨Ubuntuä¸Šè¿è¡Œsudo apt-get install bridge-utilsæ¥å®‰è£…å®ƒã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæ¯æ¬¡æ–°å»ºä¸€ä¸ªå®¹å™¨çš„æ—¶å€™éƒ½ä¼šç”¨åˆ°docker0 æ¡¥æ¥ç½‘ç»œã€‚æ¯æ¬¡åœ¨æ‰§è¡Œdocker runå‘½ä»¤æ–°å»ºä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œdockerä»å¯åˆ©ç”¨çš„æ¡¥æ¥ç½‘ç»œä¸­éšæœºé€‰æ‹©ä¸€ä¸ªæœªè¢«ä½¿ç”¨çš„IPåœ°å€ï¼Œä»¥åŠä½¿ç”¨æ¡¥æ¥ç½‘ç»œçš„å­ç½‘æ©ç ï¼Œç”¨æ¥é…ç½®å®¹å™¨ eth0ç½‘ç»œæ¥å£ã€‚dockerå®¿ä¸»ä¸»æœºçš„IPåœ°å€è¢«dockerå®¹å™¨ä½œä¸ºé»˜è®¤çš„ç½‘å…³ã€‚&lt;/p&gt;

&lt;h1 id=&#34;the-network-as-seen-from-a-container-sudo-docker-run-i-t-rm-base-bin-bash:b1927aed458c7b4d8f1e229af0616036&#34;&gt;The network, as seen from a container$ sudo docker run -i -t &amp;ndash;rm base /bin/bash&lt;/h1&gt;

&lt;p&gt;$$ ip addr show eth024: eth0: &lt;BROADCAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 32:6f:e0:35:57:91 brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.&lt;sup&gt;3&lt;/sup&gt;&amp;frasl;&lt;sub&gt;16&lt;/sub&gt; scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::306f:e0ff:fe35:&lt;sup&gt;5791&lt;/sup&gt;&amp;frasl;&lt;sub&gt;64&lt;/sub&gt; scope link
       valid_lft forever preferred_lft forever&lt;/p&gt;

&lt;p&gt;$$ ip routedefault via 172.17.42.1 dev eth0172.17.0.0/16 dev eth0  proto kernel  scope link  src 172.17.0.3$$ exit&lt;/p&gt;

&lt;p&gt;è®°ä½dockerçš„å®¿ä¸»ä¸»æœºæ— æ³•è½¬å‘dockerå®¹å™¨çš„æ•°æ®åŒ…åˆ°å› ç‰¹ç½‘ä¸Šï¼Œé™¤éå®ƒçš„ip_forward ç³»ç»Ÿè®¾ç½®ä¸º1ï¼Œè¯¦æƒ…è¯·çœ‹ï¼š Communication between containers ã€‚
å›åˆ°é¡¶éƒ¨
å»ºç«‹ä½ è‡ªå·±çš„æ¡¥æ¥ç½‘ç»œ&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ å¸Œæœ›å»ºç«‹å®Œæ•´çš„è‡ªå·±çš„æ¡¥æ¥ç½‘ç»œï¼Œä½ å¯ä»¥åœ¨å¯åŠ¨dockerä¹‹å‰ç”¨ -b BRIDGE æˆ–è€… &amp;ndash;bridge=BRIDGEé€‰é¡¹å‚æ•°é«˜æ•°dockerä½¿ç”¨ä½ è‡ªå·±çš„æ¡¥æ¥ç½‘ç»œã€‚å¦‚æœä½ å·²ç»ç”¨docker0å¯åŠ¨dockeräº†ï¼Œä½ éœ€è¦åœæ­¢dockeræœåŠ¡ç„¶åç§»é™¤docker0.&lt;/p&gt;

&lt;h1 id=&#34;stopping-docker-and-removing-docker0-sudo-service-docker-stop:b1927aed458c7b4d8f1e229af0616036&#34;&gt;Stopping Docker and removing docker0$ sudo service docker stop&lt;/h1&gt;

&lt;p&gt;$ sudo ip link set dev docker0 down
$ sudo brctl delbr docker0&lt;/p&gt;

&lt;p&gt;ç„¶åï¼Œåœ¨å¯åŠ¨dockeræœåŠ¡ä¹‹å‰ï¼Œæ–°å»ºä½ è‡ªå·±çš„æ¡¥æ¥ç½‘ç»œï¼Œå†™ä¸Šä½ æƒ³è¦çš„é…ç½®ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç®€å•çš„æ¡¥æ¥ç½‘ç»œï¼Œåˆšå¥½ç”¨è¿™äº›é€‰é¡¹æ¥å®šåšdocker0 ï¼Œè¿™åˆšå¥½è¶³å¤Ÿè¯´æ˜è¿™ä¸ªæŠ€æœ¯ã€‚&lt;/p&gt;

&lt;h1 id=&#34;create-our-own-bridge-sudo-brctl-addbr-bridge0:b1927aed458c7b4d8f1e229af0616036&#34;&gt;Create our own bridge$ sudo brctl addbr bridge0&lt;/h1&gt;

&lt;p&gt;$ sudo ip addr add 192.168.5.&lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;24&lt;/sub&gt; dev bridge0
$ sudo ip link set dev bridge0 up# Confirming that our bridge is up and running$ ip addr show bridge04: bridge0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state UP group default
    link/ether 66:38:d0:0d:76:18 brd ff:ff:ff:ff:ff:ff
    inet 192.168.5.&lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;24&lt;/sub&gt; scope global bridge0
       valid_lft forever preferred_lft forever# Tell Docker about it and restart (on Ubuntu)$ echo &amp;lsquo;DOCKER_OPTS=&amp;ldquo;-b=bridge0&amp;rdquo;&amp;rsquo; &amp;gt;&amp;gt; /etc/default/docker
$ sudo service docker start&lt;/p&gt;

&lt;p&gt;è¿è¡Œç»“æ„åº”è¯¥æ˜¯dockeræœåŠ¡æˆåŠŸå¯åŠ¨ï¼Œå·²ç»å‡†å¤‡å¥½ç»‘å®šå®¹å™¨åˆ°æ¡¥æ¥ç½‘ç»œä¸Šã€‚å½“æ ¸å®å¥½æ¡¥æ¥ç½‘ç»œçš„é…ç½®ä¹‹åï¼Œå°è¯•ç€æ–°å»ºä¸€ä¸ªå®¹å™¨ï¼Œä½ å°†çœ‹åˆ°å®¹å™¨çš„IPåœ°å€æ˜¯åœ¨ä½ çš„æ–°çš„æ¡¥æ¥ç½‘ç»œèŒƒå›´å†…çš„ï¼Œè¿™æ˜¯dockerè‡ªåŠ¨æ£€æµ‹çš„ã€‚&lt;/p&gt;

&lt;p&gt;æ­£å¦‚å‰æ–‡æ‰€è¿°ï¼Œå¯ä»¥ç”¨ brctl show å‘½ä»¤æŸ¥çœ‹ï¼Œæ–°å¢æˆ–è€…ç§»é™¤ç½‘ç»œæ¥å£ï¼Œå¯ä»¥åœ¨dockerå®¹å™¨ä¸­æ‰§è¡Œ ip addr å’Œ ip route å‘½ä»¤æŸ¥çœ‹IPåœ°å€æ˜¯å¦æ˜¯ä»ç½‘æ¡¥IPæ®µåˆ†é…çš„ï¼Œä»¥åŠdockerçš„å®¿ä¸»ä¸»æœºçš„IPæ˜¯å¦è¢«ä½œä¸ºé»˜è®¤ç½‘å…³ã€‚
å›åˆ°é¡¶éƒ¨
Docker å¦‚ä½•ä½¿å®¹å™¨è¿æ¥åˆ°ç½‘ç»œ&lt;/p&gt;

&lt;p&gt;dockeræ˜¯æ­£åœ¨å‘å±•ä¸­çš„ï¼Œå¹¶ä¼šæŒç»­æå‡ç½‘ç»œé…ç½®çš„é€»è¾‘ã€‚å½“å‰å‘½ä»¤è¡Œæ˜¯å¾ˆéš¾æ»¡è¶³dockeræ–°å»ºå®¹å™¨æ—¶æ‰€éœ€è¦çš„ç½‘ç»œé…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬å›é¡¾ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚&lt;/p&gt;

&lt;p&gt;é€šè®¯çš„æ—¶å€™ä½¿ç”¨ç½‘é™…åè®®ï¼ˆIPï¼‰ï¼Œä¸€ä¸ªæœºå™¨éœ€è¦è®¿é—®è‡³å°‘ä¸€ä¸ªç½‘ç»œæ¥å£ç”¨æ¥å‘é€å’Œæ¥æ”¶åŒ…ï¼Œè·¯ç”±è¡¨å®šä¹‰äº†é€šè¿‡æ¥å£å¯è¾¾IPåœ°å€èŒƒå›´ã€‚ç½‘ç»œæ¥å£ä¸ä¸€å®šéæ˜¯ ç‰©ç†è®¾å¤‡ã€‚å®é™…ä¸Šï¼Œåœ¨æ¯ä¸€ä¸ªLinuxæœºå™¨ï¼ˆå’Œæ¯ä¸ªDockerå®¹å™¨å†…éƒ¨ï¼‰çš„loå›ç¯æ¥å£éƒ½æ˜¯æœ‰æ•ˆçš„è€Œä¸”å®Œå…¨æ˜¯è™šæ‹Ÿçš„â€”â€”Linuxå†…æ ¸ç®€å•åœ°æ‹·è´å›ç¯ ï¼ˆæ•°æ®ï¼‰åŒ…ï¼Œç›´æ¥ä»å‘é€è€…çš„å†…å­˜æ”¾å…¥æ¥æ”¶è€…çš„å†…å­˜ã€‚&lt;/p&gt;

&lt;p&gt;Dockerä½¿ç”¨ç‰¹æ®Šçš„è™šæ‹Ÿæ¥å£è®©å®¹å™¨åœ¨ä¸»æœºé—´é€šè®¯â€”â€”æˆå¯¹çš„è™šæ‹Ÿæ¥å£è¢«å«åšâ€œpeersâ€ï¼Œå®ƒè¢«é“¾æ¥åˆ°ä¸»æœºå†…æ ¸çš„å†…éƒ¨ï¼Œå› æ­¤ï¼ˆæ•°æ®ï¼‰åŒ…èƒ½åœ¨ä»–ä»¬ä¹‹é—´ä¼ è¾“ã€‚ä»–ä»¬ç®€å•åˆ›å»ºï¼Œå¾…ä¼šå„¿æˆ‘ä»¬å°†ä¼šçœ‹åˆ°ã€‚&lt;/p&gt;

&lt;p&gt;Dockeré…ç½®å®¹å™¨çš„æ­¥éª¤æ˜¯ï¼š&lt;/p&gt;

&lt;p&gt;1.åˆ›å»ºä¸€å¯¹è™šæ‹Ÿæ¥å£&lt;/p&gt;

&lt;p&gt;2.åœ¨ä¸»Dockerä¸»æœºå†…éƒ¨ç»™å®ƒä¸€ä¸ªå”¯ä¸€çš„åç§°ï¼Œæ¯”å¦‚veth65f9ï¼Œç»‘å®šå®ƒåˆ°docker0æˆ–è€…Dockerä½¿ç”¨çš„ä»»ä½•ç½‘æ¡¥ä¸Š&lt;/p&gt;

&lt;p&gt;3.è®©å…¶ä»–çš„æ¥å£ç¿»å¢™è¿›å…¥æ–°çš„å®¹å™¨ï¼ˆå·²ç»æä¾›äº†loæ¥å£ï¼‰ï¼Œåœ¨å®¹å™¨çš„ç‹¬ç«‹å’Œå”¯ä¸€ç½‘ç»œæ¥å£å‘½åç©ºé—´å†…ï¼Œé‡æ–°å‘½åå®ƒä¸ºæ›´æ¼‚äº®çš„åå­—eth0ï¼Œåç§°ä¸è¦å’Œå…¶ä»–çš„ç‰©ç†æ¥å£å†²çªã€‚&lt;/p&gt;

&lt;p&gt;4.åœ¨ç½‘æ¡¥çš„ç½‘ç»œåœ°å€è®¿é—®å†…ç»™å®¹å™¨çš„eth0ä¸€ä¸ªæ–°çš„IPåœ°å€ï¼Œè®¾ç½®å®ƒçš„ç¼ºçœè·¯ç”±ä¸ºDockerä¸»æœºåœ¨ç½‘æ¡¥ä¸Šæ‹¥æœ‰çš„IPåœ°å€ã€‚&lt;/p&gt;

&lt;p&gt;è¿™äº›æ­¥éª¤ç»“æŸåï¼Œå®¹å™¨å°†ç«‹å³æ‹¥æœ‰ä¸€ä¸ªeth0ï¼ˆè™šæ‹Ÿï¼‰ç½‘å¡ï¼Œå¹¶ä¼šå‘ç°å®ƒè‡ªå·±å¯ä»¥å’Œå…¶ä»–çš„å®¹å™¨ä»¥åŠäº’è”ç½‘é€šè®¯ã€‚&lt;/p&gt;

&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨ &amp;ndash;net= è¿™ä¸ªé€‰é¡¹æ¥æ‰§è¡Œ docker run å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œè¿™ä¸ªé€‰é¡¹æœ‰ä¸€ä¸‹å¯é€‰å‚æ•°ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;--net=bridgeâ€” é»˜è®¤é€‰é¡¹ï¼Œç”¨ç½‘æ¡¥çš„æ–¹å¼æ¥è¿æ¥dockerå®¹å™¨ã€‚

--net=hostâ€” é«˜æ•°dockerè·³è¿‡é…ç½®å®¹å™¨çš„ç‹¬ç«‹ç½‘ç»œæ ˆã€‚æœ¬è´¨ä¸Šæ¥è¯´ï¼Œè¿™ä¸ªå‚æ•°å‘Šè¯‰dockerä¸å»æ‰“åŒ…å®¹å™¨çš„ç½‘ç»œå±‚ã€‚å½“ç„¶ï¼Œdocker å®¹å™¨çš„è¿›ç¨‹ä»ç„¶è¢«é™åˆ¶åœ¨å®ƒè‡ªå·±ç‹¬æœ‰çš„æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ä»¥åŠå…¶ä»–èµ„æºä¸­ã€‚ä¸€ä¸ªå¿«é€Ÿå‘½ä»¤ ip addr å°†åƒä½ å±•ç¤ºdockerçš„ç½‘ç»œï¼Œå®ƒæ˜¯å»ºç«‹åœ¨docker å®¿ä¸»ä¸»æœºä¸Šçš„ï¼Œæœ‰å®Œæ•´çš„æƒé™å»è®¿é—®å®¿ä¸»ä¸»æœºçš„ç½‘ç»œæ¥å£ã€‚æ³¨æ„è¿™ä¸æ„å‘³ç€dockerå®¹å™¨å¯ä»¥å»é‡æ–°é…ç½®å®¿ä¸»ä¸»æœºçš„ç½‘ç»œæ ˆï¼Œé‡æ–°é…ç½®æ˜¯éœ€è¦ --privaleged=true è¿™ä¸ªé€‰é¡¹å‚æ•°çš„ï¼Œä½†æ˜¯è¿™ä¸ªé€‰é¡¹å‚æ•°ä¼šè®©dockerå®¹å™¨æ‰“å¼€å¤§é‡çš„ç«¯å£ä»¥åŠå…¶ä»–çš„ç³»ç»Ÿçš„è¶…çº§ç®¡ç†æƒé™çš„è¿›ç¨‹ã€‚è¿™ä¹Ÿä¼šå…è®¸å®¹å™¨å»è®¿é—®å®¿ä¸»ä¸»æœºçš„ç½‘ç»œæœåŠ¡ï¼Œæ¯” å¦‚ D-busã€‚è¿™ä¼šä½¿dockerå®¹å™¨é‡Œçš„è¿›ç¨‹æœ‰æœ‰æƒé™å»åšä¸€äº›æ„æƒ³ä¸åˆ°çš„äº‹ï¼Œæ¯”å¦‚é‡å¯ä½ çš„å®¿ä¸»ä¸»æœºã€‚æ‰€ä»¥è¦è°¨æ…ä½¿ç”¨è¿™ä¸ªé€‰é¡¹å‚æ•°ã€‚

--net=container:NAME_or_IDâ€” å‘Šè¯‰dockerè®©è¿™ä¸ªæ–°å»ºçš„å®¹å™¨ä½¿ç”¨å·²æœ‰å®¹å™¨çš„ç½‘ç»œé…ç½®ã€‚è¿™ä¸ªæ–°å»ºçš„å®¹å™¨å°†é…ç½®æ–°çš„è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿå’Œè¿›ç¨‹åˆ—è¡¨ä»¥åŠå…¶ä»–èµ„æºé™åˆ¶ï¼Œä½†æ˜¯å°†å…±äº«è¿™ä¸ªæŒ‡å®šçš„å®¹ å™¨çš„ç½‘ç»œIPåœ°å€ä»¥åŠç«¯å£å·ï¼Œä½¿å¾—è¿™ä¸¤ä¸ªå®¹å™¨å¯ä»¥é€šè¿‡ loopbackæ¥å£ç›¸äº’è®¿é—®ã€‚

--net=noneâ€” å‘Šè¯‰dockerä¸ºæ–°å»ºçš„å®¹å™¨å»ºç«‹ä¸€ä¸ªç½‘ç»œæ ˆï¼Œä½†ä¸å¯¹è¿™ä¸ªç½‘ç»œæ ˆè¿›è¡Œä»»ä½•é…ç½®ï¼Œåœ¨è¿™ä¸ªæ–‡æ¡£çš„æœ€åå°†ä»‹ç»å¦‚ä½•è®©ä½ å»å»ºç«‹è‡ªå®šä¹‰çš„ç½‘ç»œé…ç½®ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å»äº†è§£ä»¥ä¸‹è¿™ä¸€æ­¥æ˜¯éå¸¸å¿…è¦çš„ï¼Œå¦‚æœä½ åœ¨å»ºç«‹å®¹å™¨çš„æ—¶å€™ä½¿ç”¨ &amp;ndash;net=none  è¿™ä¸ªé€‰é¡¹å‚æ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å‘½ä»¤å»å»é…ç½®è‡ªå®šä¹‰ç½‘ç»œï¼Œå°±å¥½åƒä½ è®©dockerå®Œå…¨å»è‡ªå·±é…ç½®ä¸€æ ·ã€‚&lt;/p&gt;

&lt;h1 id=&#34;at-one-shell-start-a-container-and-leave-its-shell-idle-and-running-sudo-docker-run-i-t-rm-net-none-base-bin-bash:b1927aed458c7b4d8f1e229af0616036&#34;&gt;At one shell, start a container and# leave its shell idle and running$ sudo docker run -i -t &amp;ndash;rm &amp;ndash;net=none base /bin/bash&lt;/h1&gt;

&lt;p&gt;root@63f36fc01b5f:/#&lt;/p&gt;

&lt;h1 id=&#34;at-another-shell-learn-the-container-process-id:b1927aed458c7b4d8f1e229af0616036&#34;&gt;At another shell, learn the container process ID&lt;/h1&gt;

&lt;h1 id=&#34;and-create-its-namespace-entry-in-var-run-netns-for-the-ip-netns-command-we-will-be-using-below-sudo-docker-inspect-f-state-pid-63f36fc01b5f2778-pid-2778-sudo-mkdir-p-var-run-netns:b1927aed458c7b4d8f1e229af0616036&#34;&gt;and create its namespace entry in /var/run/netns/# for the &amp;ldquo;ip netns&amp;rdquo; command we will be using below$ sudo docker inspect -f &amp;lsquo;{{.State.Pid}}&amp;rsquo; 63f36fc01b5f2778$ pid=2778$ sudo mkdir -p /var/run/netns&lt;/h1&gt;

&lt;p&gt;$ sudo ln -s /proc/$pid/ns/net /var/run/netns/$pid# Check the bridge&amp;rsquo;s IP address and netmask$ ip addr show docker021: docker0: &amp;hellip;inet 172.17.42.&lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;16&lt;/sub&gt; scope global docker0&amp;hellip;# Create a pair of &amp;ldquo;peer&amp;rdquo; interfaces A and B,# bind the A end to the bridge, and bring it up$ sudo ip link add A type veth peer name B
$ sudo brctl addif docker0 A
$ sudo ip link set A up# Place B inside the container&amp;rsquo;s network namespace,# rename to eth0, and activate it with a free IP$ sudo ip link set B netns $pid
$ sudo ip netns exec $pid ip link set dev B name eth0
$ sudo ip netns exec $pid ip link set eth0 up
$ sudo ip netns exec $pid ip addr add 172.17.42.&lt;sup&gt;99&lt;/sup&gt;&amp;frasl;&lt;sub&gt;16&lt;/sub&gt; dev eth0
$ sudo ip netns exec $pid ip route add default via 172.17.42.1&lt;/p&gt;

&lt;p&gt;åˆ°è¿™ä¸€æ­¥ä½ çš„å®¹å™¨åº”è¯¥å¯ä»¥æ­£å¸¸è¿è¡Œç½‘ç»œæ“ä½œäº†ã€‚&lt;/p&gt;

&lt;p&gt;å½“ä½ æœ€åé€€å‡ºshellä»¥åŠæ¸…ç†æ‰è¿™ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œè¿™ä¸ªå®¹å™¨çš„è™šæ‹Ÿç½‘ç»œ eth0 å°†åœ¨ç½‘ç»œæ¥å£A è¢«æ¸…é™¤åè¢«æ¶ˆé™¤ï¼Œä¹Ÿä¼šè‡ªåŠ¨åœ¨ç½‘æ¡¥ docker0 ä¸Šé”€æ¯ã€‚æ‰€ä»¥ä¸ç”¨ä½ æ‰§è¡Œå…¶ä»–çš„å‘½ä»¤ï¼Œæ‰€æœ‰çš„ä¸œè¥¿å°†è¢«æ¸…ç†ã€‚å½“ç„¶ï¼Œæ˜¯å‡ ä¹æ‰€æœ‰çš„ä¸œè¥¿ï¼š&lt;/p&gt;

&lt;h1 id=&#34;clean-up-dangling-symlinks-in-var-run-netnsfind-l-var-run-netns-type-l-delete:b1927aed458c7b4d8f1e229af0616036&#34;&gt;Clean up dangling symlinks in /var/run/netnsfind -L /var/run/netns -type l -delete&lt;/h1&gt;

&lt;p&gt;è¿˜è¦æ³¨æ„ä¸Šé¢çš„è„šæœ¬ä½¿ç”¨äº†ç°ä»£çš„ipå‘½ä»¤è¡Œæ›¿ä»£æ—§çš„å¼ƒç”¨çš„å°è£…ï¼Œç±»ä¼¼ipconfigå’Œrouteï¼Œè¿™äº›è€çš„å‘½ä»¤è¡Œè¿˜æ˜¯ä¼šä¸€ç›´å‘†åœ¨æˆ‘ä»¬çš„å®¹å™¨å†…éƒ¨å·¥ä½œã€‚å¦‚æœä½ å¾ˆå¿™ç¢Œçš„è¯ï¼Œip addrå‘½ä»¤è¡Œä¹Ÿå¯ä»¥åªé”®å…¥ip aã€‚&lt;/p&gt;

&lt;p&gt;æ€»ä¹‹ï¼Œæ³¨æ„è¿™ä¸ªip netns execé‡è¦çš„å‘½ä»¤è¡Œï¼Œå®ƒè®©æˆ‘ä»¬ä»¥rootç”¨æˆ·è¿›å…¥å†…éƒ¨å¹¶é…ç½®ä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´ã€‚å¦‚æœåœ¨å®¹å™¨å†…éƒ¨è¿è¡Œï¼Œç±»ä¼¼çš„å‘½ä»¤è¡Œå¯èƒ½ä¸ä¼šå·¥ä½œï¼Œå› ä¸ºå®‰å…¨å®¹å™¨åŒ–çš„éƒ¨åˆ†æ˜¯ Dockerå‰¥ç¦»å®¹å™¨çš„å¤„ç†è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹è¦æ­£ç¡®åœ°é…ç½®è‡ªå·±çš„ç½‘ç»œã€‚ä½¿ç”¨ip netns execå¯ä»¥è®©æˆ‘ä»¬å®Œæˆé…ç½®ï¼Œè¿˜é¿å…äº†è¿è¡Œå®¹å™¨è‡ªèº«&amp;ndash;privileged=trueçš„å±é™©æ­¥éª¤ã€‚
å›åˆ°é¡¶éƒ¨
å·¥å…·å’Œå®ä¾‹&lt;/p&gt;

&lt;p&gt;åœ¨æŠŠè‡ªå®šä¹‰ç½‘ç»œæ‹“æ‰‘é€»è¾‘åˆ†ç±»æˆä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ä¹‹å‰ï¼Œä½ åº”è¯¥å…³æ³¨ä¸€äº›å¤–éƒ¨å·¥å…·ç›’å…³äºé…ç½®çš„å®ä¾‹ã€‚ä¸‹é¢å°±æœ‰ä¸¤ä¸ªä¾‹å­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;J&amp;amp;eacute;r&amp;amp;ocirc;me Petazzoni åˆ›å»ºäº†ä¸€ä¸ªpipeworkçš„shellè„šæœ¬ï¼Œå¸®åŠ©ä½ åœ¨å¤æ‚åœºæ™¯ä¸‹å»ºç«‹å®¹å™¨é—´è¿æ¥:    https://github.com/jpetazzo/pipework

Brandon Rhodes ä¸ºä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„Pythonç½‘ç»œç¼–ç¨‹åŸºé‡‘ä¼šåˆ›å»ºäº†æ•´ä¸ªçš„ç½‘ç»œæ‹“æ‰‘é€»è¾‘ï¼ŒåŒ…æ‹¬è·¯ç”±å™¨NAT&#39;dé˜²ç«å¢™ï¼Œå’Œæä¾›HTTP,SMTP,POP,IMAP,Telnet,SSH,FTPçš„æœåŠ¡å™¨:    https://github.com/brandon-rhodes/fopnp/tree/m/playground
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸¤ä¸ªå·¥å…·éƒ½ä½¿ç”¨ç½‘ç»œå‘½ä»¤å¹¶å’Œä¹‹å‰è§åˆ°çš„ç‰ˆæœ¬å¾ˆç›¸ä¼¼ï¼Œåœ¨ä¸‹é¢ç« èŠ‚ä¼šçœ‹åˆ°ã€‚
å›åˆ°é¡¶éƒ¨
å»ºç«‹ç‚¹å¯¹ç‚¹è¿æ¥&lt;/p&gt;

&lt;p&gt;ç¼ºçœæƒ…å†µä¸‹, Dockeré€šè¿‡docker0å°†æ‰€æœ‰çš„å®¹å™¨æ·»åŠ åˆ°è™šæ‹Ÿå­ç½‘ä¸­ã€‚ä½ èƒ½å¤ŸæŒ‰ç…§Building your own bridgeä¸­çš„æ–¹æ³•åˆ›å»ºä½ è‡ªå·±çš„æ¡¥è®©å®¹å™¨è¿æ¥åˆ°ä¸åŒçš„è™šæ‹Ÿå­ç½‘ã€‚å¯åŠ¨å®¹å™¨æ—¶ä½¿ç”¨å‘½ä»¤docker run &amp;ndash;net=noneï¼Œç„¶åä½¿ç”¨shellå‘½ä»¤æ·»åŠ å®¹å™¨åˆ°ä½ è‡ªå·±çš„æ¡¥ï¼Œæ–¹æ³•è§How Docker networks a containerã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯æœ‰æ—¶ä½ æƒ³è®©ä¸¤ä¸ªç‰¹åˆ«çš„å®¹å™¨èƒ½å¤Ÿç›´æ¥é€šè®¯ï¼Œä¸ç”¨ç»‘å®šåˆ°ä¸»æœºçš„ä»¥å¤ªç½‘æ¡¥ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;è§£å†³æ–¹æ¡ˆæ˜¯ç®€å•çš„ã€‚åˆ›å»ºä¸€å¯¹å¯¹ç­‰æ¥å£ï¼Œå°†ä»–ä»¬æ”¾åˆ°å®¹å™¨ä¸­ï¼Œå¹¶å°†å…¶é…ç½®ä¸ºç»å…¸çš„ç‚¹å¯¹ç‚¹é“¾æ¥ã€‚ä¸¤ä¸ªå®¹å™¨å°±èƒ½å¤Ÿç›´æ¥é€šè®¯äº†ï¼ˆå½“ç„¶è¦å‘Šè¯‰æ¯ä¸ªå®¹å™¨å¯¹æ–¹çš„IPåœ°å€ï¼‰ã€‚æ‚¨å¯èƒ½ä¼šè°ƒæ•´åœ¨ä¸Šä¸€èŠ‚çš„æŒ‡ç¤ºå»è¿™æ ·çš„äº‹æƒ…ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Start up two containers in two terminal windows$ sudo docker run -i -t --rm --net=none base /bin/bash
root@1f1f4c1f931a:/#

$ sudo docker run -i -t --rm --net=none base /bin/bash
root@12e343489d2f:/#

# Learn the container process IDs
# and create their namespace entries

$ sudo docker inspect -f &#39;{{.State.Pid}}&#39; 1f1f4c1f931a
2989
$ sudo docker inspect -f &#39;{{.State.Pid}}&#39; 12e343489d2f
3004
$ sudo mkdir -p /var/run/netns
$ sudo ln -s /proc/2989/ns/net /var/run/netns/2989$ sudo ln -s /proc/3004/ns/net /var/run/netns/3004# Create the &amp;quot;peer&amp;quot; interfaces and hand them out$ sudo ip link add A type veth peer name B

$ sudo ip link set A netns 2989$ sudo ip netns exec 2989 ip addr add 10.1.1.1/32 dev A
$ sudo ip netns exec 2989 ip link set A up
$ sudo ip netns exec 2989 ip route add 10.1.1.2/32 dev A

$ sudo ip link set B netns 3004$ sudo ip netns exec 3004 ip addr add 10.1.1.2/32 dev B
$ sudo ip netns exec 3004 ip link set B up
$ sudo ip netns exec 3004 ip route add 10.1.1.1/32 dev B
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸¤ä¸ªå®¹å™¨åº”è¯¥å¯ä»¥ç›¸äº’pingé€šä»¥ç¡®å®šè¿æ¥æˆåŠŸã€‚ç‚¹å¯¹ç‚¹é“¾æ¥ä¸ä¾èµ–äºå­ç½‘æˆ–å­ç½‘æ©ç ï¼Œä½†æ˜¯ip routeéœ€è¦ç¡®è®¤ä¸€äº›å…¶ä»–çš„å•ä¸€IPåœ°å€æ˜¯è¿æ¥åˆ°äº†ç‰¹å®šçš„ç½‘ç»œæ¥å£ã€‚&lt;/p&gt;

&lt;p&gt;è¯·æ³¨æ„ç‚¹å¯¹ç‚¹é“¾æ¥å¯ä»¥å®‰å…¨çš„å’Œå…¶ä»–ç±»å‹çš„ç½‘ç»œè¿æ¥æ··åˆä½¿ç”¨ã€‚å¦‚æœä½ æƒ³ç”¨ç‚¹å¯¹ç‚¹é“¾æ¥æ›¿æ¢å®¹å™¨çš„æ­£å¸¸ç½‘ç»œè¿æ¥ï¼Œå¯åŠ¨çš„æ—¶å€™ï¼Œä¸éœ€è¦å¸¦å‚æ•°&amp;ndash;net=noneã€‚&lt;/p&gt;

&lt;p&gt;åœ¨Dockerä¸»æœºå’Œå®¹å™¨ä¹‹é—´åˆ›å»ºç‚¹å¯¹ç‚¹é“¾æ¥æ˜¯è¿™ä¸ªæ¨¡æ¿æœ€ç»ˆçš„æ’åˆ—æ–¹å¼ï¼Œå®ƒå…è®¸ä¸»æœºå’Œæœ‰å•ä¸€IPåœ°å€çš„å®¹å™¨é€šè®¯ã€‚é™¤éä½ æœ‰å¾ˆç‰¹åˆ«çš„ç½‘ç»œéœ€æ±‚ï¼Œè®©ä½ å°è¯•ä½¿ç”¨è¿™æ ·çš„è§£å†³æ–¹æ¡ˆï¼Œæ­£å¦‚æˆ‘ä»¬å‰é¢æ¢è®¨çš„ï¼Œä½¿ç”¨&amp;ndash;icc=falseé”å®šè·¨å®¹å™¨çš„é€šè®¯æ˜¯æ›´å¥½çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
</description>
        </item>
        
        <item>
            <title>DockeræŒç»­äº¤ä»˜è¯´æ˜</title>
            <link>http://kooksee.github.io/blog/Docker%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E8%AF%B4%E6%98%8E/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/Docker%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E8%AF%B4%E6%98%8E/</guid>
            <description>

&lt;h2 id=&#34;ci:47696ca6b8b5a6acc0634b15cdb2236a&#34;&gt;CI&lt;/h2&gt;

&lt;p&gt;ç›®å‰ciæ˜¯é€šè¿‡golangç¯å¢ƒåšäº†ä¸€ä¸ªbuilder Container
æ–¹æ³•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker clone https://github.com/wothing/17mei.git
cd 17mei
make
cd gateway/test
go test ......  -dh prod-postgres.prod -du postgres -dpwd wothing -dn wothing -api http://prod-gw.prod:3001/v1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ³¨æ„æœ€åtestå‘½ä»¤ï¼š éœ€è¦æŒ‡å®šæ•°æ®åº“ä½ç½®ä»¥åŠgatewayçš„ä½ç½®&lt;/p&gt;

&lt;h2 id=&#34;æ•°æ®åº“é‡ç½®:47696ca6b8b5a6acc0634b15cdb2236a&#34;&gt;æ•°æ®åº“é‡ç½®ï¼š&lt;/h2&gt;

&lt;h3 id=&#34;pgsql-å…å¯†ç é…ç½®:47696ca6b8b5a6acc0634b15cdb2236a&#34;&gt;pgsql å…å¯†ç é…ç½®&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;echo &amp;quot;prod-postgres.prod:5432:wothing:postgres:wothing&amp;quot;  &amp;gt; ~/.pgpass
chmod 0600 ~/.pgpass
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;é‡ç½®è„šæœ¬æ‰§è¡Œ:47696ca6b8b5a6acc0634b15cdb2236a&#34;&gt;é‡ç½®è„šæœ¬æ‰§è¡Œï¼š&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;cd /go/src/github.com/wothing/17mei/sql
psql -h prod-postgres.prod -U postgres  -d wothing -f user.sql
psql -h prod-postgres.prod -U postgres  -d wothing -f user_example.sql
psql -h prod-postgres.prod -U postgres  -d wothing -f activity.sql
psql -h prod-postgres.prod -U postgres  -d wothing -f activity_example.sql
psql -h prod-postgres.prod -U postgres  -d wothing -f diary.sql
psql -h prod-postgres.prod -U postgres  -d wothing -f diary_samples.sql
psql -h prod-postgres.prod -U postgres  -d wothing -f other.sql
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;generate-mei-id:47696ca6b8b5a6acc0634b15cdb2236a&#34;&gt;Generate Mei id&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;/go/src/github.com/wothing/17mei/user/meigen
go run meigen.go  -dh prod-postgres.prod -du postgres -dpwd wothing -dn wothing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;çœ‹åˆ°ç”¨äº†å¤šå°‘æ¯«ç§’è¾“å‡ºä¹‹åé©¬ä¸Šåœä¸‹æ¥å¤§æ¦‚å°±èƒ½æœ‰ä¸€åƒä¸ªäº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ›´æ–°æœåŠ¡çš„å®¹å™¨è¿è¡Œ:47696ca6b8b5a6acc0634b15cdb2236a&#34;&gt;æ›´æ–°æœåŠ¡çš„å®¹å™¨è¿è¡Œ&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;docker restart prod-diary prod-verification prod-activity prod-push prod-other prod-mediastore prod-gw prod-user&lt;/code&gt;&lt;/p&gt;
</description>
        </item>
        
        <item>
            <title>Github å›¢é˜Ÿåä½œ</title>
            <link>http://kooksee.github.io/blog/Github%20%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/Github%20%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C/</guid>
            <description>

&lt;h1 id=&#34;github-å›¢é˜Ÿåä½œ:4a8ac693e47e69c7b976131245779879&#34;&gt;Github å›¢é˜Ÿåä½œ&lt;/h1&gt;

&lt;p&gt;Git å†æ¬¡å°† Unix è®¾è®¡å“²å­¦å‘æŒ¥åˆ°æè‡´ï¼Œå°¤å…¶æ˜¯ KISS åŸåˆ™ï¼ˆKeep It Simple and Stupidï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å®ƒçš„äººï¼ˆä¸ä»…æ˜¯ç¼–ç¨‹äººå‘˜ï¼‰å¯¹å®ƒçš„è®¤è¯†ï¼Œå¯èƒ½æ˜¯è¿™æ ·ï¼šä¸å…¶è¯´ Git æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œä¸å¦‚è¯´ Git æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚æ­£å¼è¿™æ ·çœ‹ä¼¼ç®€å•ç²—æš´çš„è®¾è®¡è®© Git ä»ä¼—å¤šç‰ˆæœ¬æ§åˆ¶å·¥å…·ä¸­è„±é¢–è€Œå‡ºã€‚&lt;/p&gt;

&lt;p&gt;Git ç›¸æ¯”å…¶ä»–ç‰ˆæœ¬æ§åˆ¶å·¥å…·æœ‰ä¼—å¤šä¼˜åŠ¿ã€‚å¦‚åˆ†å¸ƒå¼ï¼Œä»»ä½•ä¸€ä¸ªä»“åº“éƒ½æ˜¯ä¸€å„å®Œæ•´çš„é•œåƒã€‚åˆå¦‚åˆ›å»ºåˆ é™¤åˆ†æ”¯ï¼ŒGit ä»¥å¾ˆä½çš„ä»£ä»·è®©ä½¿ç”¨å®ƒçš„äººå¯ä»¥éšæ„åœ°å¿«é€Ÿåˆ›å»ºåˆ é™¤åˆ†æ”¯ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡å°± Git çš„åˆ†å¸ƒå¼å’Œåˆ†æ”¯ç‰¹æ€§ï¼Œç»“åˆ Github å¼ºå¤§çš„æºç åˆ†äº«è´¡çŒ®å¹³å°ï¼Œæ¢è®¨ä¸€ç§ç®€å•æœ‰æ•ˆçš„ Github å›¢é˜Ÿåä½œæµç¨‹ï¼Œå®ç°å¤šç¯å¢ƒå‘å¸ƒã€Pull Request çš„æµç¨‹åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæµç¨‹æœ‰å¦‚ä¸‹ä¸¤ä¸ªåŸåˆ™ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ä»»ä½•ç¨‹åºéƒ½å¯ä»¥è¿½è¸ªåˆ°å¯¹åº”çš„æºç ï¼›&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰ä»£ç éƒ½å¿…é¡»ç»è¿‡ä¸¥æ ¼ä»£ç èµ°æŸ¥ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;æ¯ä¸ªç¯å¢ƒå¯¹åº”ä¸€ä¸ªæºç åˆ†æ”¯:4a8ac693e47e69c7b976131245779879&#34;&gt;æ¯ä¸ªç¯å¢ƒå¯¹åº”ä¸€ä¸ªæºç åˆ†æ”¯&lt;/h2&gt;

&lt;p&gt;é€šå¸¸ Git ä»“åº“ä¼šæœ‰ä¸€ä¸ª master åˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯çš„ä»£ç åº”è¯¥ &lt;strong&gt;ä¸€ç›´&lt;/strong&gt; æ˜¯æœ€æ–°ç¨³å®šç‰ˆçš„ï¼Œ &lt;strong&gt;æ°¸è¿œ&lt;/strong&gt; å¯¹ç€åº”ç”Ÿäº§ç¯å¢ƒå‘å¸ƒçš„ç‰ˆæœ¬ï¼Œæ‰€æœ‰ç”Ÿäº§ç¯å¢ƒåº”ç”¨éƒ½è¦ä»è¿™ä¸ªåˆ†æ”¯ä¸Šå‘å¸ƒï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸åº”è¯¥åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šåšå¼€å‘ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Source branch  ===&amp;gt;   Deploy environment
master                Production
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª develop åˆ†æ”¯ï¼Œæ‰€æœ‰å¼€å‘å·¥ä½œéƒ½åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šè¿›è¡Œã€‚æœ¬åœ°å¼€å‘å¥½ï¼Œå•å…ƒæµ‹è¯•é€šè¿‡åï¼Œå‘å¸ƒåˆ°å¼€å‘ç¯å¢ƒå’Œå…¶ä»–ç³»ç»Ÿï¼ˆæˆ–æœåŠ¡ï¼Œæˆ–æ¨¡å—ï¼Œæˆ–åº”ç”¨)è”è°ƒæµ‹è¯•ã€‚&lt;/p&gt;

&lt;p&gt;ï¼ˆè‡³äºä¸ºä»€ä¹ˆä¸ç®€å†™æˆ devï¼Œç­”æ¡ˆæ˜¯çº¦å®šå’Œå¯¹é½ã€‚å¤§å¤šæ•°é¡¹ç›® develop åˆ†æ”¯åéƒ½ä¸ç¼©å†™æˆ devï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸åº”è¯¥ç¼©å†™ã€‚å¯¹é½å°±æ˜¯è¯´ dev/masterï¼Œä¸€ä¸ªç¼©å†™ä¸€ä¸ªä¸ç¼©å†™ï¼Œå¾ˆåˆ«æ‰­ï¼Œdevelop/master çœ‹èµ·æ¥èˆ’æœç‚¹å„¿ã€‚ï¼‰&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Source branch  ===&amp;gt;   Deploy environment
develop               Development
master                Production
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¼€å‘ç¯å¢ƒåªæ˜¯å¼€å‘äººå‘˜è‡ªå·±çš„ç¯å¢ƒï¼Œå¼€å‘äººå‘˜å¯ä»¥è‡ªç”±å‘å¸ƒï¼Œæ‰€ä»¥ç»å¸¸ä¼šæœ‰å„ç§å˜åŒ–ï¼Œæ— æ³•ç¨³å®šï¼Œè¿™å¯¹æµ‹è¯•äººå‘˜æ¥è¯´ï¼Œæ˜¯ä¸ªç¾éš¾ï¼Œæ‰€ä»¥è¯´å¿…é¡»æ­å»ºå±äºæµ‹è¯•äººå‘˜è‡ªå·±çš„æµ‹è¯•ç¯å¢ƒã€‚è¿™ä¸ªç¯å¢ƒç›¸å¯¹ç¨³å®šï¼Œåªä¼šå®šæœŸå‘å¸ƒï¼Œä¹Ÿå¯ä»¥åšä¸€äº›å‹åŠ›æµ‹è¯•ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;æ—¢ç„¶æœ‰äº†æµ‹è¯•ç¯å¢ƒï¼Œé‚£ä¹ˆæµ‹è¯•ç¯å¢ƒå¯¹åº”çš„æºç å°±å¿…é¡»è¢«æ ‡è®°ï¼Œæˆ‘ä»¬å¯ä»¥å»ºä¸€ä¸ª testing åˆ†æ”¯ï¼ˆåå­—ä¸ºä»€ä¹ˆè¿™ä¹ˆé•¿ï¼Œä¸å†è§£é‡Šäº†ï¼‰ã€‚åŒ master ä¸€æ ·ï¼Œtesting åˆ†æ”¯æœ€æ–°ä»£ç æ°¸è¿œå¯¹åº”ç€æµ‹è¯•ç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;æœ‰äº† testing åˆ†æ”¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¼€å‘ç¯å¢ƒè”è°ƒé€šè¿‡çš„ä»£ç å°±å¯ä»¥ä» develop åˆ†æ”¯å®šæœŸåˆå¹¶åˆ° testing åˆ†æ”¯äº†ï¼Œåˆå¹¶å®Œæˆåï¼Œä» testing åˆ†æ”¯ä¸Šç¼–è¯‘å¹¶æ‰“åŒ…ï¼Œå‘å¸ƒåˆ°æµ‹è¯•ç¯å¢ƒï¼Œæµ‹è¯•ï¼Œè”è°ƒã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Source branch  ===&amp;gt;   Deploy environment
develop               Development
testing               Testing
master                Production
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ³¨æ„ï¼Œæ‰€æœ‰æµ‹è¯•ç¯å¢ƒå‘å¸ƒå·¥ä½œéƒ½è¦åœ¨ testing è¿™ä¸ªåˆ†æ”¯ä¸Šè¿›è¡Œï¼Œåšå†³ä¸èƒ½ä» develop ä¸Šå‘å¸ƒï¼Œè¿™ä¸ªå¯ä»¥åœ¨å‘å¸ƒè„šæœ¬ä¸Šåšä¸¥æ ¼æ§åˆ¶ã€‚åŒæ ·ï¼Œç”Ÿäº§ç¯å¢ƒå‘å¸ƒå·¥ä½œä¹Ÿä¸èƒ½ä» develop/testing åˆ†æ”¯ä¸Šè¿›è¡Œã€‚&lt;/p&gt;

&lt;p&gt;æµ‹è¯•ç¯å¢ƒç§¯ç´¯ä¸€å®šçš„åŠŸèƒ½ç‚¹ï¼Œæµ‹è¯•å’Œè”è°ƒé€šè¿‡åï¼Œå°±å¯ä»¥æŠŠ testing åˆ†æ”¯çš„ä»£ç åˆå¹¶åˆ° master åˆ†æ”¯ã€‚è¿™æ—¶ master åˆ†æ”¯ä¸Šçš„ä»£ç å°±æ˜¯æœ€æ–°ç¨³å®šç‰ˆçš„ï¼Œå¯ä»¥å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒäº†ã€‚ä½†æ˜¯å‘å¸ƒå‰ï¼Œå¿…é¡»æ›´æ–° changelogï¼Œç„¶åæ‰“ tagï¼Œä»¥è¯´æ˜æœ¬æ¬¡å‘å¸ƒæ›´æ–°äº†å“ªäº›åŠŸèƒ½ã€‚æ‰“å®Œ tagï¼Œæ‰èƒ½å‘å¸ƒï¼Œå‘å¸ƒæ—¶åªèƒ½ä» master åˆ†æ”¯ç¼–è¯‘å¤§åŒ…ï¼Œå‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;develop ...................................
             \   \   \       \        \
testing ------o---o---o-------o--------o
                       \       \
master  ----------------o-------o
                        |       |
Tags                  1.0.1   1.0.2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·è¯´æ¥ï¼Œæˆ‘ä»¬è‡³å°‘ä¼šæœ‰ 3 ä¸ªåˆ†æ”¯ï¼šdevelop/testing/masterï¼Œä¸€èˆ¬é¡¹ç›®åŸºæœ¬å¤Ÿç”¨ï¼Œå¦‚æœéœ€è¦ UATï¼ˆStageï¼‰ç¯å¢ƒï¼Œå¯ä»¥å†æ·»åŠ å…¶ä»–åˆ†æ”¯ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œåªè€ƒè™‘åˆ°æ‰€æœ‰å¼€å‘äººå‘˜éƒ½å·¥ä½œåœ¨ develop åˆ†æ”¯ä¸Šè¿™ç§æƒ…å†µï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥ä» develop åˆ†æ”¯ä¸Šåˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼Œå¼€å‘å®Œæˆåï¼Œåˆå¹¶åˆ° develop åˆ†æ”¯ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ‰€æœ‰ä»£ç éƒ½å¿…é¡»ç»è¿‡ä»£ç èµ°æŸ¥:4a8ac693e47e69c7b976131245779879&#34;&gt;æ‰€æœ‰ä»£ç éƒ½å¿…é¡»ç»è¿‡ä»£ç èµ°æŸ¥&lt;/h2&gt;

&lt;p&gt;Github æä¾›äº† Fork å’Œ Pull request åŠŸèƒ½ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åˆ†äº«ä»£ç ï¼Œä¹Ÿå¯ä»¥è´¡çŒ®ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;åˆ©ç”¨è¿™äº›åŠŸèƒ½ï¼Œå›¢é˜Ÿå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®Œæˆä»£ç å®¡æŸ¥ï¼Œè€Œä¸ä¼šå½±å“æ•ˆç‡å’Œåä½œï¼Œè€Œä¸” Github çš„æ–‡ä»¶æ¯”è¾ƒå’Œæ‰¹æ³¨éå¸¸å¼ºå¤§ï¼Œå¤§å¤§æé«˜äº†ä»£ç å®¡æŸ¥å’Œæ²Ÿé€šæ•ˆç‡ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;åœ¨ Github ç»„ç»‡ï¼ˆå¦‚ gotipsï¼‰ä¸‹åˆ›å»ºé¡¹ç›®ä»“åº“ï¼ˆå¦‚ test-gitï¼‰ï¼Œæ­¤æ—¶é¡¹ç›®åœ°åº”è¯¥æ˜¯  &lt;code&gt;https://github.com/gotips/test-git&lt;/code&gt;ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å‚ä¸è¯¥é¡¹ç›®çš„ç»„ç»‡æˆå‘˜æŠŠè¿™ä¸ªé¡¹ç›® fork åˆ°è‡ªå·±çš„è´¦å·ä¸‹ï¼Œæ­¤æ—¶é¡¹ç›®åœ°å€æ˜¯ &lt;code&gt;https://github.com/omigo/test-git&lt;/code&gt;ï¼ˆå¦‚æœä»“åº“æ˜¯ç§æœ‰çš„ï¼Œfork åï¼Œåœ¨è‡ªå·±çš„è´¦å·ä¸‹ä¾ç„¶æ˜¯ç§æœ‰çš„ï¼Œä¸ä¼šæ³„éœ²ï¼‰ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ç„¶ååœ¨æœ¬æœºåˆ›å»ºç»„ç»‡ç›®å½•ï¼ˆå¦‚ go è¯­è¨€éœ€è¦åˆ›å»º $GOPATH/src/github.com/gotipsï¼‰ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æŠŠè‡ªå·± Github è´¦å·ä¸‹çš„é¡¹ç›® clone åˆ°åˆšåˆ›å»ºçš„ç»„ç»‡ç›®å½•ä¸‹ &lt;code&gt;git clone git@github.com:omigo/test-git.git&lt;/code&gt;ï¼ˆä¸ºä»€ä¹ˆä¸æ”¾åˆ°è‡ªå·±çš„ç›®å½•ä¸‹ï¼Ÿä»£ç æ˜¯ç»„ç»‡çš„ï¼ŒåŒ…è·¯å¾„ä¹Ÿæ˜¯ç»„ç»‡çš„ï¼Œä¸æ˜¯è‡ªå·±çš„ï¼‰ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ­¤æ—¶æœ¬åœ°é¡¹ç›®åªæœ‰ä¸€ä¸ªè¿œç¨‹ä»“åº“å¿«æ·æ–¹å¼ &lt;code&gt;origin =&amp;gt; git@github.com:omigo/test-git.git&lt;/code&gt;ï¼Œå†æ·»åŠ ä¸€ä¸ªç»„ç»‡å¿«æ·æ–¹å¼ï¼Œæ‰§è¡Œ &lt;code&gt;git remote add gotips git@github.com:gotips/test-git.git&lt;/code&gt;ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å‰é¢æ‰€æœ‰å·¥ä½œéƒ½æ˜¯å‡†å¤‡ç¯å¢ƒï¼Œç°åœ¨å¯ä»¥ç¼–ç äº†ã€‚å†™å®Œä¸€ä¸ªç‹¬ç«‹é€»è¾‘ï¼Œå•å…ƒæµ‹è¯•é€šè¿‡åï¼Œæäº¤ä¸€æ¬¡åˆ°æœ¬åœ°ä»“åº“ã€‚åŒæ—¶ï¼Œä¸å®šæœŸåœ°æ¨é€åˆ°è‡ªå·±çš„ Github ä»“åº“ï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ç›´åˆ°ç‹¬ç«‹çš„åŠŸèƒ½ç‚¹å®Œæˆï¼Œæ‰€æœ‰ä»£ç éƒ½åœ¨è‡ªå·±çš„ Github ä»“åº“åï¼Œå°±å¯ä»¥æäº¤ Pull requestï¼Œè¯·å…¶ä»–ä¼™ä¼´å¸®å¿™å®¡æŸ¥ä»£ç äº†ã€‚åˆ°è‡ªå·±çš„ Github è´¦å·ä¸‹ï¼Œç‚¹å‡»ã€New pull requestã€‘ï¼Œé€‰æ‹©åˆ†æ”¯ï¼Œç‚¹å‡»ã€Create pull requestã€‘ï¼Œå¡«å†™æ¸…æ™°æ˜ç¡®çš„æ³¨é‡Šï¼Œå†æ¬¡ç‚¹å‡»ã€Create pull requestã€‘ã€‚æäº¤ Pull Request æ—¶å¯ä»¥é€‰æ‹© Labelsã€Assignee ç­‰ç»™å®šæ ‡è®°ã€æŒ‡å®šç”±è°æ¥åš Code Reviewï¼›&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å½“è¢«äººé‚€è¯·åš Code Review æ—¶ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ª Pull Request é“¾æ¥ï¼Œå¦‚ &lt;code&gt;https://github.com/gotips/test-git/pull/1&lt;/code&gt;ã€‚è¿›å…¥åï¼Œå¯ä»¥çœ‹åˆ°æäº¤äººçš„æ³¨é‡Šå’Œæ¯æ¬¡çš„æäº¤æ—¥å¿—ï¼Œã€Files changedã€‘é¡µé¢è¯¦ç»†åˆ—å‡ºäº†æ‰€æœ‰çš„æ–‡ä»¶å˜æ›´ï¼Œå¹¶å’Œä¿®æ”¹å‰å¯¹æ¯”ï¼Œå‘ç°é—®é¢˜ï¼Œå¯ä»¥ç‚¹å‡»ä»£ç ï¼Œåœ¨è¯¥è¡Œä¸‹å†™æ³¨é‡Šï¼Œæäº¤äººä¼šæ”¶åˆ°é€šçŸ¥ï¼Œä¿®æ”¹ï¼Œç„¶åå†æäº¤ã€‚å¦‚æœå®¡æŸ¥æ²¡é—®é¢˜ï¼Œå°±å¯ä»¥ç‚¹å‡»ã€Merge pull requestã€‘ï¼Œå®Œæˆåˆå¹¶ã€‚è¿™æ ·ä»£ç æ‰åˆ°ç®—å›åˆ°ç»„ç»‡ä»“åº“ä¸­ï¼Œå¼€å‘æ‰ç®—å®Œæˆï¼Œå¯ä»¥æµ‹è¯•äº†ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;Github workflow:

                +------------+             +------------+                     +--------------+
                |   Local    |  git push   |   Github   |    pull request     |    Github    |
Developer       | Repository |  --------&amp;gt;  | Repository |     ---------&amp;gt;      |  Repository  |
  1..n          |   1..n     |             |    1..n    |                     | Organization |
                +------------+             +------------+                     +--------------+
                      ^                                                              |
                      |                       git pull                               |
                      +--------------------------------------------------------------+

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;åªèƒ½ Push åˆ° Github ä¸ªäººä»“åº“ï¼Œä¸èƒ½ Push åˆ°ç»„ç»‡ä»“åº“ï¼Œå¯ä»¥ä»ç»„ç»‡ä»“åº“ Pull ä»£ç &lt;code&gt;git pull gotips develop&lt;/code&gt;ï¼ˆå¦‚æœè§‰å¾—ä¸å®‰å…¨ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;git fetch&lt;/code&gt;ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æäº¤ Pull Request ä¹‹å‰ï¼Œéœ€è¦å…ˆä» &lt;strong&gt;ç»„ç»‡&lt;/strong&gt; ä»“åº“ä¸Šæ‹‰å–ä»£ç ï¼Œä¿è¯ä»£ç æ—¶æœ€æ–°çš„ï¼Œé¿å… Pull Request ä»£ç åˆå¹¶æ—¶å‘ç”Ÿå†²çªï¼Œé€ æˆåˆå¹¶å›°éš¾ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœå‘ç”Ÿäº†å†²çªï¼Œæœ€å¥½æ˜¯è®©æäº¤äººå…ˆæ›´æ–°ä»£ç ï¼Œè‡ªå·±è§£å†³å†²çªï¼Œç„¶åæäº¤ï¼Œå†æ¬¡ Code Reviewï¼Œè½»æ¾åˆå¹¶ï¼›&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ª Pull Request ä¿®æ”¹çš„ä»£ç ï¼Œæœ€å¥½ä¸è¦è¶…è¿‡ 200 è¡Œï¼Œå·®ä¸å¤šæ˜¯ä¸€å¤©çš„å·¥ä½œé‡ï¼Œå¤ªå¤šï¼ŒCode Review çœ‹ä¸è¿‡æ¥ï¼Œå¤§å¤šæƒ…å†µä¸‹è‰è‰äº†äº‹ï¼Œè´¨é‡æ— æ³•ä¿è¯ï¼›&lt;/li&gt;
&lt;li&gt;ä»£ç è¦ç¬¦åˆè§„èŒƒï¼Œç»Ÿä¸€æ ¼å¼ï¼Œé¿å…çç¢é—®é¢˜å½±å“ Code Review å¿ƒæƒ…ï¼›&lt;/li&gt;
&lt;li&gt;Code Review æ˜¯ä¸€ä¸ªå­¦ä¹ çš„æœºä¼šï¼Œä½†æ›´å¤šæ˜¯ç›‘ç£ä¸åˆä½œï¼Œæäº¤äººå’Œåˆå¹¶äººå…±åŒå¯¹ä»£ç è´Ÿè´£ï¼Œä»£ç æœ‰é—®é¢˜ï¼Œä¸¤äººå…±åŒæ‰¿æ‹…ï¼›&lt;/li&gt;
&lt;li&gt;æœ€å¥½ä¸è¦å¼ºåˆ¶è°èµ°æŸ¥è°çš„ä»£ç ï¼Œåº”è¯¥ç”±æäº¤äººé‚€è¯·ï¼Œè¿™æ ·æ‰èƒ½åˆä½œæ›´å‹å¥½ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;åˆ†æ”¯ç®¡ç†ä¸-pull-request-çš„ç»“åˆ:4a8ac693e47e69c7b976131245779879&#34;&gt;åˆ†æ”¯ç®¡ç†ä¸ Pull Request çš„ç»“åˆ&lt;/h2&gt;

&lt;p&gt;ä¸Šé¢åˆ†åˆ«æ¢è®¨äº†åˆ†æ”¯ç®¡ç†å’Œ Pull Requestï¼Œä¸‹é¢å†è¯´è¯´ï¼Œå¦‚ä½•æŠŠä¸¤è€…ç»“åˆèµ·æ¥ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çš„åŸåˆ™ä¾ç„¶ä¸å˜ï¼šåªèƒ½åœ¨ develop åˆ†æ”¯åšå¼€å‘ï¼ˆå¯èƒ½ä¹Ÿæœ‰å…¶ä»–ç‰¹æ€§åˆ†æ”¯ï¼‰ï¼Œæ¯æ¬¡æäº¤å¿…é¡»ç»è¿‡ä¸¥æ ¼å®¡æŸ¥ï¼Œæ¯ä¸ªåˆ†æ”¯å¯¹åº”ä¸€ä¸ªå‘å¸ƒç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†æ–¹ä¾¿ï¼Œä¸€èˆ¬æˆ‘ä»¬å›¢é˜Ÿåä½œä¸­ï¼Œä¼šæŠŠ develop åˆ†æ”¯è®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ç»„ç»‡ä¸‹åˆ›å»ºä»“åº“åï¼Œå»ºå¥½ 3 ä¸ªåˆ†æ”¯ master/testing/developï¼Œç„¶ååˆ° Settings -&amp;gt; Branches ä¸‹é¢ é€‰æ‹© develop ä¸ºé»˜è®¤åˆ†æ”¯ã€‚è¿™æ ·æ‰€æœ‰äºº fork çš„é¡¹ç›®ä¹Ÿä¼šé»˜è®¤ develop åˆ†æ”¯ï¼Œclone ä¹Ÿæ˜¯ develop åˆ†æ”¯ï¼Œé¿å…åˆ†æ”¯åˆ‡æ¢å’Œå¿˜è®°åˆ‡æ¢åˆ†æ”¯å¸¦æ¥çš„éº»çƒ¦ã€‚å¼€å‘éƒ½åœ¨ develop åˆ†æ”¯ï¼ŒPull Request ä¹Ÿåœ¨ develop åˆ†æ”¯ï¼Œmerge ä¹Ÿæ˜¯ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åå°±æ˜¯æµ‹è¯•ç¯å¢ƒå‘å¸ƒäº†ï¼Œæµ‹è¯•ç¯å¢ƒå¯¹åº” testing åˆ†æ”¯ï¼Œåº”è¯¥æŒ‡å®šä¸€äººä¸“é—¨ç®¡ç†æµ‹è¯•ç¯å¢ƒå‘å¸ƒã€‚æ‰€æœ‰å¼€å‘äººå‘˜å…ˆä»ç»„ç»‡ä»“åº“ develop åˆ†æ”¯æ‹‰å–æœ€æ–°ï¼ˆéœ€è¦å‘å¸ƒåˆ°æµ‹è¯•ç¯å¢ƒçš„ç‰ˆæœ¬ï¼‰ï¼Œå’Œæœ¬åœ°ä»£ç  develop åˆ†æ”¯åˆå¹¶åï¼Œå†æŠŠ develop åˆ†æ”¯åˆå¹¶åˆ° testing åˆ†æ”¯ï¼Œç„¶åæäº¤ä»£ç åˆ° Github ä¸ªäººä»“åº“ testing åˆ†æ”¯ä¸‹ï¼Œæäº¤ pull request ç»™æµ‹è¯•å‘å¸ƒç®¡ç†è€…ã€‚æµ‹è¯•å‘å¸ƒç®¡ç†è€…åˆå¹¶åï¼Œä»ç»„ç»‡ä»“åº“æ›´æ–° testing ä»£ç ï¼Œå¹¶ä» testing åˆ†æ”¯å‘å¸ƒåˆ°æµ‹è¯•ç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœåˆ†æ”¯ä¸å¤šï¼Œå¹¶ä¸”å›¢é˜Ÿåä½œè‰¯å¥½ï¼Œåˆå¹¶åˆ†æ”¯çš„å·¥ä½œä¹Ÿå¯ä»¥ç”±æµ‹è¯•å‘å¸ƒç®¡ç†è€…ä¸€ä¸ªäººå®Œæˆï¼Œä»¥ç®€åŒ–æµç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;åŒæ ·æŒ‡å®šä¸€ä½ç”Ÿäº§å‘å¸ƒç®¡ç†è€…ï¼Œæµ‹è¯•é€šè¿‡åï¼Œæµ‹è¯•å‘å¸ƒç®¡ç†è€…å°±å¯ä»¥æŠŠ testing åˆ†æ”¯åˆå¹¶åˆ° master åˆ†æ”¯ï¼Œæäº¤åˆ° Github ä¸ªäººä»“åº“ master åˆ†æ”¯ï¼Œæäº¤ Pull Request ç»™ç”Ÿäº§å‘å¸ƒç®¡ç†è€…ã€‚ç”Ÿäº§å‘å¸ƒç®¡ç†è€…åˆå¹¶ä»£ç ï¼Œæ‰“ tagï¼Œå®Œæˆç”Ÿäº§ç¯å¢ƒå‘å¸ƒã€‚&lt;/p&gt;

&lt;p&gt;ChangeLog é—®é¢˜ï¼Œä»€ä¹ˆæ—¶å€™æ›´æ–° ChangeLog å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å¦‚æœå¼€å‘æ—¶å°±å·²ç»çŸ¥é“ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆå¼€å‘æ—¶å°±å¯ä»¥æ›´æ–°ï¼Œå¦‚æœå‘å¸ƒæ—¶æ‰çŸ¥é“ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆå‘å¸ƒç®¡ç†è€…å¯ä»¥é€šè¿‡ git log äº†è§£æœ¬æ¬¡å‘å¸ƒæœ‰å“ªäº›æ›´æ–°ï¼Œç¼–å†™ ChangeLogã€‚å½“ç„¶ä¸æ’é™¤æœ‰æ›´å¥½çš„ ChangeLog æ›´æ–°åŠæ³•ï¼Œæˆ–è€…æœ‰æ›´å¥½çš„ Git åä½œæµç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;æ³¨æ„ï¼šæ— è®ºæ˜¯åˆ†æ”¯ç®¡ç†ï¼Œè¿˜æ˜¯ Pull Requestï¼Œè¿˜æ˜¯ç¼–å†™ ChangeLogï¼Œéƒ½éœ€è¦ git log æ¸…æ™°æ˜ç¡®ï¼Œç²’åº¦è¦ç»†ï¼Œè‡³å°‘ä¸èƒ½ä¸¢æ‰åŠŸèƒ½ç‚¹ï¼Œä¸èƒ½æŠŠä¸¤ä¸ªåŠŸèƒ½ç‚¹ä¸€æ¬¡ commitï¼Œlog   ä¸Šåªå†™ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼Œæ›´åŠ ä¸èƒ½å‡ºç°æ— æ•ˆ logï¼Œæ¯”å¦‚ ä¼˜åŒ–ã€ä¿®å¤ bugã€æ›´æ–°äº†ä¸€äº›æ–‡æ¡£ã€è°ƒæ•´ç®—æ³•ç­‰ç­‰ã€‚&lt;/p&gt;
</description>
        </item>
        
        <item>
            <title>HTTPè¯·æ±‚é”™è¯¯å¤§å…¨</title>
            <link>http://kooksee.github.io/blog/HTTP%E8%AF%B7%E6%B1%82%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/HTTP%E8%AF%B7%E6%B1%82%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/</guid>
            <description>&lt;p&gt;1xx - ä¿¡æ¯æç¤º
è¿™äº›çŠ¶æ€ä»£ç è¡¨ç¤ºä¸´æ—¶çš„å“åº”ã€‚å®¢æˆ·ç«¯åœ¨æ”¶åˆ°å¸¸è§„å“åº”ä¹‹å‰ï¼Œåº”å‡†å¤‡æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ª 1xx å“åº”ã€‚
100 - ç»§ç»­
101 - åˆ‡æ¢åè®®&lt;/p&gt;

&lt;p&gt;2xx - æˆåŠŸ
è¿™ç±»çŠ¶æ€ä»£ç è¡¨æ˜æœåŠ¡å™¨æˆåŠŸåœ°æ¥å—äº†å®¢æˆ·ç«¯è¯·æ±‚ã€‚
200 - ç¡®å®šã€‚å®¢æˆ·ç«¯è¯·æ±‚å·²æˆåŠŸ
201 - å·²åˆ›å»º
202 - å·²æ¥å—
203 - éæƒå¨æ€§ä¿¡æ¯
204 - æ— å†…å®¹
205 - é‡ç½®å†…å®¹
206 - éƒ¨åˆ†å†…å®¹&lt;/p&gt;

&lt;p&gt;3xx - é‡å®šå‘
å®¢æˆ·ç«¯æµè§ˆå™¨å¿…é¡»é‡‡å–æ›´å¤šæ“ä½œæ¥å®ç°è¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œæµè§ˆå™¨å¯èƒ½ä¸å¾—ä¸è¯·æ±‚æœåŠ¡å™¨ä¸Šçš„ä¸åŒçš„é¡µé¢ï¼Œæˆ–é€šè¿‡ä»£ç†æœåŠ¡å™¨é‡å¤è¯¥è¯·æ±‚ã€‚
302 - å¯¹è±¡å·²ç§»åŠ¨ã€‚
304 - æœªä¿®æ”¹ã€‚
307 - ä¸´æ—¶é‡å®šå‘ã€‚&lt;/p&gt;

&lt;p&gt;4xx - å®¢æˆ·ç«¯é”™è¯¯
å‘ç”Ÿé”™è¯¯ï¼Œå®¢æˆ·ç«¯ä¼¼ä¹æœ‰é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ä¸å­˜åœ¨çš„é¡µé¢ï¼Œå®¢æˆ·ç«¯æœªæä¾›æœ‰æ•ˆçš„èº«ä»½éªŒè¯ä¿¡æ¯ã€‚
400 - é”™è¯¯çš„è¯·æ±‚
401 - è®¿é—®è¢«æ‹’ç»
 Â· 401.1 - ç™»å½•å¤±è´¥ã€‚
 Â· 401.2 - æœåŠ¡å™¨é…ç½®å¯¼è‡´ç™»å½•å¤±è´¥ã€‚
 Â· 401.3 - ç”±äº ACL å¯¹èµ„æºçš„é™åˆ¶è€Œæœªè·å¾—æˆæƒã€‚
 Â· 401.4 - ç­›é€‰å™¨æˆæƒå¤±è´¥ã€‚
 Â· 401.5 - ISAPI/CGI åº”ç”¨ç¨‹åºæˆæƒå¤±è´¥ã€‚
 Â· 401.7 â€“ è®¿é—®è¢« Web æœåŠ¡å™¨ä¸Šçš„ URL æˆæƒç­–ç•¥æ‹’ç»ã€‚è¿™ä¸ªé”™è¯¯ä»£ç ä¸º IIS 6.0 æ‰€ä¸“ç”¨ã€‚
403 - ç¦æ­¢è®¿é—®
 Â· 403.1 - æ‰§è¡Œè®¿é—®è¢«ç¦æ­¢ã€‚
 Â· 403.2 - è¯»è®¿é—®è¢«ç¦æ­¢ã€‚
 Â· 403.3 - å†™è®¿é—®è¢«ç¦æ­¢ã€‚
 Â· 403.4 - è¦æ±‚ SSLã€‚
 Â· 403.5 - è¦æ±‚ SSL 128ã€‚
 Â· 403.6 - IP åœ°å€è¢«æ‹’ç»ã€‚
 Â· 403.7 - è¦æ±‚å®¢æˆ·ç«¯è¯ä¹¦ã€‚
 Â· 403.8 - ç«™ç‚¹è®¿é—®è¢«æ‹’ç»ã€‚
 Â· 403.9 - ç”¨æˆ·æ•°è¿‡å¤šã€‚
 Â· 403.10 - é…ç½®æ— æ•ˆã€‚
 Â· 403.11 - å¯†ç æ›´æ”¹ã€‚
 Â· 403.12 - æ‹’ç»è®¿é—®æ˜ å°„è¡¨ã€‚
 Â· 403.13 - å®¢æˆ·ç«¯è¯ä¹¦è¢«åŠé”€ã€‚
 Â· 403.14 - æ‹’ç»ç›®å½•åˆ—è¡¨ã€‚
 Â· 403.15 - è¶…å‡ºå®¢æˆ·ç«¯è®¿é—®è®¸å¯ã€‚
 Â· 403.16 - å®¢æˆ·ç«¯è¯ä¹¦ä¸å—ä¿¡ä»»æˆ–æ— æ•ˆã€‚
 Â· 403.17 - å®¢æˆ·ç«¯è¯ä¹¦å·²è¿‡æœŸæˆ–å°šæœªç”Ÿæ•ˆã€‚
 Â· 403.18 - åœ¨å½“å‰çš„åº”ç”¨ç¨‹åºæ± ä¸­ä¸èƒ½æ‰§è¡Œæ‰€è¯·æ±‚çš„ URLã€‚è¿™ä¸ªé”™è¯¯ä»£ç ä¸º IIS 6.0 æ‰€ä¸“ç”¨ã€‚
 Â· 403.19 - ä¸èƒ½ä¸ºè¿™ä¸ªåº”ç”¨ç¨‹åºæ± ä¸­çš„å®¢æˆ·ç«¯æ‰§è¡Œ CGIã€‚è¿™ä¸ªé”™è¯¯ä»£ç ä¸º IIS 6.0 æ‰€ä¸“ç”¨ã€‚
 Â· 403.20 - Passport ç™»å½•å¤±è´¥ã€‚è¿™ä¸ªé”™è¯¯ä»£ç ä¸º IIS 6.0 æ‰€ä¸“ç”¨ã€‚
404 - æ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶æˆ–ç›®å½•
 Â· 404.1 - æ— æ³•åœ¨æ‰€è¯·æ±‚çš„ç«¯å£ä¸Šè®¿é—® Web ç«™ç‚¹ã€‚
 Â· 404.2 - Web æœåŠ¡æ‰©å±•é”å®šç­–ç•¥é˜»æ­¢æœ¬è¯·æ±‚ã€‚
 Â· 404.3 - MIME æ˜ å°„ç­–ç•¥é˜»æ­¢æœ¬è¯·æ±‚ã€‚
405 - ç”¨æ¥è®¿é—®æœ¬é¡µé¢çš„ HTTP è°“è¯ä¸è¢«å…è®¸ï¼ˆæ–¹æ³•ä¸è¢«å…è®¸ï¼‰
406 - å®¢æˆ·ç«¯æµè§ˆå™¨ä¸æ¥å—æ‰€è¯·æ±‚é¡µé¢çš„ MIME ç±»å‹
407 - è¦æ±‚è¿›è¡Œä»£ç†èº«ä»½éªŒè¯
412 - å‰ææ¡ä»¶å¤±è´¥
413 â€“ è¯·æ±‚å®ä½“å¤ªå¤§
414 - è¯·æ±‚ URI å¤ªé•¿
415 â€“ ä¸æ”¯æŒçš„åª’ä½“ç±»å‹
416 â€“ æ‰€è¯·æ±‚çš„èŒƒå›´æ— æ³•æ»¡è¶³
417 â€“ æ‰§è¡Œå¤±è´¥
423 â€“ é”å®šçš„é”™è¯¯&lt;/p&gt;

&lt;p&gt;5xx - æœåŠ¡å™¨ç«¯é”™è¯¯
æœåŠ¡å™¨ç”±äºé‡åˆ°é”™è¯¯è€Œä¸èƒ½å®Œæˆè¯¥è¯·æ±‚ã€‚
500 - å†…éƒ¨æœåŠ¡å™¨é”™è¯¯
 Â· 500.12 - åº”ç”¨ç¨‹åºæ­£å¿™äºåœ¨ Web æœåŠ¡å™¨ä¸Šé‡æ–°å¯åŠ¨ã€‚
 Â· 500.13 - Web æœåŠ¡å™¨å¤ªå¿™ã€‚
 Â· 500.15 - ä¸å…è®¸ç›´æ¥è¯·æ±‚ Global.asaã€‚
 Â· 500.16 â€“ UNC æˆæƒå‡­æ®ä¸æ­£ç¡®ã€‚è¿™ä¸ªé”™è¯¯ä»£ç ä¸º IIS 6.0 æ‰€ä¸“ç”¨ã€‚
 Â· 500.18 â€“ URL æˆæƒå­˜å‚¨ä¸èƒ½æ‰“å¼€ã€‚è¿™ä¸ªé”™è¯¯ä»£ç ä¸º IIS 6.0 æ‰€ä¸“ç”¨ã€‚
 Â· 500.100 - å†…éƒ¨ ASP é”™è¯¯ã€‚
501 - é¡µçœ‰å€¼æŒ‡å®šäº†æœªå®ç°çš„é…ç½®
502 - Web æœåŠ¡å™¨ç”¨ä½œç½‘å…³æˆ–ä»£ç†æœåŠ¡å™¨æ—¶æ”¶åˆ°äº†æ— æ•ˆå“åº”ã€‚502.1 - CGI åº”ç”¨ç¨‹åºè¶…æ—¶
502.2 - CGI åº”ç”¨ç¨‹åºå‡ºé”™ã€‚application
503 - æœåŠ¡ä¸å¯ç”¨ã€‚è¿™ä¸ªé”™è¯¯ä»£ç ä¸º IIS 6.0 æ‰€ä¸“ç”¨
504 - ç½‘å…³è¶…æ—¶
505 - HTTP ç‰ˆæœ¬ä¸å—æ”¯æŒ&lt;/p&gt;

&lt;p&gt;HTTP 304 é”™è¯¯ä»‹ç»&lt;/p&gt;

&lt;p&gt;è¡¨ç¤ºè¯·æ±‚çš„ç½‘é¡µ(æ–‡ä»¶)ä¸ä¸Šæ¬¡å¯¹æ¯”æ²¡æœ‰æ›´æ–°ã€‚&lt;/p&gt;

&lt;p&gt;æ„æ€æ˜¯èœ˜è››æ¥åˆ°ä½ çš„ç½‘ç«™ï¼Œä½ ç½‘ç«™æ²¡æœ‰æ›´æ–°å†…å®¹ï¼Œå¹¶ä¸”ä¸ä¸Šæ¬¡ä¸€æ ·ï¼Œå°±ä¼šè¿”å›304ä»£ç ã€‚å¦‚æœæ¯æ¬¡èœ˜è››æ¥ä½ çš„ç½‘ç«™éƒ½æœ‰æ–°çš„å†…å®¹å‡ºç°ï¼Œå°±ä¼šåå›200ä»£ç ã€‚å› ä¸º304ä»£ç æ˜¯è®°å½•ç½‘ç«™å†…å®¹æ˜¯å¦æœ‰æ›´æ–°ï¼Œåœ¨24å°æ—¶å†…æ²¡æœ‰æ›´æ–°ï¼Œé‚£ä¹ˆå¿«ç…§å°±ä¼šåœæ­¢ã€‚åŒæ ·ï¼Œå¦‚æœè¿”å›çš„304å¤ªå¤šï¼Œè¡¨ç¤ºç½‘ç«™æ²¡æœ‰æ›´æ–°ï¼Œèœ˜è››ä¹Ÿå°±ä¸ä¼šç»å¸¸å…‰é¡¾ï¼Œ å½±å“æ”¶å½•ã€‚&lt;/p&gt;

&lt;p&gt;æŠŠèœ˜è››æ¥çš„æ—¶å€™ç»™è®°å½•ä¸‹æ¥ï¼Œç®—å‡ºèœ˜è››æ¯éš”å¤šä¹…æ¥ä¸€æ¬¡ç½‘ç«™ï¼Œç„¶åå°±åˆ†éš”å¤šä¹…æ›´æ–°ä¸€ä¸‹æ–‡ç« ï¼Œæ›´æ–°æ–‡ç« æ—¶è¦åŸåˆ›+è½¬è½½ã€‚è®©èœ˜è››æ¯æ¬¡æ¥éƒ½èƒ½å¤Ÿæœ‰æ–°çš„å†…å®¹ï¼Œè€Œä¸æ˜¯æ— åŠŸè€Œè¿”ã€‚è¿™æ ·å°±ä¼šäº§ç”Ÿå¾ˆå¤š200ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœå®¢æˆ·ç«¯åœ¨è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œå‘ç°è‡ªå·±ç¼“å­˜çš„æ–‡ä»¶æœ‰ Last Modified ï¼Œé‚£ä¹ˆåœ¨è¯·æ±‚ä¸­ä¼šåŒ…å« If Modified Since ï¼Œè¿™ä¸ªæ—¶é—´å°±æ˜¯ç¼“å­˜æ–‡ä»¶çš„ Last Modified ã€‚å› æ­¤ï¼Œå¦‚æœè¯·æ±‚ä¸­åŒ…å« If Modified Sinceï¼Œå°±è¯´æ˜å·²ç»æœ‰ç¼“å­˜åœ¨å®¢æˆ·ç«¯ã€‚åªè¦åˆ¤æ–­è¿™ä¸ªæ—¶é—´å’Œå½“å‰è¯·æ±‚çš„æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´å°±å¯ä»¥ç¡®å®šæ˜¯è¿”å› 304 è¿˜æ˜¯ 200 ã€‚å¯¹äºé™æ€æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šCSSã€å›¾ç‰‡ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨å®Œæˆ Last Modified å’Œ If Modified Since çš„æ¯”è¾ƒï¼Œå®Œæˆç¼“å­˜æˆ–è€…æ›´æ–°ã€‚ä½†æ˜¯å¯¹äºåŠ¨æ€é¡µé¢ï¼Œå°±æ˜¯åŠ¨æ€äº§ç”Ÿçš„é¡µé¢ï¼Œå¾€å¾€æ²¡æœ‰åŒ…å« Last Modified ä¿¡æ¯ï¼Œè¿™æ ·æµè§ˆå™¨ã€ç½‘å…³ç­‰éƒ½ä¸ä¼šåšç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯åœ¨æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™éƒ½å®Œæˆä¸€ä¸ª 200 çš„è¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;å› æ­¤ï¼Œå¯¹äºåŠ¨æ€é¡µé¢åšç¼“å­˜åŠ é€Ÿï¼Œé¦–å…ˆè¦åœ¨ Response çš„ HTTP Header ä¸­å¢åŠ  Last Modified å®šä¹‰ï¼Œå…¶æ¬¡æ ¹æ® Request ä¸­çš„ If Modified Since å’Œè¢«è¯·æ±‚å†…å®¹çš„æ›´æ–°æ—¶é—´æ¥è¿”å› 200 æˆ–è€… 304 ã€‚è™½ç„¶åœ¨è¿”å› 304 çš„æ—¶å€™å·²ç»åšäº†ä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢ï¼Œä½†æ˜¯å¯ä»¥é¿å…æ¥ä¸‹æ¥æ›´å¤šçš„æ•°æ®åº“æŸ¥è¯¢ï¼Œå¹¶ä¸”æ²¡æœ‰è¿”å›é¡µé¢å†…å®¹è€Œåªæ˜¯ä¸€ä¸ª HTTP Headerï¼Œä»è€Œå¤§å¤§çš„é™ä½å¸¦å®½çš„æ¶ˆè€—ï¼Œå¯¹äºç”¨æˆ·çš„æ„Ÿè§‰ä¹Ÿæ˜¯æé«˜ã€‚&lt;/p&gt;

&lt;p&gt;304ä¸æ˜¯é”™è¯¯ã€‚æ˜¯è¯·æ±‚ä¸€ä¸‹å›¾ç‰‡ï¼Œå¦‚æœå›¾ç‰‡åœ¨ä¸Šæ¬¡è®¿é—®åæ²¡æœ‰æ›´æ–°è¿‡ï¼Œå°±ä¸ç”¨ä¸‹è½½äº†ï¼Œè¿”å›304ï¼Œå«æµè§ˆå™¨ç›´æ¥ç”¨cacheé‡Œçš„ï¼Œè¿™ä¸ªå¾ˆæ­£å¸¸çš„ã€‚å¯ä»¥æ‰“å¼€ç«ç‹firebugä½¿ç”¨&amp;rdquo;ç½‘ç»œ&amp;rdquo;åŠŸèƒ½æŸ¥çœ‹åŠ è½½ä¸€ä¸ªé¡µé¢æ—¶æ‰€æœ‰è¯·æ±‚æ–‡ä»¶çš„çŠ¶æ€ï¼Œå†F5çœ‹ä¸€ä¸‹ï¼Œä¼šçœ‹åˆ°å¾ˆå¤šæ˜¯304ï¼Œè¡¨ç¤ºç›´æ¥ä»æµè§ˆå™¨ç¼“å­˜ä¸­è¯»å–çš„ã€‚&lt;/p&gt;
</description>
        </item>
        
        <item>
            <title>Pythonå¤„ç†JSON</title>
            <link>http://kooksee.github.io/blog/Python%E5%A4%84%E7%90%86JSON/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/Python%E5%A4%84%E7%90%86JSON/</guid>
            <description>&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;ä»€ä¹ˆæ˜¯jsonï¼š

JSON(JavaScript Object Notation)

æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚æ˜“äºäººé˜…è¯»å’Œç¼–å†™ã€‚åŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚å®ƒåŸºäºJavaScript Programming Language,

Standard ECMA-262 3rd Edition - December

1999çš„ä¸€ä¸ªå­é›†ã€‚JSONé‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºè¯­è¨€çš„æ–‡æœ¬æ ¼å¼ï¼Œä½†æ˜¯ä¹Ÿä½¿ç”¨äº†ç±»ä¼¼äºCè¯­è¨€å®¶æ—çš„ä¹ æƒ¯ï¼ˆåŒ…æ‹¬C, C++, C#, Java,

JavaScript, Perl, Pythonç­‰ï¼‰ã€‚è¿™äº›ç‰¹æ€§ä½¿JSONæˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚

JSONå»ºæ„äºä¸¤ç§ç»“æ„ï¼š

â€œåç§°/å€¼â€å¯¹çš„é›†åˆï¼ˆA collection of name/value pairsï¼‰ã€‚ä¸åŒçš„è¯­è¨€ä¸­ï¼Œå®ƒè¢«ç†è§£ä¸ºå¯¹è±¡ï¼ˆobjectï¼‰ï¼Œçºªå½•ï¼ˆrecordï¼‰ï¼Œç»“æ„ï¼ˆstructï¼‰ï¼Œå­—å…¸ï¼ˆdictionaryï¼‰ï¼Œå“ˆå¸Œè¡¨ï¼ˆhash tableï¼‰ï¼Œæœ‰é”®åˆ—è¡¨ï¼ˆkeyed listï¼‰ï¼Œæˆ–è€…å…³è”æ•°ç»„ ï¼ˆassociative arrayï¼‰ã€‚

å€¼çš„æœ‰åºåˆ—è¡¨ï¼ˆAn ordered list of valuesï¼‰ã€‚åœ¨å¤§éƒ¨åˆ†è¯­è¨€ä¸­ï¼Œå®ƒè¢«ç†è§£ä¸ºæ•°ç»„ï¼ˆarrayï¼‰ã€‚

è¿™äº›éƒ½æ˜¯å¸¸è§çš„æ•°æ®ç»“æ„ã€‚äº‹å®ä¸Šå¤§éƒ¨åˆ†ç°ä»£è®¡ç®—æœºè¯­è¨€éƒ½ä»¥æŸç§å½¢å¼æ”¯æŒå®ƒä»¬ã€‚è¿™ä½¿å¾—ä¸€ç§æ•°æ®æ ¼å¼åœ¨åŒæ ·åŸºäºè¿™äº›ç»“æ„çš„ç¼–ç¨‹è¯­è¨€ä¹‹é—´äº¤æ¢æˆä¸ºå¯èƒ½ã€‚

jsoå®˜æ–¹è¯´æ˜å‚è§ï¼šhttp://json.org/

Pythonæ“ä½œjsonçš„æ ‡å‡†apiåº“å‚è€ƒï¼šhttp://docs.python.org/library/json.html

å¯¹ç®€å•æ•°æ®ç±»å‹çš„encoding å’Œ decodingï¼š

ä½¿ç”¨ç®€å•çš„json.dumpsæ–¹æ³•å¯¹ç®€å•æ•°æ®ç±»å‹è¿›è¡Œç¼–ç ï¼Œä¾‹å¦‚ï¼š

import json

obj=[[1,2,3],123,123.123,&#39;abc&#39;,{&#39;key1&#39;:(1,2,3),&#39;key2&#39;:(4,5,6)}]

encodedjson=json.dumps(obj)

printrepr(obj)

printencodedjson

è¾“å‡ºï¼š

[[1, 2, 3], 123, 123.123, &#39;abc&#39;, {&#39;key2&#39;: (4, 5, 6), &#39;key1&#39;: (1, 2, 3)}]

[[1, 2, 3], 123, 123.123, &amp;quot;abc&amp;quot;, {&amp;quot;key2&amp;quot;: [4, 5, 6], &amp;quot;key1&amp;quot;: [1, 2, 3]}]

é€šè¿‡è¾“å‡ºçš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œç®€å•ç±»å‹é€šè¿‡encodeä¹‹åè·Ÿå…¶åŸå§‹çš„repr()è¾“å‡ºç»“æœéå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰äº›æ•°æ®ç±»å‹è¿›è¡Œäº†æ”¹å˜ï¼Œä¾‹å¦‚ä¸Šä¾‹ä¸­çš„å…ƒç»„åˆ™è½¬æ¢ä¸ºäº†åˆ—è¡¨ã€‚åœ¨jsonçš„ç¼–ç è¿‡ç¨‹ä¸­ï¼Œä¼šå­˜åœ¨ä»pythonåŸå§‹ç±»å‹å‘jsonç±»å‹çš„è½¬åŒ–è¿‡ç¨‹ï¼Œå…·ä½“çš„è½¬åŒ–å¯¹ç…§å¦‚ä¸‹ï¼š


json.dumps()æ–¹æ³•è¿”å›äº†ä¸€ä¸ªstrå¯¹è±¡encodedjsonï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥åœ¨å¯¹encodedjsonè¿›è¡Œdecodeï¼Œå¾—åˆ°åŸå§‹æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨çš„json.loads()å‡½æ•°ï¼š
decodejson=json.loads(encodedjson)

printtype(decodejson)

printdecodejson[4][&#39;key1&#39;]

printdecodejson

è¾“å‡ºï¼š

[1, 2, 3]

[[1, 2, 3], 123, 123.123, u&#39;abc&#39;, {u&#39;key2&#39;: [4, 5, 6], u&#39;key1&#39;: [1, 2, 3]}]

loadsæ–¹æ³•è¿”å›äº†åŸå§‹çš„å¯¹è±¡ï¼Œä½†æ˜¯ä»ç„¶å‘ç”Ÿäº†ä¸€äº›æ•°æ®ç±»å‹çš„è½¬åŒ–ã€‚æ¯”å¦‚ï¼Œä¸Šä¾‹ä¸­â€˜abcâ€™è½¬åŒ–ä¸ºäº†unicodeç±»å‹ã€‚ä»jsonåˆ°pythonçš„ç±»å‹è½¬åŒ–å¯¹ç…§å¦‚ä¸‹ï¼š


json.dumpsæ–¹æ³•æä¾›äº†å¾ˆå¤šå¥½ç”¨çš„å‚æ•°å¯ä¾›é€‰æ‹©ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰sort_keysï¼ˆå¯¹dictå¯¹è±¡è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬çŸ¥é“é»˜è®¤dictæ˜¯æ— åºå­˜æ”¾çš„ï¼‰ï¼Œseparatorsï¼Œindentç­‰å‚æ•°ã€‚

æ’åºåŠŸèƒ½ä½¿å¾—å­˜å‚¨çš„æ•°æ®æ›´åŠ æœ‰åˆ©äºè§‚å¯Ÿï¼Œä¹Ÿä½¿å¾—å¯¹jsonè¾“å‡ºçš„å¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼Œä¾‹å¦‚ï¼š

data1={&#39;b&#39;:789,&#39;c&#39;:456,&#39;a&#39;:123}

data2={&#39;a&#39;:123,&#39;b&#39;:789,&#39;c&#39;:456}

d1=json.dumps(data1,sort_keys=True)

d2=json.dumps(data2)

d3=json.dumps(data2,sort_keys=True)

printd1

printd2

printd3

printd1==d2

printd1==d3

è¾“å‡ºï¼š

{&amp;quot;a&amp;quot;: 123, &amp;quot;b&amp;quot;: 789, &amp;quot;c&amp;quot;: 456}

{&amp;quot;a&amp;quot;: 123, &amp;quot;c&amp;quot;: 456, &amp;quot;b&amp;quot;: 789}

{&amp;quot;a&amp;quot;: 123, &amp;quot;b&amp;quot;: 789, &amp;quot;c&amp;quot;: 456}

False

True

ä¸Šä¾‹ä¸­ï¼Œæœ¬æ¥data1å’Œdata2æ•°æ®åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç”±äºdictå­˜å‚¨çš„æ— åºç‰¹æ€§ï¼Œé€ æˆä¸¤è€…æ— æ³•æ¯”è¾ƒã€‚å› æ­¤ä¸¤è€…å¯ä»¥é€šè¿‡æ’åºåçš„ç»“æœè¿›è¡Œå­˜å‚¨

å°±é¿å…äº†æ•°æ®æ¯”è¾ƒä¸ä¸€è‡´çš„æƒ…å†µå‘ç”Ÿï¼Œä½†æ˜¯æ’åºåå†è¿›è¡Œå­˜å‚¨ï¼Œç³»ç»Ÿå¿…å®šè¦å¤šåšä¸€äº›äº‹æƒ…ï¼Œä¹Ÿä¸€å®šä¼šå› æ­¤é€ æˆä¸€å®šçš„æ€§èƒ½æ¶ˆè€—ï¼Œæ‰€ä»¥é€‚å½“æ’åºæ˜¯å¾ˆé‡è¦çš„ã€‚

indentå‚æ•°æ˜¯ç¼©è¿›çš„æ„æ€ï¼Œå®ƒå¯ä»¥ä½¿å¾—æ•°æ®å­˜å‚¨çš„æ ¼å¼å˜å¾—æ›´åŠ ä¼˜é›…ã€‚

data1={&#39;b&#39;:789,&#39;c&#39;:456,&#39;a&#39;:123}

d1=json.dumps(data1,sort_keys=True,indent=4)

printd1

è¾“å‡ºï¼š

{

&amp;quot;a&amp;quot;: 123,

&amp;quot;b&amp;quot;: 789,

&amp;quot;c&amp;quot;: 456

}

è¾“å‡ºçš„æ•°æ®è¢«æ ¼å¼åŒ–ä¹‹åï¼Œå˜å¾—å¯è¯»æ€§æ›´å¼ºï¼Œä½†æ˜¯å´æ˜¯é€šè¿‡å¢åŠ ä¸€äº›å†—ä½™çš„ç©ºç™½æ ¼æ¥è¿›è¡Œå¡«å……çš„ã€‚jsonä¸»è¦æ˜¯ä½œä¸ºä¸€ç§æ•°æ®é€šä¿¡çš„æ ¼å¼å­˜åœ¨çš„ï¼Œè€Œç½‘ç»œé€š

ä¿¡æ˜¯å¾ˆåœ¨ä¹æ•°æ®çš„å¤§å°çš„ï¼Œæ— ç”¨çš„ç©ºæ ¼ä¼šå æ®å¾ˆå¤šé€šä¿¡å¸¦å®½ï¼Œæ‰€ä»¥é€‚å½“æ—¶å€™ä¹Ÿè¦å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ã€‚separatorå‚æ•°å¯ä»¥èµ·åˆ°è¿™æ ·çš„ä½œç”¨ï¼Œè¯¥å‚æ•°ä¼ é€’æ˜¯ä¸€ä¸ª

å…ƒç»„ï¼ŒåŒ…å«åˆ†å‰²å¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚

print&#39;DATA:&#39;,repr(data)

print&#39;repr(data)             :&#39;,len(repr(data))

print&#39;dumps(data)            :&#39;,len(json.dumps(data))

print&#39;dumps(data, indent=2)  :&#39;,len(json.dumps(data, indent=4))

print&#39;dumps(data, separators):&#39;,len(json.dumps(data, separators=(&#39;,&#39;,&#39;:&#39;)))

è¾“å‡ºï¼š

DATA: {&#39;a&#39;: 123, &#39;c&#39;: 456, &#39;b&#39;: 789}

repr(data)             : 30

dumps(data)            : 30

dumps(data, indent=2)  : 46

dumps(data, separators): 25

é€šè¿‡ç§»é™¤å¤šä½™çš„ç©ºç™½ç¬¦ï¼Œè¾¾åˆ°äº†å‹ç¼©æ•°æ®çš„ç›®çš„ï¼Œè€Œä¸”æ•ˆæœè¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ã€‚

å¦ä¸€ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„dumpså‚æ•°æ˜¯skipkeysï¼Œé»˜è®¤ä¸ºFalseã€‚ dumpsæ–¹æ³•å­˜å‚¨dictå¯¹è±¡æ—¶ï¼Œkeyå¿…é¡»æ˜¯strç±»å‹ï¼Œå¦‚æœå‡ºç°äº†å…¶ä»–ç±»å‹çš„è¯ï¼Œé‚£ä¹ˆä¼šäº§ç”ŸTypeErrorå¼‚å¸¸ï¼Œå¦‚æœå¼€å¯è¯¥å‚æ•°ï¼Œè®¾ä¸ºTrueçš„è¯ï¼Œåˆ™ä¼šæ¯”è¾ƒä¼˜é›…çš„è¿‡åº¦ã€‚

data={&#39;b&#39;:789,&#39;c&#39;:456,(1,2):123}

printjson.dumps(data,skipkeys=True)

è¾“å‡ºï¼š

{&amp;quot;c&amp;quot;: 456, &amp;quot;b&amp;quot;: 789}

å¤„ç†è‡ªå·±çš„æ•°æ®ç±»å‹

jsonæ¨¡å—ä¸ä»…å¯ä»¥å¤„ç†æ™®é€šçš„pythonå†…ç½®ç±»å‹ï¼Œä¹Ÿå¯ä»¥å¤„ç†æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œè€Œå¾€å¾€å¤„ç†è‡ªå®šä¹‰çš„å¯¹è±¡æ˜¯å¾ˆå¸¸ç”¨çš„ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»Personã€‚

classPerson(object):

def__init__(self,name,age):

self.name=name

self.age=age

def__repr__(self):

return&#39;Person Object name : %s , age : %d&#39;%(self.name,self.age)

if__name__==&#39;__main__&#39;:

p=Person(&#39;Peter&#39;,22)

printp

å¦‚æœç›´æ¥é€šè¿‡json.dumpsæ–¹æ³•å¯¹Personçš„å®ä¾‹è¿›è¡Œå¤„ç†çš„è¯ï¼Œä¼šæŠ¥é”™ï¼Œå› ä¸ºjsonæ— æ³•æ”¯æŒè¿™æ ·çš„è‡ªåŠ¨è½¬åŒ–ã€‚é€šè¿‡ä¸Šé¢æ‰€æåˆ°çš„json

å’Œpythonçš„ç±»å‹è½¬åŒ–å¯¹ç…§è¡¨ï¼Œå¯ä»¥å‘ç°ï¼Œobjectç±»å‹æ˜¯å’Œdictç›¸å…³è”çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠæˆ‘ä»¬è‡ªå®šä¹‰çš„ç±»å‹è½¬åŒ–ä¸ºdictï¼Œç„¶åå†è¿›è¡Œå¤„ç†ã€‚è¿™

é‡Œï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ä½¿ç”¨ã€‚

æ–¹æ³•ä¸€ï¼šè‡ªå·±å†™è½¬åŒ–å‡½æ•°

&#39;&#39;&#39;

Created on 2011-12-14

@author: Peter

&#39;&#39;&#39;

importPerson

importjson

p=Person.Person(&#39;Peter&#39;,22)

defobject2dict(obj):

#convert object to a dict

d={}

d[&#39;__class__&#39;]=obj.__class__.__name__

d[&#39;__module__&#39;]=obj.__module__

d.update(obj.__dict__)

returnd

defdict2object(d):

#convert dict to object

if&#39;__class__&#39;ind:

class_name=d.pop(&#39;__class__&#39;)

module_name=d.pop(&#39;__module__&#39;)

module=__import__(module_name)

class_=getattr(module,class_name)

args=dict((key.encode(&#39;ascii&#39;), value)forkey, valueind.items())#get args

inst=class_(**args)#create new instance

else:

inst=d

returninst

d=object2dict(p)

printd

#{&#39;age&#39;: 22, &#39;__module__&#39;: &#39;Person&#39;, &#39;__class__&#39;: &#39;Person&#39;, &#39;name&#39;: &#39;Peter&#39;}

o=dict2object(d)

printtype(o),o

# Person Object name : Peter , age : 22

dump=json.dumps(p,default=object2dict)

printdump

#{&amp;quot;age&amp;quot;: 22, &amp;quot;__module__&amp;quot;: &amp;quot;Person&amp;quot;, &amp;quot;__class__&amp;quot;: &amp;quot;Person&amp;quot;, &amp;quot;name&amp;quot;: &amp;quot;Peter&amp;quot;}

load=json.loads(dump,object_hook=dict2object)

printload

#Person Object name : Peter , age : 22

ä¸Šé¢ä»£ç å·²ç»å†™çš„å¾ˆæ¸…æ¥šäº†ï¼Œå®è´¨å°±æ˜¯è‡ªå®šä¹‰objectç±»å‹å’Œdictç±»å‹è¿›è¡Œè½¬åŒ–ã€‚object2dictå‡½æ•°å°†å¯¹è±¡æ¨¡å—åã€ç±»åä»¥åŠ

__dict__å­˜å‚¨åœ¨dictå¯¹è±¡é‡Œï¼Œå¹¶è¿”å›ã€‚dict2objectå‡½æ•°åˆ™æ˜¯åè§£å‡ºæ¨¡å—åã€ç±»åã€å‚æ•°ï¼Œåˆ›å»ºæ–°çš„å¯¹è±¡å¹¶è¿”å›ã€‚åœ¨json.dumps

æ–¹æ³•ä¸­å¢åŠ defaultå‚æ•°ï¼Œè¯¥å‚æ•°è¡¨ç¤ºåœ¨è½¬åŒ–è¿‡ç¨‹ä¸­è°ƒç”¨æŒ‡å®šçš„å‡½æ•°ï¼ŒåŒæ ·åœ¨decodeè¿‡ç¨‹ä¸­json.loadsæ–¹æ³•å¢åŠ object_hook,

æŒ‡å®šè½¬åŒ–å‡½æ•°ã€‚

æ–¹æ³•äºŒï¼šç»§æ‰¿JSONEncoderå’ŒJSONDecoderç±»ï¼Œè¦†å†™ç›¸å…³æ–¹æ³•

JSONEncoderç±»è´Ÿè´£ç¼–ç ï¼Œä¸»è¦æ˜¯é€šè¿‡å…¶defaultå‡½æ•°è¿›è¡Œè½¬åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥overrideè¯¥æ–¹æ³•ã€‚åŒç†å¯¹äºJSONDecoderã€‚

&#39;&#39;&#39;

Created on 2011-12-14

@author: Peter

&#39;&#39;&#39;

importPerson

importjson

p=Person.Person(&#39;Peter&#39;,22)

classMyEncoder(json.JSONEncoder):

defdefault(self,obj):

#convert object to a dict

d={}

d[&#39;__class__&#39;]=obj.__class__.__name__

d[&#39;__module__&#39;]=obj.__module__

d.update(obj.__dict__)

returnd

classMyDecoder(json.JSONDecoder):

def__init__(self):

json.JSONDecoder.__init__(self,object_hook=self.dict2object)

defdict2object(self,d):

#convert dict to object

if&#39;__class__&#39;ind:

class_name=d.pop(&#39;__class__&#39;)

module_name=d.pop(&#39;__module__&#39;)

module=__import__(module_name)

class_=getattr(module,class_name)

args=dict((key.encode(&#39;ascii&#39;), value)forkey, valueind.items())#get args

inst=class_(**args)#create new instance

else:

inst=d

returninst

d=MyEncoder().encode(p)

o=MyDecoder().decode(d)

printd

printtype(o), o

å¯¹äºJSONDecoderç±»æ–¹æ³•ï¼Œç¨å¾®æœ‰ç‚¹ä¸åŒï¼Œä½†æ˜¯æ”¹å†™èµ·æ¥ä¹Ÿä¸æ˜¯å¾ˆéº»çƒ¦ã€‚çœ‹ä»£ç åº”è¯¥å°±æ¯”è¾ƒæ¸…æ¥šäº†ã€‚
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        
        <item>
            <title>Sphinx Makefile</title>
            <link>http://kooksee.github.io/blog/Sphinx%20Makefile/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/Sphinx%20Makefile/</guid>
            <description>&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# Makefile for Sphinx documentation
#

# You can set these variables from the command line.
SPHINXOPTS    ?=
SPHINXBUILD   ?= sphinx-build
PAPER         ?=
BUILDDIR      ?= _build
LANGUAGE      ?=

# Internal variables.
PAPEROPT_a4     = -D latex_paper_size=a4
PAPEROPT_letter = -D latex_paper_size=letter
ALLSPHINXOPTS   = -n -d $(BUILDDIR)/doctrees -D language=$(LANGUAGE) $(PAPEROPT_$(PAPER)) $(SPHINXOPTS) .
# the i18n builder cannot share the environment and doctrees with the others
I18NSPHINXOPTS  = $(PAPEROPT_$(PAPER)) $(SPHINXOPTS) .

.PHONY: help clean html dirhtml singlehtml pickle json htmlhelp qthelp devhelp epub latex latexpdf text man changes linkcheck doctest gettext

help:
    @echo &amp;quot;Please use \`make &amp;lt;target&amp;gt;&#39; where &amp;lt;target&amp;gt; is one of&amp;quot;
    @echo &amp;quot;  html       to make standalone HTML files&amp;quot;
    @echo &amp;quot;  dirhtml    to make HTML files named index.html in directories&amp;quot;
    @echo &amp;quot;  singlehtml to make a single large HTML file&amp;quot;
    @echo &amp;quot;  pickle     to make pickle files&amp;quot;
    @echo &amp;quot;  json       to make JSON files&amp;quot;
    @echo &amp;quot;  htmlhelp   to make HTML files and a HTML help project&amp;quot;
    @echo &amp;quot;  qthelp     to make HTML files and a qthelp project&amp;quot;
    @echo &amp;quot;  devhelp    to make HTML files and a Devhelp project&amp;quot;
    @echo &amp;quot;  epub       to make an epub&amp;quot;
    @echo &amp;quot;  latex      to make LaTeX files, you can set PAPER=a4 or PAPER=letter&amp;quot;
    @echo &amp;quot;  latexpdf   to make LaTeX files and run them through pdflatex&amp;quot;
    @echo &amp;quot;  text       to make text files&amp;quot;
    @echo &amp;quot;  man        to make manual pages&amp;quot;
    @echo &amp;quot;  texinfo    to make a Texinfo source file&amp;quot;
    @echo &amp;quot;  gettext    to make PO message catalogs&amp;quot;
    @echo &amp;quot;  changes    to make an overview of all changed/added/deprecated items&amp;quot;
    @echo &amp;quot;  linkcheck  to check all external links for integrity&amp;quot;
    @echo &amp;quot;  doctest    to run all doctests embedded in the documentation (if enabled)&amp;quot;

clean:
    -rm -rf $(BUILDDIR)/*

html:
    $(SPHINXBUILD) -b djangohtml $(ALLSPHINXOPTS) $(BUILDDIR)/html
    @echo
    @echo &amp;quot;Build finished. The HTML pages are in $(BUILDDIR)/html.&amp;quot;

dirhtml:
    $(SPHINXBUILD) -b dirhtml $(ALLSPHINXOPTS) $(BUILDDIR)/dirhtml
    @echo
    @echo &amp;quot;Build finished. The HTML pages are in $(BUILDDIR)/dirhtml.&amp;quot;

singlehtml:
    $(SPHINXBUILD) -b singlehtml $(ALLSPHINXOPTS) $(BUILDDIR)/singlehtml
    @echo
    @echo &amp;quot;Build finished. The HTML page is in $(BUILDDIR)/singlehtml.&amp;quot;

pickle:
    $(SPHINXBUILD) -b pickle $(ALLSPHINXOPTS) $(BUILDDIR)/pickle
    @echo
    @echo &amp;quot;Build finished; now you can process the pickle files.&amp;quot;

json:
    $(SPHINXBUILD) -b json $(ALLSPHINXOPTS) $(BUILDDIR)/json
    @echo
    @echo &amp;quot;Build finished; now you can process the JSON files.&amp;quot;

htmlhelp:
    $(SPHINXBUILD) -b htmlhelp $(ALLSPHINXOPTS) $(BUILDDIR)/htmlhelp
    @echo
    @echo &amp;quot;Build finished; now you can run HTML Help Workshop with the&amp;quot; \
          &amp;quot;.hhp project file in $(BUILDDIR)/htmlhelp.&amp;quot;

qthelp:
    $(SPHINXBUILD) -b qthelp $(ALLSPHINXOPTS) $(BUILDDIR)/qthelp
    @echo
    @echo &amp;quot;Build finished; now you can run &amp;quot;qcollectiongenerator&amp;quot; with the&amp;quot; \
          &amp;quot;.qhcp project file in $(BUILDDIR)/qthelp, like this:&amp;quot;
    @echo &amp;quot;# qcollectiongenerator $(BUILDDIR)/qthelp/django.qhcp&amp;quot;
    @echo &amp;quot;To view the help file:&amp;quot;
    @echo &amp;quot;# assistant -collectionFile $(BUILDDIR)/qthelp/django.qhc&amp;quot;

devhelp:
    $(SPHINXBUILD) -b devhelp $(ALLSPHINXOPTS) $(BUILDDIR)/devhelp
    @echo
    @echo &amp;quot;Build finished.&amp;quot;
    @echo &amp;quot;To view the help file:&amp;quot;
    @echo &amp;quot;# mkdir -p $$HOME/.local/share/devhelp/django&amp;quot;
    @echo &amp;quot;# ln -s $(BUILDDIR)/devhelp $$HOME/.local/share/devhelp/django&amp;quot;
    @echo &amp;quot;# devhelp&amp;quot;

epub:
    $(SPHINXBUILD) -b epub $(ALLSPHINXOPTS) $(BUILDDIR)/epub
    @echo
    @echo &amp;quot;Build finished. The epub file is in $(BUILDDIR)/epub.&amp;quot;

latex:
    $(SPHINXBUILD) -b latex $(ALLSPHINXOPTS) $(BUILDDIR)/latex
    @echo
    @echo &amp;quot;Build finished; the LaTeX files are in $(BUILDDIR)/latex.&amp;quot;
    @echo &amp;quot;Run \`make&#39; in that directory to run these through (pdf)latex&amp;quot; \
          &amp;quot;(use \`make latexpdf&#39; here to do that automatically).&amp;quot;

latexpdf:
    $(SPHINXBUILD) -b latex $(ALLSPHINXOPTS) $(BUILDDIR)/latex
    @echo &amp;quot;Running LaTeX files through pdflatex...&amp;quot;
    make -C $(BUILDDIR)/latex all-pdf
    @echo &amp;quot;pdflatex finished; the PDF files are in $(BUILDDIR)/latex.&amp;quot;

text:
    $(SPHINXBUILD) -b text $(ALLSPHINXOPTS) $(BUILDDIR)/text
    @echo
    @echo &amp;quot;Build finished. The text files are in $(BUILDDIR)/text.&amp;quot;

man:
    $(SPHINXBUILD) -b man $(ALLSPHINXOPTS) $(BUILDDIR)/man
    @echo
    @echo &amp;quot;Build finished. The manual pages are in $(BUILDDIR)/man.&amp;quot;

texinfo:
    $(SPHINXBUILD) -b texinfo $(ALLSPHINXOPTS) $(BUILDDIR)/texinfo
    @echo
    @echo &amp;quot;Build finished; the Texinfo files are in $(BUILDDIR)/texinfo.&amp;quot;

gettext:
    $(SPHINXBUILD) -b gettext $(I18NSPHINXOPTS) $(BUILDDIR)/locale
    @echo
    @echo &amp;quot;Build finished. The message catalogs are in $(BUILDDIR)/locale.&amp;quot;

changes:
    $(SPHINXBUILD) -b changes $(ALLSPHINXOPTS) $(BUILDDIR)/changes
    @echo
    @echo &amp;quot;The overview file is in $(BUILDDIR)/changes.&amp;quot;

linkcheck:
    $(SPHINXBUILD) -b linkcheck $(ALLSPHINXOPTS) $(BUILDDIR)/linkcheck
    @echo
    @echo &amp;quot;Link check complete; look for any errors in the above output &amp;quot; \
          &amp;quot;or in $(BUILDDIR)/linkcheck/output.txt.&amp;quot;

doctest:
    $(SPHINXBUILD) -b doctest $(ALLSPHINXOPTS) $(BUILDDIR)/doctest
    @echo &amp;quot;Testing of doctests in the sources finished, look at the &amp;quot; \
          &amp;quot;results in $(BUILDDIR)/doctest/output.txt.&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        
        <item>
            <title>UNICODE,GBK,UTF-8åŒºåˆ«</title>
            <link>http://kooksee.github.io/blog/UNICODE,GBK,UTF-8%E5%8C%BA%E5%88%AB/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/UNICODE,GBK,UTF-8%E5%8C%BA%E5%88%AB/</guid>
            <description>&lt;p&gt;[TOC]&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œunicodeï¼Œgbkå’Œå¤§äº”ç å°±æ˜¯ç¼–ç çš„å€¼ï¼Œè€Œutf-8,uft-16ä¹‹ç±»å°±æ˜¯è¿™ä¸ªå€¼çš„è¡¨ç°å½¢å¼ï¼è€Œå‰é¢é‚£ä¸‰ç§ç¼–ç æ˜¯ä¸€å…¼å®¹çš„ï¼ŒåŒä¸€ä¸ªæ±‰å­—ï¼Œé‚£ä¸‰ä¸ªç å€¼æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ï¼å¦‚ï¼‚æ±‰ï¼‚çš„uncodeå€¼ä¸gbkå°±æ˜¯ä¸ä¸€æ ·çš„ï¼Œå‡è®¾uncodeä¸ºa040ï¼Œgbkä¸ºb030ï¼Œè€Œuft-8ç ï¼Œå°±æ˜¯æŠŠé‚£ä¸ªå€¼è¡¨ç°çš„å½¢å¼ï¼utf-8ç å®Œå…¨åªé’ˆå¯¹uncodeæ¥ç»„ç»‡çš„ï¼Œå¦‚æœï¼§ï¼¢ï¼«è¦è½¬ï¼µï¼´ï¼¦ï¼ï¼˜å¿…é¡»å…ˆè½¬uncodeç ï¼Œå†è½¬utf-8å°±ï¼¯ï¼«äº†ï¼&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¯¦ç»†çš„å°±è§ä¸‹é¢è½¬çš„è¿™ç¯‡æ–‡ç« ï¼&lt;/p&gt;

&lt;p&gt;è°ˆè°ˆUnicodeç¼–ç ï¼Œç®€è¦è§£é‡ŠUCSã€UTFã€BMPã€BOMç­‰åè¯&lt;/p&gt;

&lt;p&gt;è¿™æ˜¯ä¸€ç¯‡ç¨‹åºå‘˜å†™ç»™ç¨‹åºå‘˜çš„è¶£å‘³è¯»ç‰©ã€‚æ‰€è°“è¶£å‘³æ˜¯æŒ‡å¯ä»¥æ¯”è¾ƒè½»æ¾åœ°äº†è§£ä¸€äº›åŸæ¥ä¸æ¸…æ¥šçš„æ¦‚å¿µï¼Œå¢è¿›çŸ¥è¯†ï¼Œç±»ä¼¼äºæ‰“RPGæ¸¸æˆçš„å‡çº§ã€‚æ•´ç†è¿™ç¯‡æ–‡ç« çš„åŠ¨æœºæ˜¯ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;

&lt;p&gt;é—®é¢˜ä¸€ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    ä½¿ç”¨Windowsè®°äº‹æœ¬çš„â€œå¦å­˜ä¸ºâ€ï¼Œå¯ä»¥åœ¨GBKã€Unicodeã€Unicode big endianå’ŒUTF-8è¿™å‡ ç§ç¼–ç æ–¹å¼é—´ç›¸äº’è½¬æ¢ã€‚åŒæ ·æ˜¯txtæ–‡ä»¶ï¼ŒWindowsæ˜¯æ€æ ·è¯†åˆ«ç¼–ç æ–¹å¼çš„å‘¢ï¼Ÿ

æˆ‘å¾ˆæ—©å‰å°±å‘ç°Unicodeã€Unicode big endianå’ŒUTF-8ç¼–ç çš„txtæ–‡ä»¶çš„å¼€å¤´ä¼šå¤šå‡ºå‡ ä¸ªå­—èŠ‚ï¼Œåˆ†åˆ«æ˜¯FFã€FEï¼ˆUnicodeï¼‰,FEã€FFï¼ˆUnicode big endianï¼‰,EFã€BBã€BFï¼ˆUTF-8ï¼‰ã€‚ä½†è¿™äº›æ ‡è®°æ˜¯åŸºäºä»€ä¹ˆæ ‡å‡†å‘¢ï¼Ÿ
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é—®é¢˜äºŒï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    æœ€è¿‘åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªConvertUTF.cï¼Œå®ç°äº†UTF-32ã€UTF-16å’ŒUTF-8è¿™ä¸‰ç§ç¼–ç æ–¹å¼çš„ç›¸äº’è½¬æ¢ã€‚å¯¹äºUnicode(UCS2)ã€GBKã€UTF-8è¿™äº›ç¼–ç æ–¹å¼ï¼Œæˆ‘åŸæ¥å°±äº†è§£ã€‚ä½†è¿™ä¸ªç¨‹åºè®©æˆ‘æœ‰äº›ç³Šæ¶‚ï¼Œæƒ³ä¸èµ·æ¥UTF-16å’ŒUCS2æœ‰ä»€ä¹ˆå…³ç³»ã€‚

æŸ¥äº†æŸ¥ç›¸å…³èµ„æ–™ï¼Œæ€»ç®—å°†è¿™äº›é—®é¢˜å¼„æ¸…æ¥šäº†ï¼Œé¡ºå¸¦ä¹Ÿäº†è§£äº†ä¸€äº›Unicodeçš„ç»†èŠ‚ã€‚å†™æˆä¸€ç¯‡æ–‡ç« ï¼Œé€ç»™æœ‰è¿‡ç±»ä¼¼ç–‘é—®çš„æœ‹å‹ã€‚æœ¬æ–‡åœ¨å†™ä½œæ—¶å°½é‡åšåˆ°é€šä¿—æ˜“æ‡‚ï¼Œä½†è¦æ±‚è¯»è€…çŸ¥é“ä»€ä¹ˆæ˜¯å­—èŠ‚ï¼Œä»€ä¹ˆæ˜¯åå…­è¿›åˆ¶ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##big endianå’Œlittle endian&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    big endianå’Œlittle endianæ˜¯CPUå¤„ç†å¤šå­—èŠ‚æ•°çš„ä¸åŒæ–¹å¼ã€‚ä¾‹å¦‚â€œæ±‰â€å­—çš„Unicodeç¼–ç æ˜¯6C49ã€‚é‚£ä¹ˆå†™åˆ°æ–‡ä»¶é‡Œæ—¶ï¼Œç©¶ç«Ÿæ˜¯å°†6Cå†™åœ¨å‰é¢ï¼Œè¿˜æ˜¯å°†49å†™åœ¨å‰é¢ï¼Ÿå¦‚æœå°†6Cå†™åœ¨å‰é¢ï¼Œå°±æ˜¯big endianã€‚å¦‚æœå°†49å†™åœ¨å‰é¢ï¼Œå°±æ˜¯little endianã€‚

â€œendianâ€è¿™ä¸ªè¯å‡ºè‡ªã€Šæ ¼åˆ—ä½›æ¸¸è®°ã€‹ã€‚å°äººå›½çš„å†…æˆ˜å°±æºäºåƒé¸¡è›‹æ—¶æ˜¯ç©¶ç«Ÿä»å¤§å¤´(Big-Endian)æ•²å¼€è¿˜æ˜¯ä»å°å¤´(Little-Endian)æ•²å¼€ï¼Œç”±æ­¤æ›¾å‘ç”Ÿè¿‡å…­æ¬¡å›ä¹±ï¼Œä¸€ä¸ªçš‡å¸é€äº†å‘½ï¼Œå¦ä¸€ä¸ªä¸¢äº†ç‹ä½ã€‚

æˆ‘ä»¬ä¸€èˆ¬å°†endianç¿»è¯‘æˆâ€œå­—èŠ‚åºâ€ï¼Œå°†big endianå’Œlittle endianç§°ä½œâ€œå¤§å°¾â€å’Œâ€œå°å°¾â€ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##å­—ç¬¦ç¼–ç ã€å†…ç ï¼Œé¡ºå¸¦ä»‹ç»æ±‰å­—ç¼–ç &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    å­—ç¬¦å¿…é¡»ç¼–ç åæ‰èƒ½è¢«è®¡ç®—æœºå¤„ç†ã€‚è®¡ç®—æœºä½¿ç”¨çš„ç¼ºçœç¼–ç æ–¹å¼å°±æ˜¯è®¡ç®—æœºçš„å†…ç ã€‚æ—©æœŸçš„è®¡ç®—æœºä½¿ç”¨7ä½çš„ASCIIç¼–ç ï¼Œä¸ºäº†å¤„ç†æ±‰å­—ï¼Œç¨‹åºå‘˜è®¾è®¡äº†ç”¨äºç®€ä½“ä¸­æ–‡çš„GB2312å’Œç”¨äºç¹ä½“ä¸­æ–‡çš„big5ã€‚

GB2312(1980å¹´)ä¸€å…±æ”¶å½•äº†7445ä¸ªå­—ç¬¦ï¼ŒåŒ…æ‹¬6763ä¸ªæ±‰å­—å’Œ682ä¸ªå…¶å®ƒç¬¦å·ã€‚æ±‰å­—åŒºçš„å†…ç èŒƒå›´é«˜å­—èŠ‚ä»B0-F7ï¼Œä½å­—èŠ‚ä»A1-FEï¼Œå ç”¨çš„ç ä½æ˜¯72*94=6768ã€‚å…¶ä¸­æœ‰5ä¸ªç©ºä½æ˜¯D7FA-D7FEã€‚

GB2312æ”¯æŒçš„æ±‰å­—å¤ªå°‘ã€‚1995å¹´çš„æ±‰å­—æ‰©å±•è§„èŒƒGBK1.0æ”¶å½•äº†21886ä¸ªç¬¦å·ï¼Œå®ƒåˆ†ä¸ºæ±‰å­—åŒºå’Œå›¾å½¢ç¬¦å·åŒºã€‚æ±‰å­—åŒºåŒ…æ‹¬21003ä¸ªå­—ç¬¦ã€‚

ä»ASCIIã€GB2312åˆ°GBKï¼Œè¿™äº›ç¼–ç æ–¹æ³•æ˜¯å‘ä¸‹å…¼å®¹çš„ï¼Œå³åŒä¸€ä¸ªå­—ç¬¦åœ¨è¿™äº›æ–¹æ¡ˆä¸­æ€»æ˜¯æœ‰ç›¸åŒçš„ç¼–ç ï¼Œåé¢çš„æ ‡å‡†æ”¯æŒæ›´å¤šçš„å­—ç¬¦ã€‚åœ¨è¿™äº›ç¼–ç ä¸­ï¼Œè‹±æ–‡å’Œä¸­æ–‡å¯ä»¥ç»Ÿä¸€åœ°å¤„ç†ã€‚åŒºåˆ†ä¸­æ–‡ç¼–ç çš„æ–¹æ³•æ˜¯é«˜å­—èŠ‚çš„æœ€é«˜ä½ä¸ä¸º0ã€‚æŒ‰ç…§ç¨‹åºå‘˜çš„ç§°å‘¼ï¼ŒGB2312ã€GBKéƒ½å±äºåŒå­—èŠ‚å­—ç¬¦é›† (DBCS)ã€‚

2000å¹´çš„GB18030æ˜¯å–ä»£GBK1.0çš„æ­£å¼å›½å®¶æ ‡å‡†ã€‚è¯¥æ ‡å‡†æ”¶å½•äº†27484ä¸ªæ±‰å­—ï¼ŒåŒæ—¶è¿˜æ”¶å½•äº†è—æ–‡ã€è’™æ–‡ã€ç»´å¾å°”æ–‡ç­‰ä¸»è¦çš„å°‘æ•°æ°‘æ—æ–‡å­—ã€‚ä»æ±‰å­—å­—æ±‡ä¸Šè¯´ï¼ŒGB18030åœ¨GB13000.1çš„20902ä¸ªæ±‰å­—çš„åŸºç¡€ä¸Šå¢åŠ äº†CJKæ‰©å±•Açš„6582ä¸ªæ±‰å­—ï¼ˆUnicodeç 0x3400-0x4db5ï¼‰ï¼Œä¸€å…±æ”¶å½•äº†27484ä¸ªæ±‰å­—ã€‚

CJKå°±æ˜¯ä¸­æ—¥éŸ©çš„æ„æ€ã€‚Unicodeä¸ºäº†èŠ‚çœç ä½ï¼Œå°†ä¸­æ—¥éŸ©ä¸‰å›½è¯­è¨€ä¸­çš„æ–‡å­—ç»Ÿä¸€ç¼–ç ã€‚GB13000.1å°±æ˜¯ISO/IEC 10646-1çš„ä¸­æ–‡ç‰ˆï¼Œç›¸å½“äºUnicode 1.1ã€‚

GB18030çš„ç¼–ç é‡‡ç”¨å•å­—èŠ‚ã€åŒå­—èŠ‚å’Œ4å­—èŠ‚æ–¹æ¡ˆã€‚å…¶ä¸­å•å­—èŠ‚ã€åŒå­—èŠ‚å’ŒGBKæ˜¯å®Œå…¨å…¼å®¹çš„ã€‚4å­—èŠ‚ç¼–ç çš„ç ä½å°±æ˜¯æ”¶å½•äº†CJKæ‰©å±•Açš„6582ä¸ªæ±‰å­—ã€‚ä¾‹å¦‚ï¼šUCSçš„0x3400åœ¨GB18030ä¸­çš„ç¼–ç åº”è¯¥æ˜¯8139EF30ï¼ŒUCSçš„0x3401åœ¨GB18030ä¸­çš„ç¼–ç åº”è¯¥æ˜¯8139EF31ã€‚

å¾®è½¯æä¾›äº†GB18030çš„å‡çº§åŒ…ï¼Œä½†è¿™ä¸ªå‡çº§åŒ…åªæ˜¯æä¾›äº†ä¸€å¥—æ”¯æŒCJKæ‰©å±•Açš„6582ä¸ªæ±‰å­—çš„æ–°å­—ä½“ï¼šæ–°å®‹ä½“-18030ï¼Œå¹¶ä¸æ”¹å˜å†…ç ã€‚Windows çš„å†…ç ä»ç„¶æ˜¯GBKã€‚

è¿™é‡Œè¿˜æœ‰ä¸€äº›ç»†èŠ‚ï¼š

GB2312çš„åŸæ–‡è¿˜æ˜¯åŒºä½ç ï¼Œä»åŒºä½ç åˆ°å†…ç ï¼Œéœ€è¦åœ¨é«˜å­—èŠ‚å’Œä½å­—èŠ‚ä¸Šåˆ†åˆ«åŠ ä¸ŠA0ã€‚

å¯¹äºä»»ä½•å­—ç¬¦ç¼–ç ï¼Œç¼–ç å•å…ƒçš„é¡ºåºæ˜¯ç”±ç¼–ç æ–¹æ¡ˆæŒ‡å®šçš„ï¼Œä¸endianæ— å…³ã€‚ä¾‹å¦‚GBKçš„ç¼–ç å•å…ƒæ˜¯å­—èŠ‚ï¼Œç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªæ±‰å­—ã€‚è¿™ä¸¤ä¸ªå­—èŠ‚çš„é¡ºåºæ˜¯å›ºå®šçš„ï¼Œä¸å—CPUå­—èŠ‚åºçš„å½±å“ã€‚UTF-16çš„ç¼–ç å•å…ƒæ˜¯wordï¼ˆåŒå­—èŠ‚ï¼‰ï¼Œwordä¹‹é—´çš„é¡ºåºæ˜¯ç¼–ç æ–¹æ¡ˆæŒ‡å®šçš„ï¼Œwordå†…éƒ¨çš„å­—èŠ‚æ’åˆ—æ‰ä¼šå—åˆ°endiançš„å½±å“ã€‚åé¢è¿˜ä¼šä»‹ç»UTF-16ã€‚

GB2312çš„ä¸¤ä¸ªå­—èŠ‚çš„æœ€é«˜ä½éƒ½æ˜¯1ã€‚ä½†ç¬¦åˆè¿™ä¸ªæ¡ä»¶çš„ç ä½åªæœ‰128*128=16384ä¸ªã€‚æ‰€ä»¥GBKå’ŒGB18030çš„ä½å­—èŠ‚æœ€é«˜ä½éƒ½å¯èƒ½ä¸æ˜¯1ã€‚ä¸è¿‡è¿™ä¸å½±å“DBCSå­—ç¬¦æµçš„è§£æï¼šåœ¨è¯»å–DBCSå­—ç¬¦æµæ—¶ï¼Œåªè¦é‡åˆ°é«˜ä½ä¸º1çš„å­—èŠ‚ï¼Œå°±å¯ä»¥å°†ä¸‹ä¸¤ä¸ªå­—èŠ‚ä½œä¸ºä¸€ä¸ªåŒå­—èŠ‚ç¼–ç ï¼Œè€Œä¸ç”¨ç®¡ä½å­—èŠ‚çš„é«˜ä½æ˜¯ä»€ä¹ˆã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##Unicodeã€UCSå’ŒUTF&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    å‰é¢æåˆ°ä»ASCIIã€GB2312ã€GBKåˆ°GB18030çš„ç¼–ç æ–¹æ³•æ˜¯å‘ä¸‹å…¼å®¹çš„ã€‚è€ŒUnicodeåªä¸ASCIIå…¼å®¹ï¼ˆæ›´å‡†ç¡®åœ°è¯´ï¼Œæ˜¯ä¸ISO-8859-1å…¼å®¹ï¼‰ï¼Œä¸GBç ä¸å…¼å®¹ã€‚ä¾‹å¦‚â€œæ±‰â€å­—çš„Unicodeç¼–ç æ˜¯6C49ï¼Œè€ŒGBç æ˜¯BABAã€‚

Unicodeä¹Ÿæ˜¯ä¸€ç§å­—ç¬¦ç¼–ç æ–¹æ³•ï¼Œä¸è¿‡å®ƒæ˜¯ç”±å›½é™…ç»„ç»‡è®¾è®¡ï¼Œå¯ä»¥å®¹çº³å…¨ä¸–ç•Œæ‰€æœ‰è¯­è¨€æ–‡å­—çš„ç¼–ç æ–¹æ¡ˆã€‚Unicodeçš„å­¦åæ˜¯&amp;quot;Universal Multiple-Octet Coded Character Set&amp;quot;ï¼Œç®€ç§°ä¸ºUCSã€‚UCSå¯ä»¥çœ‹ä½œæ˜¯&amp;quot;Unicode Character Set&amp;quot;çš„ç¼©å†™ã€‚

æ ¹æ®ç»´åŸºç™¾ç§‘å…¨ä¹¦(http://zh.wikipedia.org/wiki/)çš„è®°è½½ï¼šå†å²ä¸Šå­˜åœ¨ä¸¤ä¸ªè¯•å›¾ç‹¬ç«‹è®¾è®¡Unicodeçš„ç»„ç»‡ï¼Œå³å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰å’Œä¸€ä¸ªè½¯ä»¶åˆ¶é€ å•†çš„åä¼šï¼ˆunicode.orgï¼‰ã€‚ISOå¼€å‘äº†ISO 10646é¡¹ç›®ï¼ŒUnicodeåä¼šå¼€å‘äº†Unicodeé¡¹ç›®ã€‚

åœ¨1991å¹´å‰åï¼ŒåŒæ–¹éƒ½è®¤è¯†åˆ°ä¸–ç•Œä¸éœ€è¦ä¸¤ä¸ªä¸å…¼å®¹çš„å­—ç¬¦é›†ã€‚äºæ˜¯å®ƒä»¬å¼€å§‹åˆå¹¶åŒæ–¹çš„å·¥ä½œæˆæœï¼Œå¹¶ä¸ºåˆ›ç«‹ä¸€ä¸ªå•ä¸€ç¼–ç è¡¨è€ŒååŒå·¥ä½œã€‚ä»Unicode2.0å¼€å§‹ï¼ŒUnicodeé¡¹ç›®é‡‡ç”¨äº†ä¸ISO 10646-1ç›¸åŒçš„å­—åº“å’Œå­—ç ã€‚

ç›®å‰ä¸¤ä¸ªé¡¹ç›®ä»éƒ½å­˜åœ¨ï¼Œå¹¶ç‹¬ç«‹åœ°å…¬å¸ƒå„è‡ªçš„æ ‡å‡†ã€‚Unicodeåä¼šç°åœ¨çš„æœ€æ–°ç‰ˆæœ¬æ˜¯2005å¹´çš„Unicode 4.1.0ã€‚ISOçš„æœ€æ–°æ ‡å‡†æ˜¯ISO 10646-3:2003ã€‚

UCSåªæ˜¯è§„å®šå¦‚ä½•ç¼–ç ï¼Œå¹¶æ²¡æœ‰è§„å®šå¦‚ä½•ä¼ è¾“ã€ä¿å­˜è¿™ä¸ªç¼–ç ã€‚ä¾‹å¦‚â€œæ±‰â€å­—çš„UCSç¼–ç æ˜¯6C49ï¼Œæˆ‘å¯ä»¥ç”¨4ä¸ªasciiæ•°å­—æ¥ä¼ è¾“ã€ä¿å­˜è¿™ä¸ªç¼–ç ï¼›ä¹Ÿå¯ä»¥ç”¨utf-8ç¼–ç :3ä¸ªè¿ç»­çš„å­—èŠ‚E6 B1 89æ¥è¡¨ç¤ºå®ƒã€‚å…³é”®åœ¨äºé€šä¿¡åŒæ–¹éƒ½è¦è®¤å¯ã€‚UTF-8ã€UTF-7ã€UTF-16éƒ½æ˜¯è¢«å¹¿æ³›æ¥å—çš„æ–¹æ¡ˆã€‚UTF-8çš„ä¸€ä¸ªç‰¹åˆ«çš„å¥½å¤„æ˜¯å®ƒä¸ISO-8859-1å®Œå…¨å…¼å®¹ã€‚UTFæ˜¯â€œUCS Transformation Formatâ€çš„ç¼©å†™ã€‚

IETFçš„RFC2781å’ŒRFC3629ä»¥RFCçš„ä¸€è´¯é£æ ¼ï¼Œæ¸…æ™°ã€æ˜å¿«åˆä¸å¤±ä¸¥è°¨åœ°æè¿°äº†UTF-16å’ŒUTF-8çš„ç¼–ç æ–¹æ³•ã€‚æˆ‘æ€»æ˜¯è®°ä¸å¾—IETFæ˜¯Internet Engineering Task Forceçš„ç¼©å†™ã€‚ä½†IETFè´Ÿè´£ç»´æŠ¤çš„RFCæ˜¯Internetä¸Šä¸€åˆ‡è§„èŒƒçš„åŸºç¡€ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;###å†…ç å’Œcode page&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    ç›®å‰Windowsçš„å†…æ ¸å·²ç»æ”¯æŒUnicodeå­—ç¬¦é›†ï¼Œè¿™æ ·åœ¨å†…æ ¸ä¸Šå¯ä»¥æ”¯æŒå…¨ä¸–ç•Œæ‰€æœ‰çš„è¯­è¨€æ–‡å­—ã€‚ä½†æ˜¯ç”±äºç°æœ‰çš„å¤§é‡ç¨‹åºå’Œæ–‡æ¡£éƒ½é‡‡ç”¨äº†æŸç§ç‰¹å®šè¯­è¨€çš„ç¼–ç ï¼Œä¾‹å¦‚GBKï¼ŒWindowsä¸å¯èƒ½ä¸æ”¯æŒç°æœ‰çš„ç¼–ç ï¼Œè€Œå…¨éƒ¨æ”¹ç”¨Unicodeã€‚

Windowsä½¿ç”¨ä»£ç é¡µ(code page)æ¥é€‚åº”å„ä¸ªå›½å®¶å’Œåœ°åŒºã€‚code pageå¯ä»¥è¢«ç†è§£ä¸ºå‰é¢æåˆ°çš„å†…ç ã€‚GBKå¯¹åº”çš„code pageæ˜¯CP936ã€‚

å¾®è½¯ä¹Ÿä¸ºGB18030å®šä¹‰äº†code pageï¼šCP54936ã€‚ä½†æ˜¯ç”±äºGB18030æœ‰ä¸€éƒ¨åˆ†4å­—èŠ‚ç¼–ç ï¼Œè€ŒWindowsçš„ä»£ç é¡µåªæ”¯æŒå•å­—èŠ‚å’ŒåŒå­—èŠ‚ç¼–ç ï¼Œæ‰€ä»¥è¿™ä¸ªcode pageæ˜¯æ— æ³•çœŸæ­£ä½¿ç”¨çš„ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##UCS-2ã€UCS-4ã€BMP&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    UCSæœ‰ä¸¤ç§æ ¼å¼ï¼šUCS-2å’ŒUCS-4ã€‚é¡¾åæ€ä¹‰ï¼ŒUCS-2å°±æ˜¯ç”¨ä¸¤ä¸ªå­—èŠ‚ç¼–ç ï¼ŒUCS-4å°±æ˜¯ç”¨4ä¸ªå­—èŠ‚ï¼ˆå®é™…ä¸Šåªç”¨äº†31ä½ï¼Œæœ€é«˜ä½å¿…é¡»ä¸º0ï¼‰ç¼–ç ã€‚ä¸‹é¢è®©æˆ‘ä»¬åšä¸€äº›ç®€å•çš„æ•°å­¦æ¸¸æˆï¼š

UCS-2æœ‰2^16=65536ä¸ªç ä½ï¼ŒUCS-4æœ‰2^31=2147483648ä¸ªç ä½ã€‚

UCS-4æ ¹æ®æœ€é«˜ä½ä¸º0çš„æœ€é«˜å­—èŠ‚åˆ†æˆ2^7=128ä¸ªgroupã€‚æ¯ä¸ªgroupå†æ ¹æ®æ¬¡é«˜å­—èŠ‚åˆ†ä¸º256ä¸ªplaneã€‚æ¯ä¸ªplaneæ ¹æ®ç¬¬3ä¸ªå­—èŠ‚åˆ†ä¸º256è¡Œ (rows)ï¼Œæ¯è¡ŒåŒ…å«256ä¸ªcellsã€‚å½“ç„¶åŒä¸€è¡Œçš„cellsåªæ˜¯æœ€åä¸€ä¸ªå­—èŠ‚ä¸åŒï¼Œå…¶ä½™éƒ½ç›¸åŒã€‚

group 0çš„plane 0è¢«ç§°ä½œBasic Multilingual Plane, å³BMPã€‚æˆ–è€…è¯´UCS-4ä¸­ï¼Œé«˜ä¸¤ä¸ªå­—èŠ‚ä¸º0çš„ç ä½è¢«ç§°ä½œBMPã€‚

å°†UCS-4çš„BMPå»æ‰å‰é¢çš„ä¸¤ä¸ªé›¶å­—èŠ‚å°±å¾—åˆ°äº†UCS-2ã€‚åœ¨UCS-2çš„ä¸¤ä¸ªå­—èŠ‚å‰åŠ ä¸Šä¸¤ä¸ªé›¶å­—èŠ‚ï¼Œå°±å¾—åˆ°äº†UCS-4çš„BMPã€‚è€Œç›®å‰çš„UCS-4è§„èŒƒä¸­è¿˜æ²¡æœ‰ä»»ä½•å­—ç¬¦è¢«åˆ†é…åœ¨BMPä¹‹å¤–ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##UTFç¼–ç &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;UTF-8å°±æ˜¯ä»¥8ä½ä¸ºå•å…ƒå¯¹UCSè¿›è¡Œç¼–ç ã€‚ä»UCS-2åˆ°UTF-8çš„ç¼–ç æ–¹å¼å¦‚ä¸‹ï¼š

UCS-2ç¼–ç (16è¿›åˆ¶) UTF-8 å­—èŠ‚æµ(äºŒè¿›åˆ¶)

0000 - 007F 0xxxxxxx

0080 - 07FF 110xxxxx 10xxxxxx

0800 - FFFF 1110xxxx 10xxxxxx 10xxxxxx

ä¾‹å¦‚â€œæ±‰â€å­—çš„Unicodeç¼–ç æ˜¯6C49ã€‚6C49åœ¨0800-FFFFä¹‹é—´ï¼Œæ‰€ä»¥è‚¯å®šè¦ç”¨3å­—èŠ‚æ¨¡æ¿äº†ï¼š1110xxxx 10xxxxxx 10xxxxxxã€‚å°†6C49å†™æˆäºŒè¿›åˆ¶æ˜¯ï¼š0110 110001 001001ï¼Œç”¨è¿™ä¸ªæ¯”ç‰¹æµä¾æ¬¡ä»£æ›¿æ¨¡æ¿ä¸­çš„xï¼Œå¾—åˆ°ï¼š11100110 10110001 10001001ï¼Œå³E6 B1 89ã€‚

è¯»è€…å¯ä»¥ç”¨è®°äº‹æœ¬æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„ç¼–ç æ˜¯å¦æ­£ç¡®ã€‚éœ€è¦æ³¨æ„ï¼ŒUltraEditåœ¨æ‰“å¼€utf-8ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶æ—¶ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºUTF-16ï¼Œå¯èƒ½äº§ç”Ÿæ··æ·†ã€‚ä½ å¯ä»¥åœ¨è®¾ç½®ä¸­å…³æ‰è¿™ä¸ªé€‰é¡¹ã€‚æ›´å¥½çš„å·¥å…·æ˜¯Hex Workshopã€‚

UTF-16ä»¥16ä½ä¸ºå•å…ƒå¯¹UCSè¿›è¡Œç¼–ç ã€‚å¯¹äºå°äº0x10000çš„UCSç ï¼ŒUTF-16ç¼–ç å°±ç­‰äºUCSç å¯¹åº”çš„16ä½æ— ç¬¦å·æ•´æ•°ã€‚å¯¹äºä¸å°äº0x10000çš„UCSç ï¼Œå®šä¹‰äº†ä¸€ä¸ªç®—æ³•ã€‚ä¸è¿‡ç”±äºå®é™…ä½¿ç”¨çš„UCS2ï¼Œæˆ–è€…UCS4çš„BMPå¿…ç„¶å°äº0x10000ï¼Œæ‰€ä»¥å°±ç›®å‰è€Œè¨€ï¼Œå¯ä»¥è®¤ä¸ºUTF-16å’ŒUCS-2åŸºæœ¬ç›¸åŒã€‚ä½†UCS-2åªæ˜¯ä¸€ä¸ªç¼–ç æ–¹æ¡ˆï¼ŒUTF-16å´è¦ç”¨äºå®é™…çš„ä¼ è¾“ï¼Œæ‰€ä»¥å°±ä¸å¾—ä¸è€ƒè™‘å­—èŠ‚åºçš„é—®é¢˜ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##UTFçš„å­—èŠ‚åºå’ŒBOM&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    UTF-8ä»¥å­—èŠ‚ä¸ºç¼–ç å•å…ƒï¼Œæ²¡æœ‰å­—èŠ‚åºçš„é—®é¢˜ã€‚UTF-16ä»¥ä¸¤ä¸ªå­—èŠ‚ä¸ºç¼–ç å•å…ƒï¼Œåœ¨è§£é‡Šä¸€ä¸ªUTF-16æ–‡æœ¬å‰ï¼Œé¦–å…ˆè¦å¼„æ¸…æ¥šæ¯ä¸ªç¼–ç å•å…ƒçš„å­—èŠ‚åºã€‚ä¾‹å¦‚â€œå¥â€çš„Unicodeç¼–ç æ˜¯594Eï¼Œâ€œä¹™â€çš„Unicodeç¼–ç æ˜¯4E59ã€‚å¦‚æœæˆ‘ä»¬æ”¶åˆ°UTF-16å­—èŠ‚æµâ€œ594Eâ€ï¼Œé‚£ä¹ˆè¿™æ˜¯â€œå¥â€è¿˜æ˜¯â€œä¹™â€ï¼Ÿ

Unicodeè§„èŒƒä¸­æ¨èçš„æ ‡è®°å­—èŠ‚é¡ºåºçš„æ–¹æ³•æ˜¯BOMã€‚BOMä¸æ˜¯â€œBill Of Materialâ€çš„BOMè¡¨ï¼Œè€Œæ˜¯Byte order Markã€‚BOMæ˜¯ä¸€ä¸ªæœ‰ç‚¹å°èªæ˜çš„æƒ³æ³•ï¼š

åœ¨UCSç¼–ç ä¸­æœ‰ä¸€ä¸ªå«åš&amp;quot;ZERO WIDTH NO-BREAK SPACE&amp;quot;çš„å­—ç¬¦ï¼Œå®ƒçš„ç¼–ç æ˜¯FEFFã€‚è€ŒFFFEåœ¨UCSä¸­æ˜¯ä¸å­˜åœ¨çš„å­—ç¬¦ï¼Œæ‰€ä»¥ä¸åº”è¯¥å‡ºç°åœ¨å®é™…ä¼ è¾“ä¸­ã€‚UCSè§„èŒƒå»ºè®®æˆ‘ä»¬åœ¨ä¼ è¾“å­—èŠ‚æµå‰ï¼Œå…ˆä¼ è¾“å­—ç¬¦&amp;quot;ZERO WIDTH NO-BREAK SPACE&amp;quot;ã€‚

è¿™æ ·å¦‚æœæ¥æ”¶è€…æ”¶åˆ°FEFFï¼Œå°±è¡¨æ˜è¿™ä¸ªå­—èŠ‚æµæ˜¯Big-Endiançš„ï¼›å¦‚æœæ”¶åˆ°FFFEï¼Œå°±è¡¨æ˜è¿™ä¸ªå­—èŠ‚æµæ˜¯Little-Endiançš„ã€‚å› æ­¤å­—ç¬¦&amp;quot;ZERO WIDTH NO-BREAK SPACE&amp;quot;åˆè¢«ç§°ä½œBOMã€‚

UTF-8ä¸éœ€è¦BOMæ¥è¡¨æ˜å­—èŠ‚é¡ºåºï¼Œä½†å¯ä»¥ç”¨BOMæ¥è¡¨æ˜ç¼–ç æ–¹å¼ã€‚å­—ç¬¦&amp;quot;ZERO WIDTH NO-BREAK SPACE&amp;quot;çš„UTF-8ç¼–ç æ˜¯EF BB BFï¼ˆè¯»è€…å¯ä»¥ç”¨æˆ‘ä»¬å‰é¢ä»‹ç»çš„ç¼–ç æ–¹æ³•éªŒè¯ä¸€ä¸‹ï¼‰ã€‚æ‰€ä»¥å¦‚æœæ¥æ”¶è€…æ”¶åˆ°ä»¥EF BB BFå¼€å¤´çš„å­—èŠ‚æµï¼Œå°±çŸ¥é“è¿™æ˜¯UTF-8ç¼–ç äº†ã€‚

Windowså°±æ˜¯ä½¿ç”¨BOMæ¥æ ‡è®°æ–‡æœ¬æ–‡ä»¶çš„ç¼–ç æ–¹å¼çš„ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;##è¿›ä¸€æ­¥çš„å‚è€ƒèµ„æ–™&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    æœ¬æ–‡ä¸»è¦å‚è€ƒçš„èµ„æ–™æ˜¯ &amp;quot;Short overview of ISO-IEC 10646 and Unicode&amp;quot; (http://www.nada.kth.se/i18n/ucs/unicode-iso10646-oview.html)ã€‚

æˆ‘è¿˜æ‰¾äº†ä¸¤ç¯‡çœ‹ä¸Šå»ä¸é”™çš„èµ„æ–™ï¼Œä¸è¿‡å› ä¸ºæˆ‘å¼€å§‹çš„ç–‘é—®éƒ½æ‰¾åˆ°äº†ç­”æ¡ˆï¼Œæ‰€ä»¥å°±æ²¡æœ‰çœ‹ï¼š

&amp;quot;Understanding Unicode A general introduction to the Unicode Standard&amp;quot; (http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;amp;item_id=IWS-Chapter04a)

&amp;quot;Character set encoding basics Understanding character set encodings and legacy encodings&amp;quot; (http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;amp;item_id=IWS-Chapter03)

æˆ‘å†™è¿‡UTF-8ã€UCS-2ã€GBKç›¸äº’è½¬æ¢çš„è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬ä½¿ç”¨Windows APIå’Œä¸ä½¿ç”¨Windows APIçš„ç‰ˆæœ¬ã€‚ä»¥åæœ‰æ—¶é—´çš„è¯ï¼Œæˆ‘ä¼šæ•´ç†ä¸€ä¸‹æ”¾åˆ°æˆ‘çš„ä¸ªäººä¸»é¡µä¸Š(http://fmddlmyy.home4u.china.com)ã€‚

æˆ‘æ˜¯æƒ³æ¸…æ¥šæ‰€æœ‰é—®é¢˜åæ‰å¼€å§‹å†™è¿™ç¯‡æ–‡ç« çš„ï¼ŒåŸä»¥ä¸ºä¸€ä¼šå„¿å°±èƒ½å†™å¥½ã€‚æ²¡æƒ³åˆ°è€ƒè™‘æªè¾å’ŒæŸ¥è¯ç»†èŠ‚èŠ±è´¹äº†å¾ˆé•¿æ—¶é—´ï¼Œç«Ÿç„¶ä»ä¸‹åˆ1:30å†™åˆ°9:00ã€‚å¸Œæœ›æœ‰è¯»è€…èƒ½ä»ä¸­å—ç›Šã€‚

é™„å½•1 å†è¯´è¯´åŒºä½ç ã€GB2312ã€å†…ç å’Œä»£ç é¡µ

æœ‰çš„æœ‹å‹å¯¹æ–‡ç« ä¸­è¿™å¥è¯è¿˜æœ‰ç–‘é—®ï¼š

â€œGB2312çš„åŸæ–‡è¿˜æ˜¯åŒºä½ç ï¼Œä»åŒºä½ç åˆ°å†…ç ï¼Œéœ€è¦åœ¨é«˜å­—èŠ‚å’Œä½å­—èŠ‚ä¸Šåˆ†åˆ«åŠ ä¸ŠA0ã€‚â€

æˆ‘å†è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š

â€œGB2312çš„åŸæ–‡â€æ˜¯æŒ‡å›½å®¶1980å¹´çš„ä¸€ä¸ªæ ‡å‡†ã€Šä¸­åäººæ°‘å…±å’Œå›½å›½å®¶æ ‡å‡†ä¿¡æ¯äº¤æ¢ç”¨æ±‰å­—ç¼–ç å­—ç¬¦é›† åŸºæœ¬é›† GB 2312-80ã€‹ã€‚è¿™ä¸ªæ ‡å‡†ç”¨ä¸¤ä¸ªæ•°æ¥ç¼–ç æ±‰å­—å’Œä¸­æ–‡ç¬¦å·ã€‚ç¬¬ä¸€ä¸ªæ•°ç§°ä¸ºâ€œåŒºâ€ï¼Œç¬¬äºŒä¸ªæ•°ç§°ä¸ºâ€œä½â€ã€‚æ‰€ä»¥ä¹Ÿç§°ä¸ºåŒºä½ç ã€‚1-9åŒºæ˜¯ä¸­æ–‡ç¬¦å·ï¼Œ16-55åŒºæ˜¯ä¸€çº§æ±‰å­—ï¼Œ56-87åŒºæ˜¯äºŒçº§æ±‰å­—ã€‚ç°åœ¨Windowsä¹Ÿè¿˜æœ‰åŒºä½è¾“å…¥æ³•ï¼Œä¾‹å¦‚è¾“å…¥1601å¾—åˆ°â€œå•Šâ€ã€‚ï¼ˆè¿™ä¸ªåŒºä½è¾“å…¥æ³•å¯ä»¥è‡ªåŠ¨è¯†åˆ«16è¿›åˆ¶çš„GB2312å’Œ10è¿›åˆ¶çš„åŒºä½ç ï¼Œä¹Ÿå°±æ˜¯è¯´è¾“å…¥B0A1åŒæ ·ä¼šå¾—åˆ°â€œå•Šâ€ã€‚ï¼‰

å†…ç æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå†…éƒ¨çš„å­—ç¬¦ç¼–ç ã€‚æ—©æœŸæ“ä½œç³»ç»Ÿçš„å†…ç æ˜¯ä¸è¯­è¨€ç›¸å…³çš„ã€‚ç°åœ¨çš„Windowsåœ¨ç³»ç»Ÿå†…éƒ¨æ”¯æŒUnicodeï¼Œç„¶åç”¨ä»£ç é¡µé€‚åº”å„ç§è¯­è¨€ï¼Œâ€œå†…ç â€çš„æ¦‚å¿µå°±æ¯”è¾ƒæ¨¡ç³Šäº†ã€‚å¾®è½¯ä¸€èˆ¬å°†ç¼ºçœä»£ç é¡µæŒ‡å®šçš„ç¼–ç è¯´æˆæ˜¯å†…ç ã€‚

å†…ç è¿™ä¸ªè¯æ±‡ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå®˜æ–¹çš„å®šä¹‰ï¼Œä»£ç é¡µä¹Ÿåªæ˜¯å¾®è½¯è¿™ä¸ªå…¬å¸çš„å«æ³•ã€‚ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬åªè¦çŸ¥é“å®ƒä»¬æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œæ²¡æœ‰å¿…è¦è¿‡å¤šåœ°è€ƒè¯è¿™äº›åè¯ã€‚

æ‰€è°“ä»£ç é¡µ(code page)å°±æ˜¯é’ˆå¯¹ä¸€ç§è¯­è¨€æ–‡å­—çš„å­—ç¬¦ç¼–ç ã€‚ä¾‹å¦‚GBKçš„code pageæ˜¯CP936ï¼ŒBIG5çš„code pageæ˜¯CP950ï¼ŒGB2312çš„code pageæ˜¯CP20936ã€‚

Windowsä¸­æœ‰ç¼ºçœä»£ç é¡µçš„æ¦‚å¿µï¼Œå³ç¼ºçœç”¨ä»€ä¹ˆç¼–ç æ¥è§£é‡Šå­—ç¬¦ã€‚ä¾‹å¦‚Windowsçš„è®°äº‹æœ¬æ‰“å¼€äº†ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹æ˜¯å­—èŠ‚æµï¼šBAã€BAã€D7ã€D6ã€‚Windowsåº”è¯¥å»æ€ä¹ˆè§£é‡Šå®ƒå‘¢ï¼Ÿ

æ˜¯æŒ‰ç…§Unicodeç¼–ç è§£é‡Šã€è¿˜æ˜¯æŒ‰ç…§GBKè§£é‡Šã€è¿˜æ˜¯æŒ‰ç…§BIG5è§£é‡Šï¼Œè¿˜æ˜¯æŒ‰ç…§ISO8859-1å»è§£é‡Šï¼Ÿå¦‚æœæŒ‰GBKå»è§£é‡Šï¼Œå°±ä¼šå¾—åˆ°â€œæ±‰å­—â€ä¸¤ä¸ªå­—ã€‚æŒ‰ç…§å…¶å®ƒç¼–ç è§£é‡Šï¼Œå¯èƒ½æ‰¾ä¸åˆ°å¯¹åº”çš„å­—ç¬¦ï¼Œä¹Ÿå¯èƒ½æ‰¾åˆ°é”™è¯¯çš„å­—ç¬¦ã€‚æ‰€è°“â€œé”™è¯¯â€æ˜¯æŒ‡ä¸æ–‡æœ¬ä½œè€…çš„æœ¬æ„ä¸ç¬¦ï¼Œè¿™æ—¶å°±äº§ç”Ÿäº†ä¹±ç ã€‚

ç­”æ¡ˆæ˜¯WindowsæŒ‰ç…§å½“å‰çš„ç¼ºçœä»£ç é¡µå»è§£é‡Šæ–‡æœ¬æ–‡ä»¶é‡Œçš„å­—èŠ‚æµã€‚ç¼ºçœä»£ç é¡µå¯ä»¥é€šè¿‡æ§åˆ¶é¢æ¿çš„åŒºåŸŸé€‰é¡¹è®¾ç½®ã€‚è®°äº‹æœ¬çš„å¦å­˜ä¸ºä¸­æœ‰ä¸€é¡¹ANSIï¼Œå…¶å®å°±æ˜¯æŒ‰ç…§ç¼ºçœä»£ç é¡µçš„ç¼–ç æ–¹æ³•ä¿å­˜ã€‚

Windowsçš„å†…ç æ˜¯Unicodeï¼Œå®ƒåœ¨æŠ€æœ¯ä¸Šå¯ä»¥åŒæ—¶æ”¯æŒå¤šä¸ªä»£ç é¡µã€‚åªè¦æ–‡ä»¶èƒ½è¯´æ˜è‡ªå·±ä½¿ç”¨ä»€ä¹ˆç¼–ç ï¼Œç”¨æˆ·åˆå®‰è£…äº†å¯¹åº”çš„ä»£ç é¡µï¼ŒWindowså°±èƒ½æ­£ç¡®æ˜¾ç¤ºï¼Œä¾‹å¦‚åœ¨HTMLæ–‡ä»¶ä¸­å°±å¯ä»¥æŒ‡å®šcharsetã€‚

æœ‰çš„HTMLæ–‡ä»¶ä½œè€…ï¼Œç‰¹åˆ«æ˜¯è‹±æ–‡ä½œè€…ï¼Œè®¤ä¸ºä¸–ç•Œä¸Šæ‰€æœ‰äººéƒ½ä½¿ç”¨è‹±æ–‡ï¼Œåœ¨æ–‡ä»¶ä¸­ä¸æŒ‡å®šcharsetã€‚å¦‚æœä»–ä½¿ç”¨äº†0x80-0xffä¹‹é—´çš„å­—ç¬¦ï¼Œä¸­æ–‡WindowsåˆæŒ‰ç…§ç¼ºçœçš„GBKå»è§£é‡Šï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚è¿™æ—¶åªè¦åœ¨è¿™ä¸ªhtmlæ–‡ä»¶ä¸­åŠ ä¸ŠæŒ‡å®šcharsetçš„è¯­å¥ï¼Œä¾‹å¦‚ï¼š

å¦‚æœåŸä½œè€…ä½¿ç”¨çš„ä»£ç é¡µå’ŒISO8859-1å…¼å®¹ï¼Œå°±ä¸ä¼šå‡ºç°ä¹±ç äº†ã€‚

å†è¯´åŒºä½ç ï¼Œå•Šçš„åŒºä½ç æ˜¯1601ï¼Œå†™æˆ16è¿›åˆ¶æ˜¯0x10,0x01ã€‚è¿™å’Œè®¡ç®—æœºå¹¿æ³›ä½¿ç”¨çš„ASCIIç¼–ç å†²çªã€‚ä¸ºäº†å…¼å®¹00-7fçš„ASCIIç¼–ç ï¼Œæˆ‘ä»¬åœ¨åŒºä½ç çš„é«˜ã€ä½å­—èŠ‚ä¸Šåˆ†åˆ«åŠ ä¸ŠA0ã€‚è¿™æ ·â€œå•Šâ€çš„ç¼–ç å°±æˆä¸ºB0A1ã€‚æˆ‘ä»¬å°†åŠ è¿‡ä¸¤ä¸ªA0çš„ç¼–ç ä¹Ÿç§°ä¸ºGB2312ç¼–ç ï¼Œè™½ç„¶GB2312çš„åŸæ–‡æ ¹æœ¬æ²¡æåˆ°è¿™ä¸€ç‚¹ã€‚


å…³äºç¼–ç ï¼Œè¿™ç¯‡æ–‡ç« è¶³çŸ£ï¼Œè°¢è°¢ç¥¥é¾™ä¹‹å­ï¼Œhttp://www.cnblogs.com/cy163/archive/2007/05/31/766886.html
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        
        <item>
            <title>Ubuntuä¸‹å®‰è£…PyV8</title>
            <link>http://kooksee.github.io/blog/Ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85PyV8/</link>
            <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
            <author>CoderZh</author>
            <guid>http://kooksee.github.io/blog/Ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85PyV8/</guid>
            <description>&lt;blockquote&gt;
&lt;p&gt;æŠ˜è…¾ä¸€ä¸‹åˆç»ˆäºå¼„å¥½PyV8å¼•æ“,è§£æJSæ–¹ä¾¿å¤šäº†.
å…³é”®: PyV8ä¾èµ–äºBoost,æ‰€ä»¥å®‰è£…å‰å…ˆç¡®å®šä½ çš„Linuxæœ‰æ²¡æœ‰Boost(å°±å› ä¸ºè¿™ä¸ªæŠ˜è…¾ä¸€ä¸‹åˆ,å®˜æ–¹é¦–é¡µä¹Ÿæ²¡è¯´,æ‰¾äº†å¥½ä¹…)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;Ubuntuä¸‹å®‰è£…
sudo apt-get install libboost-all-dev
sudo apt-get install aptitude
æ¥ç€å®‰è£…PyV8
ç”¨pipå®‰è£…
$sudo pip install -v pyv8
æˆ–:
sudo apt-get install scons libboost-python-dev
svn checkout http://v8.googlecode.com/svn/trunk/ v8
svn checkout http://pyv8.googlecode.com/svn/trunk/ pyv8
cd v8
export V8_HOME=`/home/buffer/v8`
cd ../pyv8
sudo python setup.py build
sudo python setup.py install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ç€å°±å¯ä»¥å¿«ä¹çš„ä½¿ç”¨PyV8äº†&amp;hellip;.é™„ä½¿ç”¨ä»£ç &lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import PyV8

class v8Doc(PyV8.JSClass):
    def write(self, s):
        print s.decode(&#39;utf-8&#39;)

class Global(PyV8.JSClass):
    def __init__(self):
        self.document = v8Doc()

glob = Global()
ctxt = PyV8.JSContext(glob)
ctxt.enter()
ctxt.eval(&amp;quot;var ant=8257+4341;var calf=5749+403^ant;var goat=1986+4175^calf;var fish=6422+7944^goat;var worm=7920+3648^fish;&amp;quot;)
ctxt.eval(&amp;quot;document.write(((10502^calf)+24).toString());&amp;quot;)
jss = &amp;quot;document.write((10502^calf)+24);&amp;quot;
jss = &amp;quot;var thisvalue = &amp;quot; + jss.strip().replace(&amp;quot;document.write(&amp;quot;,&amp;quot;&amp;quot;).replace(&amp;quot;);&amp;quot;,&amp;quot;;&amp;quot;)
print jss
ctxt.eval(jss)
vars = ctxt.locals.thisvalue
print &amp;quot;vars = &amp;quot; + str(vars)
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        
    </channel>
</rss>
